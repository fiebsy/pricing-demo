{"version":3,"file":"utils.js","sourceRoot":"/","sources":["other-repos/demo-repo/src/components/ui/prod/features/metric-card/utils.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * MetricCard Utilities\n *\n * Helper functions for building styles and formatting values.\n *\n * @module metric-card/utils\n */\n\nimport { cn } from '@/lib/utils'\n\nimport {\n  BACKGROUND_CLASSES,\n  FONT_FAMILY_CLASSES,\n  FONT_SIZE_CLASSES,\n  FONT_WEIGHT_CLASSES,\n  TEXT_COLOR_CLASSES,\n} from './config'\n\nimport type {\n  DepthColor,\n  DepthDirection,\n  DepthIntensity,\n  FormattedValueParts,\n  HoverAnimation,\n  LayerStyle,\n  SectionStyle,\n  ShineIntensity,\n  ShineShadow,\n  ShineType,\n  ValueFormatConfig,\n} from './types'\n\n// =============================================================================\n// SHINE & DEPTH CLASS BUILDERS\n// =============================================================================\n\nexport const buildShineClass = (\n  type: ShineType,\n  intensity: ShineIntensity,\n  shadow: ShineShadow\n): string => {\n  if (type === 'none') return ''\n  let className = `shine-${type}`\n  if (intensity !== 'normal') className += `-${intensity}`\n  if (shadow !== 'none') className += `-shadow-${shadow}`\n  return className\n}\n\nexport const buildDepthClass = (\n  intensity: DepthIntensity,\n  color: DepthColor,\n  direction: DepthDirection\n): string => {\n  if (intensity === 'none') return ''\n  let className = `subtle-depth-${intensity}-${color}`\n  if (direction !== 'bottom') className += `-${direction}`\n  return className\n}\n\n// =============================================================================\n// LAYER & SECTION CLASS BUILDERS\n// =============================================================================\n\nexport const buildLayerClasses = (style: LayerStyle, borderRadius: number): string => {\n  const bgClass = BACKGROUND_CLASSES[style.background]\n  const shineClass = buildShineClass(style.shine, style.shineIntensity, style.shineShadow)\n  const depthClass = buildDepthClass(style.depth, style.depthColor, style.depthDirection)\n  const cornerClass = borderRadius > 0 ? 'corner-squircle' : ''\n\n  return cn(bgClass, depthClass, cornerClass, shineClass)\n}\n\nexport const buildSectionClasses = (style: SectionStyle): string => {\n  return cn(\n    TEXT_COLOR_CLASSES[style.color],\n    FONT_FAMILY_CLASSES[style.fontFamily],\n    FONT_SIZE_CLASSES[style.fontSize],\n    FONT_WEIGHT_CLASSES[style.fontWeight]\n  )\n}\n\n// =============================================================================\n// ANIMATION CLASSES\n// =============================================================================\n\nexport const getHoverAnimationClasses = (animation: HoverAnimation): string => {\n  switch (animation) {\n    case 'lift':\n      return 'hover:-translate-y-0.5 hover:shadow-lg'\n    case 'glow':\n      return 'hover:shadow-lg hover:shadow-brand-primary/20'\n    case 'fade':\n      return 'hover:opacity-80 active:opacity-70'\n    default:\n      return ''\n  }\n}\n\n// =============================================================================\n// STYLE MERGING\n// =============================================================================\n\nexport const mergeLayerStyles = (base: LayerStyle, override?: Partial<LayerStyle>): LayerStyle => {\n  if (!override) return base\n  return { ...base, ...override }\n}\n\nexport const mergeSectionStyles = (base: SectionStyle, override?: Partial<SectionStyle>): SectionStyle => {\n  if (!override) return base\n  return { ...base, ...override }\n}\n\n// =============================================================================\n// VALUE FORMATTING\n// =============================================================================\n\n/**\n * Formats a value string with compact notation (k, M, B suffixes)\n * Uses maxDigits to determine total significant figures displayed\n * Returns parts separately for individual styling\n */\nexport const formatCompactValue = (\n  value: string,\n  config: ValueFormatConfig\n): FormattedValueParts => {\n  // Extract prefix (like $) and numeric part\n  const match = value.match(/^([^0-9-]*)(-?[\\d,]+(?:\\.\\d+)?)(.*)$/)\n\n  if (!match) {\n    return { prefix: '', number: value, suffix: '' }\n  }\n\n  const [, prefix = '', numericPart = '', originalSuffix = ''] = match\n\n  if (!config.compact) {\n    return { prefix, number: numericPart + originalSuffix, suffix: '' }\n  }\n\n  const num = parseFloat(numericPart.replace(/,/g, ''))\n\n  if (isNaN(num)) {\n    return { prefix, number: numericPart + originalSuffix, suffix: '' }\n  }\n\n  const absNum = Math.abs(num)\n  const sign = num < 0 ? '-' : ''\n\n  // Determine suffix and divisor\n  let compactSuffix = ''\n  let divisor = 1\n\n  if (absNum >= 1_000_000_000) {\n    compactSuffix = 'B'\n    divisor = 1_000_000_000\n  } else if (absNum >= 1_000_000) {\n    compactSuffix = 'M'\n    divisor = 1_000_000\n  } else if (absNum >= 1_000) {\n    compactSuffix = 'k'\n    divisor = 1_000\n  }\n\n  // If no compacting needed, return with original format\n  if (divisor === 1) {\n    return { prefix, number: numericPart + originalSuffix, suffix: '' }\n  }\n\n  const compactNum = absNum / divisor\n\n  // Calculate how many digits are before the decimal\n  const integerPart = Math.floor(compactNum)\n  const integerDigits = integerPart === 0 ? 1 : Math.floor(Math.log10(integerPart)) + 1\n\n  // Remaining digits can be used for decimals\n  const decimalPlaces = Math.max(0, config.maxDigits - integerDigits)\n\n  // Format with calculated precision\n  const formatted = compactNum.toFixed(decimalPlaces)\n  // Remove trailing zeros after decimal (but keep at least the integer part)\n  const cleanFormatted = formatted.replace(/\\.?0+$/, '')\n\n  return {\n    prefix,\n    number: `${sign}${cleanFormatted}`,\n    suffix: compactSuffix + originalSuffix,\n  }\n}\n"]}
{"version":3,"file":"use-clawback-days.js","sourceRoot":"/","sources":["other-repos/demo-repo/src/components/ui/prod/features/order-details/clawback-timer/hooks/use-clawback-days.ts"],"names":[],"mappings":";AAAA;;;;;GAKG;;;AAEH,iCAA+B;AAkB/B,gFAAgF;AAChF,OAAO;AACP,gFAAgF;AAEhF;;;;;;;;;;;GAWG;AACH,SAAgB,eAAe,CAAC,KAA2C;IACzE,OAAO,IAAA,eAAO,EAAC,GAAG,EAAE;QAClB,gBAAgB;QAChB,IAAI,CAAC,KAAK,EAAE,CAAC;YACX,OAAO;gBACL,iBAAiB,EAAE,IAAI;gBACvB,YAAY,EAAE,KAAK;gBACnB,eAAe,EAAE,KAAK;gBACtB,YAAY,EAAE,MAAM;aACrB,CAAA;QACH,CAAC;QAED,MAAM,EAAE,iBAAiB,EAAE,YAAY,EAAE,YAAY,EAAE,GAAG,KAAK,CAAA;QAE/D,wDAAwD;QACxD,MAAM,UAAU,GACd,YAAY,KAAK,IAAI;YACrB,YAAY,KAAK,iBAAiB;YAClC,YAAY,KAAK,eAAe,CAAA;QAElC,8DAA8D;QAC9D,IAAI,UAAU,IAAI,CAAC,iBAAiB,KAAK,IAAI,IAAI,iBAAiB,KAAK,SAAS,CAAC,EAAE,CAAC;YAClF,OAAO;gBACL,iBAAiB,EAAE,CAAC;gBACpB,YAAY,EAAE,IAAI;gBAClB,eAAe,EAAE,IAAI;gBACrB,YAAY,EAAE,UAAU;aACzB,CAAA;QACH,CAAC;QAED,8BAA8B;QAC9B,IAAI,iBAAiB,KAAK,IAAI,IAAI,iBAAiB,KAAK,SAAS,EAAE,CAAC;YAClE,OAAO;gBACL,iBAAiB,EAAE,IAAI;gBACvB,YAAY,EAAE,KAAK;gBACnB,eAAe,EAAE,KAAK;gBACtB,YAAY,EAAE,MAAM;aACrB,CAAA;QACH,CAAC;QAED,yBAAyB;QACzB,OAAO;YACL,iBAAiB;YACjB,YAAY,EAAE,UAAU,IAAI,iBAAiB,IAAI,CAAC;YAClD,eAAe,EAAE,IAAI;YACrB,YAAY,EAAE,iBAAiB,IAAI,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,WAAW;SAChE,CAAA;IACH,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,CAAA;AACb,CAAC;AAhDD,0CAgDC","sourcesContent":["/**\n * useClawbackDays Hook\n *\n * Extracts and normalizes clawback countdown data from order objects.\n * Handles edge cases like active clawbacks and expired timers.\n */\n\nimport { useMemo } from 'react'\nimport type { OrderClawbackData } from '../types'\n\n// -----------------------------------------------------------------------------\n// Types\n// -----------------------------------------------------------------------------\n\nexport interface ClawbackDaysResult {\n  /** Days until clawback (null if not applicable) */\n  daysUntilClawback: number | null\n  /** Whether the order is in active clawback (past the threshold) */\n  isInClawback: boolean\n  /** Whether to show the timer (false for active clawbacks or missing data) */\n  shouldShowTimer: boolean\n  /** Display state: 'countdown' | 'clawback' | 'none' */\n  displayState: 'countdown' | 'clawback' | 'none'\n}\n\n// -----------------------------------------------------------------------------\n// Hook\n// -----------------------------------------------------------------------------\n\n/**\n * Extracts clawback days from an order object.\n *\n * @param order - Order data containing clawback information\n * @returns Normalized clawback data with display state\n *\n * @example\n * const { daysUntilClawback, shouldShowTimer } = useClawbackDays(order)\n * if (shouldShowTimer) {\n *   return <ClawbackTimer daysUntilClawback={daysUntilClawback} />\n * }\n */\nexport function useClawbackDays(order: OrderClawbackData | null | undefined): ClawbackDaysResult {\n  return useMemo(() => {\n    // No order data\n    if (!order) {\n      return {\n        daysUntilClawback: null,\n        isInClawback: false,\n        shouldShowTimer: false,\n        displayState: 'none',\n      }\n    }\n\n    const { daysUntilClawback, isInClawback, riskCategory } = order\n\n    // Determine if in active clawback from multiple sources\n    const inClawback =\n      isInClawback === true ||\n      riskCategory === 'ACTIVE_CLAWBACK' ||\n      riskCategory === 'CLAWBACK_RISK'\n\n    // Active clawback state - show timer at 0 to indicate expired\n    if (inClawback && (daysUntilClawback === null || daysUntilClawback === undefined)) {\n      return {\n        daysUntilClawback: 0,\n        isInClawback: true,\n        shouldShowTimer: true,\n        displayState: 'clawback',\n      }\n    }\n\n    // No countdown data available\n    if (daysUntilClawback === null || daysUntilClawback === undefined) {\n      return {\n        daysUntilClawback: null,\n        isInClawback: false,\n        shouldShowTimer: false,\n        displayState: 'none',\n      }\n    }\n\n    // Normal countdown state\n    return {\n      daysUntilClawback,\n      isInClawback: inClawback || daysUntilClawback <= 0,\n      shouldShowTimer: true,\n      displayState: daysUntilClawback <= 0 ? 'clawback' : 'countdown',\n    }\n  }, [order])\n}\n"]}
{"version":3,"file":"filter-menu-motion.js","sourceRoot":"/","sources":["other-repos/demo-repo/src/components/ui/prod/base/filter/filter-menu-motion/filter-menu-motion.tsx"],"names":[],"mappings":"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","sourcesContent":["/**\n * FilterMenuMotion - Main Component\n *\n * A filter menu component with Motion Dev animations.\n * Built on Base UI Menu primitives with integrated motion/react.\n *\n * Architecture:\n * - Uses Base UI Menu for accessibility and keyboard navigation\n * - Uses Motion Dev for animations (render prop pattern)\n * - Sliding panel approach for submenu navigation\n * - State-based animation for mounted components\n *\n * Key patterns from documentation:\n * - AnimatePresence with keepMounted for exit animations\n * - initial={false} to prevent animation on first render\n * - render prop to compose motion.div with Base UI components\n *\n * @module prod/base/filter/filter-menu-motion\n */\n\n'use client'\n\nimport * as React from 'react'\nimport { useState, useCallback, useMemo, useEffect, cloneElement, isValidElement } from 'react'\nimport { Menu as BaseMenu } from '@base-ui/react/menu'\nimport { motion, AnimatePresence, useReducedMotion } from 'motion/react'\n\nimport { cn } from '@/lib/utils'\n\n// Internal imports\nimport type { FilterMenuMotionProps, PanelState, MotionAnimationConfig } from './types'\nimport {\n  DEFAULT_MOTION_ANIMATION,\n  DEFAULT_WIDTH,\n  DEFAULT_SIDE_OFFSET,\n  getMotionTransition,\n  createPopupVariants,\n} from './animation-config'\nimport { DEFAULT_FILTER_ITEMS } from './default-items'\nimport { transformItemsWithFilterState } from './utils'\nimport {\n  AnimatedMenuItem,\n  SlidingPanelContainer,\n  FilterMenuHeader,\n  BackButton,\n  FilterTrigger,\n  AnimatedPanel,\n} from './components'\n\n// ============================================================================\n// HOOKS\n// ============================================================================\n\n/**\n * Hook to manage submenu navigation state.\n */\nfunction useSubmenuNavigation(\n  wrappedItems: ReturnType<typeof transformItemsWithFilterState>,\n  animationConfig: MotionAnimationConfig,\n  isOpen: boolean\n) {\n  const [submenu, setSubmenu] = useState<PanelState | null>(null)\n  const [inSubmenu, setInSubmenu] = useState(false)\n\n  // Navigate to a submenu\n  const navigateToSubmenu = useCallback(\n    (menuId: string) => {\n      const submenuItem = wrappedItems.find(\n        (item) => item.id === menuId && item.type === 'submenu'\n      )\n      if (submenuItem && submenuItem.type === 'submenu') {\n        // Set submenu content first\n        setSubmenu({\n          id: menuId,\n          title: submenuItem.label,\n          items: submenuItem.items,\n        })\n        // Delay slide to allow React to render content\n        requestAnimationFrame(() => {\n          requestAnimationFrame(() => {\n            setInSubmenu(true)\n          })\n        })\n      }\n    },\n    [wrappedItems]\n  )\n\n  // Navigate back to root\n  const navigateBack = useCallback(() => {\n    setInSubmenu(false)\n    // Keep submenu content for exit animation, clear after\n    setTimeout(() => {\n      setSubmenu(null)\n    }, animationConfig.slideDuration)\n  }, [animationConfig.slideDuration])\n\n  // Reset on close\n  useEffect(() => {\n    if (!isOpen) {\n      const timeout = setTimeout(() => {\n        setSubmenu(null)\n        setInSubmenu(false)\n      }, 200)\n      return () => clearTimeout(timeout)\n    }\n  }, [isOpen])\n\n  return {\n    submenu,\n    inSubmenu,\n    navigateToSubmenu,\n    navigateBack,\n  }\n}\n\n// ============================================================================\n// MAIN COMPONENT\n// ============================================================================\n\n/**\n * FilterMenuMotion - Filter menu with Motion Dev animations.\n *\n * Uses state-based animation pattern for mounted components:\n * - Both panels stay mounted in the DOM\n * - Animation driven by inSubmenu state\n * - initial={false} prevents animation on first render\n */\nexport function FilterMenuMotion({\n  items = DEFAULT_FILTER_ITEMS,\n  onFilterSelect,\n  activeFilterIds = [],\n  trigger,\n  width = DEFAULT_WIDTH,\n  side = 'bottom',\n  align = 'start',\n  sideOffset = DEFAULT_SIDE_OFFSET,\n  onOpenChange: externalOnOpenChange,\n  animation,\n  className,\n}: FilterMenuMotionProps) {\n  // Merge animation config with defaults\n  const animationConfig = useMemo(\n    () => ({ ...DEFAULT_MOTION_ANIMATION, ...animation }),\n    [animation]\n  )\n\n  // Respect reduced motion preference\n  const shouldReduceMotion = useReducedMotion()\n\n  // Open state\n  const [isOpen, setIsOpen] = useState(false)\n\n  // Create set for O(1) lookup\n  const activeIdsSet = useMemo(\n    () => new Set(activeFilterIds),\n    [activeFilterIds]\n  )\n\n  // Transform items to inject selected state\n  const wrappedItems = useMemo(\n    () => transformItemsWithFilterState(items, activeIdsSet, onFilterSelect),\n    [items, activeIdsSet, onFilterSelect]\n  )\n\n  // Submenu navigation\n  const { submenu, inSubmenu, navigateToSubmenu, navigateBack } =\n    useSubmenuNavigation(wrappedItems, animationConfig, isOpen)\n\n  // Handlers\n  const handleOpenChange = useCallback(\n    (open: boolean) => {\n      setIsOpen(open)\n      externalOnOpenChange?.(open)\n    },\n    [externalOnOpenChange]\n  )\n\n  const handleSelect = useCallback(() => {\n    handleOpenChange(false)\n  }, [handleOpenChange])\n\n  // Trigger\n  const resolvedTrigger = trigger ?? <FilterTrigger isOpen={isOpen} />\n\n  // Popup variants\n  const popupVariants = shouldReduceMotion\n    ? undefined\n    : createPopupVariants(animationConfig, side === 'bottom' ? 'bottom' : 'top')\n\n  // -------------------------------------------------------------------------\n  // RENDER\n  // -------------------------------------------------------------------------\n\n  return (\n    <BaseMenu.Root open={isOpen} onOpenChange={handleOpenChange} modal={false}>\n      <BaseMenu.Trigger render={<span className=\"outline-none focus:outline-none\" />}>\n        {isValidElement(resolvedTrigger)\n          ? cloneElement(resolvedTrigger as React.ReactElement<{ isActive?: boolean }>, {\n              isActive: isOpen,\n            })\n          : resolvedTrigger}\n      </BaseMenu.Trigger>\n\n      <AnimatePresence>\n        {isOpen && (\n          <BaseMenu.Portal keepMounted>\n            <BaseMenu.Positioner\n              side={side}\n              align={align}\n              sideOffset={sideOffset}\n              collisionPadding={8}\n              style={{ zIndex: 9999 }}\n            >\n              <BaseMenu.Popup\n                render={\n                  <motion.div\n                    variants={popupVariants}\n                    initial=\"hidden\"\n                    animate=\"visible\"\n                    exit=\"exit\"\n                    transition={getMotionTransition(animationConfig, animationConfig.revealDuration)}\n                    style={{ transformOrigin: 'var(--transform-origin)' }}\n                  />\n                }\n                className={cn(\n                  'rounded-2xl corner-squircle',\n                  'bg-primary shine-2-subtle-shadow-lg',\n                  'motion-reduce:animate-none motion-reduce:transition-none',\n                  className\n                )}\n                style={{ width }}\n              >\n                <SlidingPanelContainer\n                  inSubmenu={inSubmenu}\n                  isOpen={isOpen}\n                  animationConfig={animationConfig}\n                  submenuKey={submenu?.id ?? null}\n                  rootPanel={\n                    <RootPanel\n                      items={wrappedItems}\n                      isVisible={!inSubmenu}\n                      animationConfig={animationConfig}\n                      shouldReduceMotion={shouldReduceMotion}\n                      onSubmenuClick={navigateToSubmenu}\n                      onSelect={handleSelect}\n                    />\n                  }\n                  submenuPanel={\n                    <SubmenuPanel\n                      submenu={submenu}\n                      isVisible={inSubmenu}\n                      animationConfig={animationConfig}\n                      shouldReduceMotion={shouldReduceMotion}\n                      onBack={navigateBack}\n                      onSubmenuClick={navigateToSubmenu}\n                      onSelect={handleSelect}\n                    />\n                  }\n                />\n              </BaseMenu.Popup>\n            </BaseMenu.Positioner>\n          </BaseMenu.Portal>\n        )}\n      </AnimatePresence>\n    </BaseMenu.Root>\n  )\n}\n\nFilterMenuMotion.displayName = 'FilterMenuMotion'\n\n// ============================================================================\n// PANEL COMPONENTS\n// ============================================================================\n\ninterface RootPanelProps {\n  items: ReturnType<typeof transformItemsWithFilterState>\n  isVisible: boolean\n  animationConfig: MotionAnimationConfig\n  shouldReduceMotion: boolean | null\n  onSubmenuClick: (id: string) => void\n  onSelect: () => void\n}\n\nfunction RootPanel({\n  items,\n  isVisible,\n  animationConfig,\n  shouldReduceMotion,\n  onSubmenuClick,\n  onSelect,\n}: RootPanelProps) {\n  return (\n    <AnimatedPanel\n      isActive={isVisible}\n      animationConfig={animationConfig}\n      isSubmenu={false}\n    >\n      <FilterMenuHeader />\n      <div className=\"flex flex-col gap-1\">\n        {items.map((item, index) => (\n          <AnimatedMenuItem\n            key={item.id}\n            item={item}\n            index={index}\n            animationConfig={animationConfig}\n            shouldReduceMotion={shouldReduceMotion}\n            isVisible={isVisible}\n            onSubmenuClick={onSubmenuClick}\n            onSelect={onSelect}\n          />\n        ))}\n      </div>\n    </AnimatedPanel>\n  )\n}\n\ninterface SubmenuPanelProps {\n  submenu: PanelState | null\n  isVisible: boolean\n  animationConfig: MotionAnimationConfig\n  shouldReduceMotion: boolean | null\n  onBack: () => void\n  onSubmenuClick: (id: string) => void\n  onSelect: () => void\n}\n\nfunction SubmenuPanel({\n  submenu,\n  isVisible,\n  animationConfig,\n  shouldReduceMotion,\n  onBack,\n  onSubmenuClick,\n  onSelect,\n}: SubmenuPanelProps) {\n  return (\n    <AnimatedPanel\n      isActive={isVisible}\n      animationConfig={animationConfig}\n      isSubmenu\n    >\n      {submenu && (\n        <>\n          <BackButton\n            title={submenu.title}\n            onBack={onBack}\n            isVisible={isVisible}\n            animationConfig={animationConfig}\n            shouldReduceMotion={shouldReduceMotion}\n          />\n          <div className=\"flex flex-col gap-1\">\n            {submenu.items.map((item, index) => (\n              <AnimatedMenuItem\n                key={item.id}\n                item={item}\n                index={index}\n                animationConfig={animationConfig}\n                shouldReduceMotion={shouldReduceMotion}\n                isVisible={isVisible}\n                isInSubmenu\n                onSubmenuClick={onSubmenuClick}\n                onSelect={onSelect}\n              />\n            ))}\n          </div>\n        </>\n      )}\n    </AnimatedPanel>\n  )\n}\n"]}
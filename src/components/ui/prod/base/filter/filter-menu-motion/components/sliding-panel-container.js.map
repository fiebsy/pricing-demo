{"version":3,"file":"sliding-panel-container.js","sourceRoot":"/","sources":["other-repos/demo-repo/src/components/ui/prod/base/filter/filter-menu-motion/components/sliding-panel-container.tsx"],"names":[],"mappings":"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","sourcesContent":["/**\n * SlidingPanelContainer - Animated height and slide container\n *\n * Manages the complex height animation and horizontal slide\n * for panel transitions. Supports two transition modes:\n * - 'slide': Both panels in a strip, slides horizontally\n * - 'popLayout': AnimatePresence with popLayout for exit animations\n *\n * @module prod/base/filter/filter-menu-motion/components/sliding-panel-container\n */\n\n'use client'\n\nimport { useRef, useLayoutEffect, useEffect, useState, useCallback, type ReactNode } from 'react'\nimport { motion, AnimatePresence } from 'motion/react'\n\nimport type { MotionAnimationConfig } from '../types'\nimport { getSlideTransition, EASE_OUT_EXPO, SCALE_ORIGIN_MAP } from '../animation-config'\n\n// ============================================================================\n// PROPS\n// ============================================================================\n\nexport interface SlidingPanelContainerProps {\n  /** Whether currently showing submenu (true) or root (false) */\n  inSubmenu: boolean\n  /** Whether the menu is open */\n  isOpen: boolean\n  /** Animation configuration */\n  animationConfig: MotionAnimationConfig\n  /** Root panel content */\n  rootPanel: ReactNode\n  /** Submenu panel content */\n  submenuPanel: ReactNode\n  /** Key to track submenu content changes (e.g., submenu ID) */\n  submenuKey?: string | null\n  /** Debug mode for console logging */\n  debug?: boolean\n}\n\n// ============================================================================\n// HEIGHT MEASUREMENT HOOK\n// ============================================================================\n\nfunction useHeightMeasurement(\n  isOpen: boolean,\n  inSubmenu: boolean,\n  submenuKey: string | null | undefined,\n  debug: boolean\n) {\n  const rootRef = useRef<HTMLDivElement>(null)\n  const submenuRef = useRef<HTMLDivElement>(null)\n  const [rootHeight, setRootHeight] = useState<number | 'auto'>('auto')\n  const [submenuHeight, setSubmenuHeight] = useState<number | 'auto'>('auto')\n\n  const measurePanels = useCallback(() => {\n    if (rootRef.current) {\n      const h = rootRef.current.scrollHeight\n      if (debug) console.log('[Panel] ðŸ“ Root height:', h)\n      setRootHeight(h)\n    }\n    if (submenuRef.current) {\n      const h = submenuRef.current.scrollHeight\n      if (debug) console.log('[Panel] ðŸ“ Submenu height:', h)\n      setSubmenuHeight(h)\n    }\n  }, [debug])\n\n  useLayoutEffect(() => {\n    if (!isOpen) return\n    requestAnimationFrame(() => {\n      requestAnimationFrame(() => measurePanels())\n    })\n  }, [isOpen, measurePanels])\n\n  useEffect(() => {\n    if (!isOpen || !inSubmenu) return\n    if (debug) console.log('[Panel] ðŸ”„ Submenu changed:', submenuKey)\n    const timeoutId = setTimeout(measurePanels, 50)\n    return () => clearTimeout(timeoutId)\n  }, [isOpen, inSubmenu, submenuKey, measurePanels, debug])\n\n  useEffect(() => {\n    if (!isOpen) return\n    const observer = new ResizeObserver(measurePanels)\n    if (rootRef.current) observer.observe(rootRef.current)\n    if (submenuRef.current) observer.observe(submenuRef.current)\n    return () => observer.disconnect()\n  }, [isOpen, measurePanels])\n\n  return { rootRef, submenuRef, rootHeight, submenuHeight }\n}\n\n// ============================================================================\n// SLIDE MODE\n// ============================================================================\n\nfunction SlideMode({\n  inSubmenu,\n  animationConfig,\n  rootPanel,\n  submenuPanel,\n  rootRef,\n  submenuRef,\n  targetHeight,\n}: {\n  inSubmenu: boolean\n  animationConfig: MotionAnimationConfig\n  rootPanel: ReactNode\n  submenuPanel: ReactNode\n  rootRef: React.RefObject<HTMLDivElement | null>\n  submenuRef: React.RefObject<HTMLDivElement | null>\n  targetHeight: number | 'auto'\n}) {\n  // slideOffset controls overlap: 50 = no overlap, <50 = overlap, >50 = gap\n  const { slideOffset, stripWidth } = animationConfig\n  // Overlap mode needs different handling - panels stack instead of side-by-side\n  const useOverlap = slideOffset < 50\n\n  if (useOverlap) {\n    // Stacked panels with translate for overlap effect\n    return (\n      <motion.div\n        className=\"relative\"\n        initial={false}\n        animate={{ height: animationConfig.animateHeight ? targetHeight : 'auto' }}\n        transition={{ duration: animationConfig.heightDuration / 1000, ease: EASE_OUT_EXPO }}\n      >\n        {/* Root panel - slides out to left */}\n        <motion.div\n          ref={rootRef}\n          initial={false}\n          animate={{\n            x: inSubmenu ? `${-100 + (50 - slideOffset)}%` : '0%',\n            opacity: inSubmenu ? 0 : 1,\n          }}\n          transition={getSlideTransition(animationConfig)}\n          className=\"absolute inset-0 p-1\"\n          style={{ zIndex: inSubmenu ? 0 : 1 }}\n        >\n          {rootPanel}\n        </motion.div>\n        {/* Submenu panel - slides in from right */}\n        <motion.div\n          ref={submenuRef}\n          initial={false}\n          animate={{\n            x: inSubmenu ? '0%' : `${100 - (50 - slideOffset)}%`,\n            opacity: inSubmenu ? 1 : 0,\n          }}\n          transition={getSlideTransition(animationConfig)}\n          className=\"p-1\"\n          style={{ zIndex: inSubmenu ? 1 : 0 }}\n        >\n          {submenuPanel}\n        </motion.div>\n      </motion.div>\n    )\n  }\n\n  // Standard side-by-side strip mode\n  const panelWidthPercent = 100 / stripWidth * 100 // Each panel as % of strip\n\n  return (\n    <motion.div\n      className=\"relative overflow-hidden\"\n      initial={false}\n      animate={{ height: animationConfig.animateHeight ? targetHeight : 'auto' }}\n      transition={{ duration: animationConfig.heightDuration / 1000, ease: EASE_OUT_EXPO }}\n    >\n      <motion.div\n        initial={false}\n        animate={{ x: inSubmenu ? `${-slideOffset}%` : '0%' }}\n        transition={getSlideTransition(animationConfig)}\n        className=\"flex items-start\"\n        style={{ width: `${stripWidth}%` }}\n      >\n        <div ref={rootRef} className=\"flex-shrink-0 p-1\" style={{ width: `${panelWidthPercent}%` }}>\n          {rootPanel}\n        </div>\n        <div ref={submenuRef} className=\"flex-shrink-0 p-1\" style={{ width: `${panelWidthPercent}%` }}>\n          {submenuPanel}\n        </div>\n      </motion.div>\n    </motion.div>\n  )\n}\n\n// ============================================================================\n// POPLAYOUT MODE\n// ============================================================================\n\nfunction PopLayoutMode({\n  inSubmenu,\n  animationConfig,\n  rootPanel,\n  submenuPanel,\n  rootRef,\n  submenuRef,\n  targetHeight,\n  submenuKey,\n}: {\n  inSubmenu: boolean\n  animationConfig: MotionAnimationConfig\n  rootPanel: ReactNode\n  submenuPanel: ReactNode\n  rootRef: React.RefObject<HTMLDivElement | null>\n  submenuRef: React.RefObject<HTMLDivElement | null>\n  targetHeight: number | 'auto'\n  submenuKey: string | null | undefined\n}) {\n  const { slideDuration, panelExitScale, panelEnterScale, panelScaleOrigin, enableCrossfade } =\n    animationConfig\n  const duration = slideDuration / 1000\n  const transformOrigin = SCALE_ORIGIN_MAP[panelScaleOrigin]\n\n  const rootVariants = {\n    initial: { scale: panelEnterScale, opacity: enableCrossfade ? 0 : 1, x: -20 },\n    animate: { scale: 1, opacity: 1, x: 0 },\n    exit: { scale: panelExitScale, opacity: enableCrossfade ? 0 : 1, x: -20 },\n  }\n\n  const submenuVariants = {\n    initial: { scale: panelEnterScale, opacity: enableCrossfade ? 0 : 1, x: 20 },\n    animate: { scale: 1, opacity: 1, x: 0 },\n    exit: { scale: panelExitScale, opacity: enableCrossfade ? 0 : 1, x: 20 },\n  }\n\n  const transition = {\n    duration,\n    ease: EASE_OUT_EXPO,\n  }\n\n  return (\n    <motion.div\n      className=\"relative overflow-hidden\"\n      initial={false}\n      animate={{ height: animationConfig.animateHeight ? targetHeight : 'auto' }}\n      transition={{ duration: animationConfig.heightDuration / 1000, ease: EASE_OUT_EXPO }}\n    >\n      <AnimatePresence mode=\"popLayout\" initial={false}>\n        {inSubmenu ? (\n          <motion.div\n            key={`submenu-${submenuKey}`}\n            ref={submenuRef}\n            variants={submenuVariants}\n            initial=\"initial\"\n            animate=\"animate\"\n            exit=\"exit\"\n            transition={transition}\n            style={{ transformOrigin }}\n            className=\"p-1\"\n          >\n            {submenuPanel}\n          </motion.div>\n        ) : (\n          <motion.div\n            key=\"root\"\n            ref={rootRef}\n            variants={rootVariants}\n            initial=\"initial\"\n            animate=\"animate\"\n            exit=\"exit\"\n            transition={transition}\n            style={{ transformOrigin }}\n            className=\"p-1\"\n          >\n            {rootPanel}\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </motion.div>\n  )\n}\n\n// ============================================================================\n// MAIN COMPONENT\n// ============================================================================\n\n/**\n * SlidingPanelContainer - Manages panel transition animations.\n *\n * Supports two transition modes:\n * - 'slide': Horizontal sliding strip with configurable width and offset\n * - 'popLayout': AnimatePresence with scale/fade transitions\n */\nexport function SlidingPanelContainer({\n  inSubmenu,\n  isOpen,\n  animationConfig,\n  rootPanel,\n  submenuPanel,\n  submenuKey,\n  debug = false,\n}: SlidingPanelContainerProps) {\n  const { rootRef, submenuRef, rootHeight, submenuHeight } = useHeightMeasurement(\n    isOpen,\n    inSubmenu,\n    submenuKey,\n    debug\n  )\n\n  const targetHeight = inSubmenu ? submenuHeight : rootHeight\n\n  if (debug && isOpen) {\n    console.log('[Panel] ðŸŽ¯ Target height:', targetHeight, { inSubmenu, rootHeight, submenuHeight })\n  }\n\n  if (animationConfig.panelTransitionMode === 'popLayout') {\n    return (\n      <PopLayoutMode\n        inSubmenu={inSubmenu}\n        animationConfig={animationConfig}\n        rootPanel={rootPanel}\n        submenuPanel={submenuPanel}\n        rootRef={rootRef}\n        submenuRef={submenuRef}\n        targetHeight={targetHeight}\n        submenuKey={submenuKey}\n      />\n    )\n  }\n\n  return (\n    <SlideMode\n      inSubmenu={inSubmenu}\n      animationConfig={animationConfig}\n      rootPanel={rootPanel}\n      submenuPanel={submenuPanel}\n      rootRef={rootRef}\n      submenuRef={submenuRef}\n      targetHeight={targetHeight}\n    />\n  )\n}\n\nSlidingPanelContainer.displayName = 'SlidingPanelContainer'\n"]}
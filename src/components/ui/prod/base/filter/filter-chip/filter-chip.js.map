{"version":3,"file":"filter-chip.js","sourceRoot":"/","sources":["other-repos/demo-repo/src/components/ui/prod/base/filter/filter-chip/filter-chip.tsx"],"names":[],"mappings":"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","sourcesContent":["/**\n * Filter Chip - Main Component\n *\n * Expanding filter chip that animates from icon to full value display.\n *\n * @module prod/base/filter/filter-chip/filter-chip\n */\n\n'use client'\n\nimport { useRef, useCallback, useLayoutEffect, useState, useEffect, useMemo } from 'react'\nimport CancelCircleSolidIcon from '@hugeicons-pro/core-solid-rounded/CancelCircleIcon'\n\nimport { cn } from '@/lib/utils'\nimport { HugeIcon } from '@/components/ui/prod/base/icon'\n\nimport type { FilterChipProps } from './types'\nimport { mergeConfig, getSizeConfig, ROUNDED_CLASSES, EASING_EXPO_OUT } from './config'\nimport { useChipAnimation } from './use-chip-animation'\n\n// ============================================================================\n// Component\n// ============================================================================\n\nexport const FilterChip: React.FC<FilterChipProps> = ({\n  value,\n  icon,\n  label,\n  onRemove,\n  config: configProp,\n  defaultExpanded = false,\n  expanded,\n  onExpandedChange,\n  className,\n}) => {\n  const containerRef = useRef<HTMLDivElement>(null)\n  const measureRef = useRef<HTMLDivElement>(null)\n  const iconLabelRef = useRef<HTMLSpanElement>(null)\n\n  // Memoize config merge to prevent recalculation\n  const config = useMemo(() => mergeConfig(configProp), [configProp])\n  const sizeConfig = useMemo(() => getSizeConfig(config.size), [config.size])\n  const roundedClass = ROUNDED_CLASSES[config.rounded]\n\n  const hasIcon = !!icon\n\n  // ============================================================================\n  // Animation\n  // ============================================================================\n\n  const animation = useChipAnimation({\n    defaultExpanded,\n    expanded,\n    onExpandedChange,\n    duration: config.duration,\n    revealMode: config.revealMode,\n    opacityFadeRatio: config.opacityFadeRatio,\n  })\n\n  // ============================================================================\n  // Measurement\n  // ============================================================================\n\n  const [collapsedWidth, setCollapsedWidth] = useState(0)\n  const [expandedWidth, setExpandedWidth] = useState(0)\n\n  useLayoutEffect(() => {\n    const measure = () => {\n      if (measureRef.current) {\n        setExpandedWidth(measureRef.current.offsetWidth)\n      }\n      if (iconLabelRef.current) {\n        setCollapsedWidth(iconLabelRef.current.offsetWidth)\n      }\n    }\n\n    measure()\n\n    // Re-measure on resize\n    const observer = new ResizeObserver(measure)\n    if (measureRef.current) observer.observe(measureRef.current)\n    if (iconLabelRef.current) observer.observe(iconLabelRef.current)\n\n    return () => observer.disconnect()\n  }, [value, label, icon, config.size])\n\n  // ============================================================================\n  // Handlers\n  // ============================================================================\n\n  const handleRemove = useCallback(() => {\n    onRemove?.()\n  }, [onRemove])\n\n  const handleTransitionEnd = useCallback(\n    (e: React.TransitionEvent) => {\n      if (e.target === containerRef.current) {\n        animation.onTransitionEnd(e)\n      }\n    },\n    [animation]\n  )\n\n  const currentWidth = animation.isExpanded ? expandedWidth : collapsedWidth\n\n  // ============================================================================\n  // Fade-in on mount (only after measurements are ready)\n  // ============================================================================\n\n  const [isVisible, setIsVisible] = useState(false)\n  const hasMeasurements = collapsedWidth > 0 && expandedWidth > 0\n\n  useEffect(() => {\n    if (!hasMeasurements) return\n\n    const frame = requestAnimationFrame(() => setIsVisible(true))\n    return () => cancelAnimationFrame(frame)\n  }, [hasMeasurements])\n\n  // ============================================================================\n  // Render Helpers\n  // ============================================================================\n\n  const renderIconOrLabel = () => {\n    if (hasIcon) {\n      return (\n        <HugeIcon\n          icon={icon}\n          size={config.iconSize}\n          strokeWidth={2}\n          className=\"text-tertiary flex-shrink-0\"\n          style={{ opacity: config.iconOpacity }}\n        />\n      )\n    }\n    return (\n      <span\n        className={cn(sizeConfig.textClass, 'font-medium text-tertiary whitespace-nowrap')}\n        style={{ opacity: config.iconOpacity }}\n      >\n        {label}:\n      </span>\n    )\n  }\n\n  return (\n    <div\n      className=\"relative inline-flex\"\n      style={{\n        opacity: isVisible ? 1 : 0,\n        transition: `opacity 200ms ${EASING_EXPO_OUT}`,\n      }}\n    >\n      {/* Hidden measurement element */}\n      <div\n        ref={measureRef}\n        aria-hidden=\"true\"\n        className={cn(\n          'inline-flex items-center',\n          'bg-secondary border border-transparent shine-3-subtle',\n          roundedClass,\n          'whitespace-nowrap pointer-events-none'\n        )}\n        style={{\n          visibility: 'hidden',\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          height: sizeConfig.height,\n          paddingLeft: config.paddingLeft,\n          paddingRight: config.paddingRight,\n        }}\n      >\n        <span\n          ref={iconLabelRef}\n          className=\"inline-flex items-center\"\n          style={{\n            height: sizeConfig.height,\n            paddingLeft: config.paddingLeft,\n            marginLeft: -config.paddingLeft,\n          }}\n        >\n          {renderIconOrLabel()}\n        </span>\n        <span\n          className={cn(sizeConfig.textClass, 'font-medium text-primary whitespace-nowrap')}\n          style={{ marginLeft: config.iconValueGap }}\n        >\n          {value}\n        </span>\n        {onRemove && (\n          <span\n            className=\"flex-shrink-0 flex items-center justify-center\"\n            style={{ width: config.closeSize, height: config.closeSize, marginLeft: config.valueCloseGap }}\n          />\n        )}\n      </div>\n\n      {/* Visible animated container */}\n      <div\n        ref={containerRef}\n        onClick={!animation.isExpanded ? animation.toggle : undefined}\n        onTransitionEnd={handleTransitionEnd}\n        className={cn(\n          'relative overflow-hidden',\n          'bg-secondary border border-transparent shine-3-subtle',\n          roundedClass,\n          'motion-reduce:transition-none',\n          !animation.isExpanded && 'cursor-pointer',\n          className\n        )}\n        style={{\n          width: currentWidth,\n          height: sizeConfig.height,\n          transition: animation.getContainerTransition(),\n        }}\n      >\n        {/* Icon/Label - absolutely positioned, never moves */}\n        <div\n          className=\"absolute left-0 top-0 bottom-0 flex items-center justify-center\"\n          style={{\n            width: collapsedWidth,\n            paddingLeft: config.paddingLeft,\n          }}\n        >\n          {renderIconOrLabel()}\n        </div>\n\n        {/* Value area - revealed as container expands */}\n        <div\n          className=\"absolute top-0 bottom-0 right-0 flex items-center\"\n          style={{\n            left: collapsedWidth,\n            paddingLeft: config.iconValueGap,\n            paddingRight: config.paddingRight,\n            gap: config.valueCloseGap,\n            opacity: animation.getContentOpacity(),\n            transition: animation.getContentTransition(),\n            pointerEvents: animation.isExpanded ? 'auto' : 'none',\n          }}\n        >\n          <span className={cn(sizeConfig.textClass, 'font-medium text-primary whitespace-nowrap')}>\n            {value}\n          </span>\n\n          {onRemove && (\n            <button\n              onClick={(e) => {\n                e.stopPropagation()\n                handleRemove()\n              }}\n              className={cn(\n                'flex-shrink-0 flex items-center justify-center rounded-full',\n                'text-tertiary hover:text-primary',\n                'transition-colors duration-150',\n                'motion-reduce:transition-none',\n                'focus:outline-none focus-visible:ring-2 focus-visible:ring-brand'\n              )}\n              style={{\n                width: config.closeSize,\n                height: config.closeSize,\n                opacity: animation.getContentOpacity(),\n                transition: animation.getContentTransition(),\n              }}\n              aria-label={`Remove ${value} filter`}\n            >\n              <HugeIcon\n                icon={CancelCircleSolidIcon}\n                size={config.closeSize}\n                strokeWidth={0}\n              />\n            </button>\n          )}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nFilterChip.displayName = 'FilterChip'\n"]}
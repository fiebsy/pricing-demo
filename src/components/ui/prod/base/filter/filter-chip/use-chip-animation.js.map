{"version":3,"file":"use-chip-animation.js","sourceRoot":"/","sources":["other-repos/demo-repo/src/components/ui/prod/base/filter/filter-chip/use-chip-animation.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * Filter Chip - Animation Hook\n *\n * Manages expand/collapse animation state and timing.\n *\n * @module prod/base/filter/filter-chip/use-chip-animation\n */\n\nimport { useState, useEffect, useCallback } from 'react'\nimport type { ChipAnimationOptions, ChipAnimationResult } from './types'\nimport { EASING_EXPO_OUT, DURATION_EXPAND, DURATION_COLLAPSE, OPACITY_FADE_RATIO } from './config'\n\nexport function useChipAnimation(options: ChipAnimationOptions): ChipAnimationResult {\n  const {\n    defaultExpanded = false,\n    expanded: controlledExpanded,\n    onExpandedChange,\n    duration = DURATION_EXPAND,\n    revealMode = 'instant',\n    opacityFadeRatio = OPACITY_FADE_RATIO,\n  } = options\n\n  const [internalExpanded, setInternalExpanded] = useState(defaultExpanded)\n  const isExpanded = controlledExpanded ?? internalExpanded\n\n  // Track when width animation completes (for 'sync' mode)\n  const [widthComplete, setWidthComplete] = useState(defaultExpanded)\n\n  // Reset when collapsing\n  useEffect(() => {\n    if (!isExpanded) {\n      setWidthComplete(false)\n    }\n  }, [isExpanded])\n\n  // Auto-expand on mount\n  useEffect(() => {\n    if (defaultExpanded) return\n\n    const frame = requestAnimationFrame(() => {\n      setInternalExpanded(true)\n      onExpandedChange?.(true)\n    })\n\n    return () => cancelAnimationFrame(frame)\n    // Only run on mount\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  const toggle = useCallback(() => {\n    const next = !isExpanded\n    setInternalExpanded(next)\n    onExpandedChange?.(next)\n  }, [isExpanded, onExpandedChange])\n\n  const onTransitionEnd = useCallback(\n    (e: React.TransitionEvent) => {\n      if (e.propertyName === 'width' && isExpanded) {\n        setWidthComplete(true)\n      }\n    },\n    [isExpanded]\n  )\n\n  const getContentOpacity = useCallback(() => {\n    if (revealMode === 'none') return 1\n    if (!isExpanded) return 0\n    if (revealMode === 'sync') return widthComplete ? 1 : 0\n    return 1\n  }, [revealMode, isExpanded, widthComplete])\n\n  const getContentTransition = useCallback(() => {\n    if (revealMode === 'none') return 'none'\n\n    if (!isExpanded) {\n      return `opacity ${DURATION_COLLAPSE}ms ease-out`\n    }\n\n    switch (revealMode) {\n      case 'fade': {\n        // Fade starts early, runs most of the duration\n        const fadeDelay = duration * opacityFadeRatio\n        const fadeDuration = duration * (1 - opacityFadeRatio)\n        return `opacity ${fadeDuration}ms ${EASING_EXPO_OUT} ${fadeDelay}ms`\n      }\n      case 'delay':\n        return `opacity 1ms linear ${duration}ms`\n      case 'sync':\n        return 'opacity 50ms linear'\n      case 'instant':\n        return `opacity ${duration}ms ${EASING_EXPO_OUT}`\n      default:\n        return `opacity ${duration * opacityFadeRatio}ms ${EASING_EXPO_OUT}`\n    }\n  }, [revealMode, isExpanded, duration, opacityFadeRatio])\n\n  const getContainerTransition = useCallback(() => {\n    if (isExpanded) {\n      return `width ${duration}ms ${EASING_EXPO_OUT}`\n    }\n    return `width ${DURATION_COLLAPSE}ms ease-out`\n  }, [isExpanded, duration])\n\n  return {\n    isExpanded,\n    widthComplete,\n    toggle,\n    onTransitionEnd,\n    getContentOpacity,\n    getContentTransition,\n    getContainerTransition,\n  }\n}\n"]}
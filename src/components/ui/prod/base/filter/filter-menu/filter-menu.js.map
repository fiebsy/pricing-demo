{"version":3,"file":"filter-menu.js","sourceRoot":"/","sources":["other-repos/demo-repo/src/components/ui/prod/base/filter/filter-menu/filter-menu.tsx"],"names":[],"mappings":"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","sourcesContent":["/**\n * Filter Menu - Main Component\n *\n * A derivative of the base Menu component specialized for filtering.\n * Adds filter-specific behavior:\n * - Default \"Add a filter\" trigger\n * - Default filter header\n * - Active filter tracking (selected state, activeCount badges)\n *\n * @module prod/base/filter/filter-menu/filter-menu\n */\n\n'use client'\n\nimport React, { useMemo, useCallback } from 'react'\n\nimport { Menu } from '../../menu'\nimport type { MenuItemType, MenuItemAction, MenuAppearance, AnimationConfig, MenuSide, MenuAlign } from '../../menu'\nimport { FilterMenuHeader } from './filter-menu-header'\nimport { FilterTrigger } from '../filter-trigger'\nimport { DEFAULT_FILTER_ITEMS } from './default-items'\n\n// ============================================================================\n// Types\n// ============================================================================\n\nexport interface FilterMenuProps {\n  /** Menu items to display */\n  items?: MenuItemType[]\n  /** Callback when filter is selected */\n  onFilterSelect?: (filterId: string) => void\n  /** IDs of active filters (shows checkmarks/badges) */\n  activeFilterIds?: string[]\n  /** Custom trigger element */\n  trigger?: React.ReactNode\n  /** Custom header content (only shown if noHeader is false) */\n  header?: React.ReactNode\n  /**\n   * Disable header on main menu (default: true)\n   * Note: Submenu back button always shows for navigation\n   */\n  noHeader?: boolean\n  /** Menu width in pixels */\n  width?: number\n  /** Position relative to trigger */\n  side?: MenuSide\n  /** Alignment relative to trigger */\n  align?: MenuAlign\n  /** Offset from trigger (pixels) */\n  sideOffset?: number\n  /** Offset along alignment axis (pixels) */\n  alignOffset?: number\n  /** Callback when menu opens/closes */\n  onOpenChange?: (open: boolean) => void\n  /** Appearance overrides */\n  appearance?: MenuAppearance\n  /** Animation configuration */\n  animation?: AnimationConfig\n  /** Additional className for popup */\n  className?: string\n}\n\n// ============================================================================\n// Item Transformation\n// ============================================================================\n\n/**\n * Transform items to inject selected state and onClick wrappers\n * based on activeFilterIds and onFilterSelect callback\n */\nfunction transformItemsWithFilterState(\n  items: MenuItemType[],\n  activeIdsSet: Set<string>,\n  onFilterSelect?: (filterId: string) => void\n): MenuItemType[] {\n  return items.map((item) => {\n    if (item.type === 'separator' || item.type === 'label' || item.type === 'checkbox') {\n      return item\n    }\n\n    if (item.type === 'submenu') {\n      let activeCount = 0\n      const wrappedSubItems = item.items.map((subItem) => {\n        if (subItem.type === 'separator' || subItem.type === 'label' || subItem.type === 'submenu' || subItem.type === 'checkbox') {\n          return subItem\n        }\n        const isSelected = activeIdsSet.has(subItem.id)\n        if (isSelected) activeCount++\n        return {\n          ...subItem,\n          selected: isSelected,\n          onClick: () => {\n            subItem.onClick?.()\n            onFilterSelect?.(subItem.id)\n          },\n        }\n      })\n      return { ...item, items: wrappedSubItems, activeCount }\n    }\n\n    // Action item\n    const isSelected = activeIdsSet.has(item.id)\n    return {\n      ...item,\n      selected: isSelected,\n      onClick: () => {\n        item.onClick?.()\n        onFilterSelect?.(item.id)\n      },\n    }\n  })\n}\n\n// ============================================================================\n// Component\n// ============================================================================\n\n/**\n * FilterMenu - Filter-specific menu component\n *\n * Built on top of the base Menu component, adds:\n * - Default \"Add a filter\" trigger\n * - Default filter header with filter icon\n * - Active filter tracking (checkmarks, badges)\n * - onFilterSelect callback for filter toggling\n */\nexport const FilterMenu: React.FC<FilterMenuProps> = ({\n  items = DEFAULT_FILTER_ITEMS,\n  onFilterSelect,\n  activeFilterIds = [],\n  trigger,\n  header,\n  noHeader = true,  // Default: no header on main menu (submenu back button still shows)\n  width,\n  side,\n  align,\n  sideOffset,\n  alignOffset,\n  onOpenChange,\n  appearance,\n  animation,\n  className,\n}) => {\n  // Track open state for trigger styling\n  const [isOpen, setIsOpen] = React.useState(false)\n\n  const handleOpenChange = useCallback((open: boolean) => {\n    setIsOpen(open)\n    onOpenChange?.(open)\n  }, [onOpenChange])\n\n  // Create set for O(1) lookup\n  const activeIdsSet = useMemo(\n    () => new Set(activeFilterIds),\n    [activeFilterIds]\n  )\n\n  // Transform items to inject selected state and onClick wrappers\n  const wrappedItems = useMemo(\n    () => transformItemsWithFilterState(items, activeIdsSet, onFilterSelect),\n    [items, activeIdsSet, onFilterSelect]\n  )\n\n  // Default trigger if not provided\n  const resolvedTrigger = trigger ?? <FilterTrigger isOpen={isOpen} />\n\n  // Default header if not disabled\n  const resolvedHeader = noHeader ? undefined : (header ?? <FilterMenuHeader />)\n\n  return (\n    <Menu\n      items={wrappedItems}\n      trigger={resolvedTrigger}\n      header={resolvedHeader}\n      width={width}\n      side={side}\n      align={align}\n      sideOffset={sideOffset}\n      alignOffset={alignOffset}\n      onOpenChange={handleOpenChange}\n      appearance={appearance}\n      animation={animation}\n      className={className}\n    />\n  )\n}\n\nFilterMenu.displayName = 'FilterMenu'\n"]}
{"version":3,"file":"unified-control-panel.js","sourceRoot":"/","sources":["other-repos/demo-repo/src/components/ui/prod/base/control-panel/unified-control-panel.tsx"],"names":[],"mappings":"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","sourcesContent":["// =============================================================================\n// Unified Control Panel\n// =============================================================================\n// Optimized control panel with:\n// - Minimize/expand functionality\n// - React Aria Tabs for proper tab panel routing\n// - Cleaner structure and API\n// - Preset management and copy functionality\n// =============================================================================\n\n'use client'\n\nimport { useCallback } from 'react'\nimport { cx } from '@/components/utils/cx'\nimport { Tabs as AriaTabs, TabList, Tab, TabPanel } from 'react-aria-components'\n\nimport { PanelProvider, usePanelContext } from './context'\nimport { ActiveSectionContent } from './components/section-renderer'\nimport { ActionBar } from './components/action-bar'\nimport { MinimizedHeader } from './components/minimized-header'\nimport { ScrollableTabList, TabTrigger, MinimizeButton } from './components/tab-navigation'\n\nimport type { ControlChangeEvent, UnifiedControlPanelProps } from './types'\n\n// Default position values\nconst DEFAULT_POSITION = {\n  top: '90px',\n  bottom: '90px',\n  right: '16px',\n  width: '320px',\n}\n\n// -----------------------------------------------------------------------------\n// Panel Inner Component (uses context)\n// -----------------------------------------------------------------------------\n\ninterface PanelInnerProps<T> extends Omit<UnifiedControlPanelProps<T>, 'config' | 'defaultMinimized' | 'minimized' | 'onMinimizedChange'> {\n  sections: UnifiedControlPanelProps<T>['config']['sections']\n  position: typeof DEFAULT_POSITION\n  title: string\n  minimizedTitle: string\n  showReset: boolean\n  resetLabel: string\n  presetConfig?: UnifiedControlPanelProps<T>['config']['presetConfig']\n}\n\nfunction PanelInner<T>({\n  sections,\n  position,\n  title,\n  minimizedTitle,\n  showReset,\n  resetLabel,\n  presetConfig,\n  className,\n  onChange,\n  onReset,\n  onPresetChange,\n  getConfigForCopy,\n}: PanelInnerProps<T>) {\n  const { isMinimized, activeTab, setActiveTab, toggleMinimized } = usePanelContext()\n\n  // Handle control changes\n  const handleControlChange = useCallback(\n    (controlId: string, value: unknown) => {\n      // Find which section this control belongs to\n      // Support both 'groups' and legacy 'subsections' naming\n      const section = sections.find((s) => {\n        const groups = s.groups || s.subsections || []\n        return groups.some((g) => g.controls.some((c) => c.id === controlId))\n      })\n      const sectionId = section?.id || ''\n\n      const event: ControlChangeEvent = {\n        controlId,\n        sectionId,\n        value,\n      }\n      onChange(event)\n    },\n    [sections, onChange]\n  )\n\n  const hasPresets = presetConfig && presetConfig.presets.length > 0\n  const showCopyButton = presetConfig?.showCopyButton !== false && getConfigForCopy\n  const showActionBar = hasPresets || showCopyButton || (showReset && onReset)\n\n  const cssVariables: React.CSSProperties = {\n    '--panel-top': position.top,\n    '--panel-bottom': position.bottom,\n    '--panel-right': position.right,\n    '--panel-width': position.width,\n  } as React.CSSProperties\n\n  // Minimized state - show just a button\n  if (isMinimized) {\n    return (\n      <div\n        className={cx('fixed z-30', className)}\n        style={{\n          ...cssVariables,\n          top: 'var(--panel-top, 90px)',\n          right: 'var(--panel-right, 16px)',\n        }}\n      >\n        <MinimizedHeader title={minimizedTitle} />\n      </div>\n    )\n  }\n\n  const isScrollable = sections.length > 4\n\n  // Expanded state - full panel with true tab routing\n  return (\n    <div\n      className={cx(\n        'fixed z-30',\n        'flex flex-col',\n        'overflow-hidden rounded-xl shadow-xl',\n        className\n      )}\n      style={{\n        ...cssVariables,\n        top: 'var(--panel-top, 90px)',\n        bottom: 'var(--panel-bottom, 90px)',\n        right: 'var(--panel-right, 16px)',\n        width: 'var(--panel-width, 320px)',\n      }}\n    >\n      <AriaTabs\n        selectedKey={activeTab}\n        onSelectionChange={(key) => setActiveTab(key as string)}\n        className=\"flex min-h-0 flex-1 flex-col\"\n      >\n        {/* Tab Navigation - Fixed Height */}\n        <div className=\"bg-quaternary border-primary flex h-10 shrink-0 items-center rounded-t-xl border px-1\">\n          <ScrollableTabList activeTabId={activeTab} isScrollable={isScrollable}>\n            <TabList aria-label=\"Control sections\" className=\"flex items-center gap-0.5\">\n              {sections.map((section) => (\n                <Tab\n                  key={section.id}\n                  id={section.id}\n                  data-key={section.id}\n                  className=\"group cursor-pointer outline-none\"\n                >\n                  {({ isSelected }) => (\n                    <TabTrigger\n                      label={section.label || section.tabLabel || section.title}\n                      isSelected={isSelected}\n                      isScrollable={isScrollable}\n                    />\n                  )}\n                </Tab>\n              ))}\n            </TabList>\n          </ScrollableTabList>\n\n          {/* Minimize button */}\n          <MinimizeButton onClick={toggleMinimized} />\n        </div>\n\n        {/* Tab Panels - Only active section rendered */}\n        {sections.map((section) => (\n          <TabPanel\n            key={section.id}\n            id={section.id}\n            className=\"bg-tertiary border-primary min-h-0 flex-1 overscroll-contain border-x scrollbar-overlay focus:outline-none\"\n          >\n            <div className=\"pt-2 pb-2.5 pl-2.5 pr-0\">\n              <ActiveSectionContent\n                section={section}\n                onChange={handleControlChange}\n              />\n            </div>\n          </TabPanel>\n        ))}\n      </AriaTabs>\n\n      {/* Action Bar */}\n      {showActionBar && (\n        <ActionBar\n          presetConfig={presetConfig}\n          showReset={showReset}\n          resetLabel={resetLabel}\n          onReset={onReset}\n          onPresetChange={onPresetChange}\n          getConfigForCopy={getConfigForCopy}\n        />\n      )}\n    </div>\n  )\n}\n\n// -----------------------------------------------------------------------------\n// Main Component\n// -----------------------------------------------------------------------------\n\nexport function UnifiedControlPanel<T>({\n  config,\n  onChange,\n  onReset,\n  onPresetChange,\n  getConfigForCopy,\n  className,\n  defaultMinimized = false,\n  minimized,\n  onMinimizedChange,\n}: UnifiedControlPanelProps<T>) {\n  const {\n    sections,\n    defaultActiveTab,\n    position,\n    title = 'Controls',\n    minimizedTitle = 'Controls',\n    showReset = true,\n    resetLabel = 'Reset',\n    presetConfig,\n  } = config\n\n  if (!sections || sections.length === 0) {\n    console.warn('UnifiedControlPanel: No sections provided')\n    return null\n  }\n\n  const pos = { ...DEFAULT_POSITION, ...position }\n  const initialTab = defaultActiveTab || sections[0]?.id || ''\n\n  return (\n    <PanelProvider\n      defaultActiveTab={initialTab}\n      defaultMinimized={defaultMinimized}\n      minimized={minimized}\n      onMinimizedChange={onMinimizedChange}\n    >\n      <PanelInner\n        sections={sections}\n        position={pos}\n        title={title}\n        minimizedTitle={minimizedTitle}\n        showReset={showReset}\n        resetLabel={resetLabel}\n        presetConfig={presetConfig}\n        className={className}\n        onChange={onChange}\n        onReset={onReset}\n        onPresetChange={onPresetChange}\n        getConfigForCopy={getConfigForCopy}\n      />\n    </PanelProvider>\n  )\n}\n"]}
{"version":3,"file":"use-table-configuration.js","sourceRoot":"/","sources":["other-repos/demo-repo/src/components/ui/prod/data/sticky-data-table/hooks/config/use-table-configuration.ts"],"names":[],"mappings":"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","sourcesContent":["'use client'\n\n/**\n * StickyDataTable V2 - useTableConfiguration Hook\n *\n * Unified hook for managing table configuration state.\n * Supports localStorage persistence for experimentation and development.\n *\n * @module hooks/use-table-configuration\n *\n * @example\n * ```tsx\n * // Basic usage with localStorage persistence\n * const { config, updateConfig, toTableProps } = useTableConfiguration({\n *   storageKey: 'my-table-config',\n * })\n *\n * <StickyDataTable {...toTableProps()} />\n *\n * // Toggle sticky toolbar\n * updateConfig({ toolbar: { position: 'integrated' } })\n * ```\n */\n\nimport { useState, useCallback, useEffect, useMemo } from 'react'\n\nimport {\n  DEFAULT_TABLE_CONFIGURATION,\n  createTableConfiguration,\n  tableConfigToProps,\n  deepMerge,\n} from '../../config'\n\nimport type {\n  TableConfiguration,\n  TableConfigurationOverrides,\n  TableConfigurationProps,\n  UseTableConfigurationOptions,\n  UseTableConfigurationReturn,\n} from '../../types'\n\n// ============================================================================\n// STORAGE UTILITIES\n// ============================================================================\n\n/**\n * Safely read from localStorage\n */\nfunction readFromStorage(key: string): TableConfigurationOverrides | null {\n  if (typeof window === 'undefined') return null\n\n  try {\n    const stored = localStorage.getItem(key)\n    if (!stored) return null\n    return JSON.parse(stored) as TableConfigurationOverrides\n  } catch (error) {\n    console.warn(`[useTableConfiguration] Failed to read from localStorage: ${key}`, error)\n    return null\n  }\n}\n\n/**\n * Safely write to localStorage\n */\nfunction writeToStorage(key: string, config: TableConfigurationOverrides): void {\n  if (typeof window === 'undefined') return\n\n  try {\n    localStorage.setItem(key, JSON.stringify(config))\n  } catch (error) {\n    console.warn(`[useTableConfiguration] Failed to write to localStorage: ${key}`, error)\n  }\n}\n\n/**\n * Clear from localStorage\n */\nfunction clearFromStorage(key: string): void {\n  if (typeof window === 'undefined') return\n\n  try {\n    localStorage.removeItem(key)\n  } catch (error) {\n    console.warn(`[useTableConfiguration] Failed to clear localStorage: ${key}`, error)\n  }\n}\n\n// ============================================================================\n// COMPARISON UTILITY\n// ============================================================================\n\n/**\n * Deep equality check for configurations\n */\nfunction isConfigEqual(a: TableConfiguration, b: TableConfiguration): boolean {\n  return JSON.stringify(a) === JSON.stringify(b)\n}\n\n// ============================================================================\n// HOOK IMPLEMENTATION\n// ============================================================================\n\n/**\n * useTableConfiguration - Unified table configuration hook\n *\n * Provides a single source of truth for all table styling with:\n * - Type-safe configuration updates\n * - Optional localStorage persistence\n * - Easy reset to defaults\n * - Direct conversion to StickyDataTable props\n *\n * @param options - Configuration options\n * @returns Configuration state and utilities\n *\n * @example\n * ```tsx\n * function MyTable() {\n *   const {\n *     config,\n *     updateConfig,\n *     resetConfig,\n *     isDirty,\n *     toTableProps,\n *   } = useTableConfiguration({\n *     storageKey: 'my-table-config',\n *     defaults: {\n *       toolbar: { position: 'integrated' },\n *     },\n *   })\n *\n *   return (\n *     <>\n *       <StickyDataTable {...toTableProps()} />\n *\n *       {isDirty && (\n *         <button onClick={resetConfig}>Reset to defaults</button>\n *       )}\n *     </>\n *   )\n * }\n * ```\n */\nexport function useTableConfiguration(\n  options: UseTableConfigurationOptions = {}\n): UseTableConfigurationReturn {\n  const {\n    storageKey,\n    defaults,\n    persist = !!storageKey,\n  } = options\n\n  // Compute base configuration from defaults\n  const baseConfig = useMemo(() => {\n    return createTableConfiguration(defaults)\n  }, [defaults])\n\n  // Track if we've hydrated (loaded from localStorage)\n  const [isHydrated, setIsHydrated] = useState(false)\n\n  // Always initialize with baseConfig to avoid hydration mismatch\n  // localStorage values are loaded in useEffect after mount\n  const [config, setConfig] = useState<TableConfiguration>(baseConfig)\n\n  // Load from localStorage AFTER hydration to avoid mismatch\n  useEffect(() => {\n    if (!storageKey || isHydrated) return\n\n    const stored = readFromStorage(storageKey)\n    if (stored) {\n      setConfig(deepMerge({ ...baseConfig }, stored))\n    }\n    setIsHydrated(true)\n  }, [storageKey, baseConfig, isHydrated])\n\n  // Track if config has been modified from defaults\n  const isDirty = useMemo(() => {\n    return !isConfigEqual(config, baseConfig)\n  }, [config, baseConfig])\n\n  // Sync with localStorage when config changes (only after hydration)\n  useEffect(() => {\n    if (!storageKey || !persist || !isHydrated) return\n\n    if (isDirty) {\n      // Calculate delta from base config to store only overrides\n      const overrides = calculateOverrides(baseConfig, config)\n      writeToStorage(storageKey, overrides)\n    } else {\n      // Config matches base, clear storage\n      clearFromStorage(storageKey)\n    }\n  }, [config, baseConfig, storageKey, persist, isDirty, isHydrated])\n\n  // Update configuration with partial overrides\n  const updateConfig = useCallback((overrides: TableConfigurationOverrides) => {\n    setConfig((prev) => deepMerge({ ...prev }, overrides))\n  }, [])\n\n  // Reset to base configuration\n  const resetConfig = useCallback(() => {\n    setConfig(baseConfig)\n    if (storageKey) {\n      clearFromStorage(storageKey)\n    }\n  }, [baseConfig, storageKey])\n\n  // Convert to StickyDataTable props\n  const toTableProps = useCallback((): TableConfigurationProps => {\n    return tableConfigToProps(config)\n  }, [config])\n\n  return {\n    config,\n    updateConfig,\n    resetConfig,\n    isDirty,\n    toTableProps,\n  }\n}\n\n// ============================================================================\n// HELPERS\n// ============================================================================\n\n/**\n * Calculate the minimal overrides between base and current config\n * This ensures we only store what's different, not the entire config\n */\nfunction calculateOverrides(\n  base: TableConfiguration,\n  current: TableConfiguration\n): TableConfigurationOverrides {\n  const overrides: TableConfigurationOverrides = {}\n\n  // Dimensions\n  if (current.dimensions.rowHeight !== base.dimensions.rowHeight) {\n    overrides.dimensions = { ...overrides.dimensions, rowHeight: current.dimensions.rowHeight }\n  }\n  if (current.dimensions.headerHeight !== base.dimensions.headerHeight) {\n    overrides.dimensions = { ...overrides.dimensions, headerHeight: current.dimensions.headerHeight }\n  }\n  if (current.dimensions.borderRadius !== base.dimensions.borderRadius) {\n    overrides.dimensions = { ...overrides.dimensions, borderRadius: current.dimensions.borderRadius }\n  }\n  if (current.dimensions.headerGap !== base.dimensions.headerGap) {\n    overrides.dimensions = { ...overrides.dimensions, headerGap: current.dimensions.headerGap }\n  }\n\n  // Border - compare each property (including optional side-specific colors)\n  const allBorderKeys = new Set([\n    ...Object.keys(base.border),\n    ...Object.keys(current.border),\n  ]) as Set<keyof typeof base.border>\n  for (const key of allBorderKeys) {\n    const baseValue = base.border[key]\n    const currentValue = current.border[key]\n    if (JSON.stringify(currentValue) !== JSON.stringify(baseValue)) {\n      if (!overrides.border) overrides.border = {}\n      ;(overrides.border as Record<string, unknown>)[key] = currentValue\n    }\n  }\n\n  // Background - compare each property\n  const bgKeys = Object.keys(base.background) as Array<keyof typeof base.background>\n  for (const key of bgKeys) {\n    if (current.background[key] !== base.background[key]) {\n      if (!overrides.background) overrides.background = {}\n      ;(overrides.background as Record<string, unknown>)[key] = current.background[key]\n    }\n  }\n\n  // Toolbar\n  if (current.toolbar.position !== base.toolbar.position) {\n    overrides.toolbar = { ...overrides.toolbar, position: current.toolbar.position }\n  }\n  if (current.toolbar.countPosition !== base.toolbar.countPosition) {\n    overrides.toolbar = { ...overrides.toolbar, countPosition: current.toolbar.countPosition }\n  }\n  if (current.toolbar.countStackPosition !== base.toolbar.countStackPosition) {\n    overrides.toolbar = { ...overrides.toolbar, countStackPosition: current.toolbar.countStackPosition }\n  }\n  if (current.toolbar.bottomMargin !== base.toolbar.bottomMargin) {\n    overrides.toolbar = { ...overrides.toolbar, bottomMargin: current.toolbar.bottomMargin }\n  }\n  if (current.toolbar.countGap !== base.toolbar.countGap) {\n    overrides.toolbar = { ...overrides.toolbar, countGap: current.toolbar.countGap }\n  }\n  if (current.toolbar.integratedHeight !== base.toolbar.integratedHeight) {\n    overrides.toolbar = { ...overrides.toolbar, integratedHeight: current.toolbar.integratedHeight }\n  }\n  if (current.toolbar.debug !== base.toolbar.debug) {\n    overrides.toolbar = { ...overrides.toolbar, debug: current.toolbar.debug }\n  }\n  if (current.toolbar.countPaddingLeft !== base.toolbar.countPaddingLeft) {\n    overrides.toolbar = { ...overrides.toolbar, countPaddingLeft: current.toolbar.countPaddingLeft }\n  }\n  if (current.toolbar.countPaddingRight !== base.toolbar.countPaddingRight) {\n    overrides.toolbar = { ...overrides.toolbar, countPaddingRight: current.toolbar.countPaddingRight }\n  }\n\n  // Integrated padding\n  const padBase = base.toolbar.integratedPadding\n  const padCurrent = current.toolbar.integratedPadding\n  if (JSON.stringify(padCurrent) !== JSON.stringify(padBase)) {\n    overrides.toolbar = {\n      ...overrides.toolbar,\n      integratedPadding: { ...padCurrent },\n    }\n  }\n\n  // Features\n  if (current.features.enableSelection !== base.features.enableSelection) {\n    overrides.features = { ...overrides.features, enableSelection: current.features.enableSelection }\n  }\n  if (current.features.showColumnControl !== base.features.showColumnControl) {\n    overrides.features = { ...overrides.features, showColumnControl: current.features.showColumnControl }\n  }\n  if (current.features.showCount !== base.features.showCount) {\n    overrides.features = { ...overrides.features, showCount: current.features.showCount }\n  }\n  if (current.features.showExport !== base.features.showExport) {\n    overrides.features = { ...overrides.features, showExport: current.features.showExport }\n  }\n\n  return overrides\n}\n\nexport type { UseTableConfigurationOptions, UseTableConfigurationReturn }\n"]}
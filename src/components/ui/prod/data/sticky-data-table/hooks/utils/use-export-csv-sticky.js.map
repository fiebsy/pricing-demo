{"version":3,"file":"use-export-csv-sticky.js","sourceRoot":"/","sources":["other-repos/demo-repo/src/components/ui/prod/data/sticky-data-table/hooks/utils/use-export-csv-sticky.ts"],"names":[],"mappings":";;;AAAA,iDAA+D;AAC/D,mCAA8B;AAc9B;;GAEG;AACI,MAAM,kBAAkB,GAAG,CAAQ,EACxC,IAAI,EACJ,cAAc,EACd,QAAQ,EACR,QAAQ,EACR,kBAAkB,GACe,EAAE,EAAE;IACrC,MAAM,SAAS,GAAG,IAAA,wBAAQ,EAAC;QACzB,cAAc,EAAE,GAAG;QACnB,QAAQ,EAAE,QAAQ;QAClB,gBAAgB,EAAE,GAAG;QACrB,gBAAgB,EAAE,IAAI;KACvB,CAAC,CAAA;IAEF,MAAM,aAAa,GAAG,CAAC,IAAW,EAAqB,EAAE,CACvD,kBAAkB,CAAC,CAAC,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAE,IAAqC,CAAA;IAExF,MAAM,UAAU,GAAG,KAAK,EAAE,KAAc,EAAiB,EAAE;QACzD,IAAI,CAAC;YACH,IAAI,KAAK,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;gBACvB,cAAK,CAAC,KAAK,CAAC,mBAAmB,CAAC,CAAA;gBAChC,OAAM;YACR,CAAC;YAED,MAAM,OAAO,GAAG,KAAK,CAAC,GAAG,CAAC,aAAa,CAAC,CAAA;YACxC,MAAM,GAAG,GAAG,IAAA,2BAAW,EAAC,SAAS,CAAC,CAAC,OAAO,CAAC,CAAA;YAC3C,IAAA,wBAAQ,EAAC,SAAS,CAAC,CAAC,GAAG,CAAC,CAAA;YACxB,cAAK,CAAC,OAAO,CAAC,GAAG,KAAK,CAAC,MAAM,OAAO,KAAK,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,yBAAyB,CAAC,CAAA;QAC7F,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,OAAO,CAAC,KAAK,CAAC,wBAAwB,EAAE,KAAK,CAAC,CAAA;YAC9C,cAAK,CAAC,KAAK,CAAC,wBAAwB,CAAC,CAAA;YACrC,MAAM,IAAI,KAAK,CAAC,eAAe,CAAC,CAAA;QAClC,CAAC;IACH,CAAC,CAAA;IAED,MAAM,SAAS,GAAG,KAAK,IAAI,EAAE;QAC3B,IAAI,CAAC;YACH,MAAM,UAAU,CAAC,IAAI,CAAC,CAAA;QACxB,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,iCAAiC;QACnC,CAAC;IACH,CAAC,CAAA;IAED,MAAM,cAAc,GAAG,KAAK,IAAI,EAAE;QAChC,IAAI,CAAC;YACH,IAAI,CAAC,cAAc,IAAI,cAAc,CAAC,WAAW,CAAC,IAAI,KAAK,CAAC,EAAE,CAAC;gBAC7D,cAAK,CAAC,KAAK,CAAC,kBAAkB,CAAC,CAAA;gBAC/B,OAAM;YACR,CAAC;YAED,MAAM,aAAa,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,KAAK,EAAE,EAAE;gBAC/C,MAAM,KAAK,GAAG,QAAQ,CAAC,CAAC,CAAC,QAAQ,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAA;gBACrD,OAAO,cAAc,CAAC,WAAW,CAAC,GAAG,CAAC,KAAK,CAAC,CAAA;YAC9C,CAAC,CAAC,CAAA;YAEF,MAAM,UAAU,CAAC,aAAa,CAAC,CAAA;QACjC,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,iCAAiC;QACnC,CAAC;IACH,CAAC,CAAA;IAED,OAAO,EAAE,SAAS,EAAE,cAAc,EAAE,CAAA;AACtC,CAAC,CAAA;AA9DY,QAAA,kBAAkB,sBA8D9B","sourcesContent":["import { download, generateCsv, mkConfig } from 'export-to-csv'\nimport { toast } from 'sonner'\nimport type { SelectionState } from '../../types'\n\ntype CsvCompatibleType = string | number | boolean\nexport type CsvExportableData = Record<string, CsvCompatibleType>\n\ntype UseExportCsvStickyOptions<TData> = {\n  data: TData[]\n  selectionState: SelectionState | null\n  fileName: string\n  getRowId?: (row: TData, index: number) => string | number\n  customizeCsvOutput?: (data: TData) => CsvExportableData\n}\n\n/**\n * Export hook for StickyDataTable that works with SelectionState instead of TanStack Table\n */\nexport const useExportCsvSticky = <TData>({\n  data,\n  selectionState,\n  fileName,\n  getRowId,\n  customizeCsvOutput,\n}: UseExportCsvStickyOptions<TData>) => {\n  const csvConfig = mkConfig({\n    fieldSeparator: ',',\n    filename: fileName,\n    decimalSeparator: '.',\n    useKeysAsHeaders: true,\n  })\n\n  const mapDataForCsv = (item: TData): CsvExportableData =>\n    customizeCsvOutput ? customizeCsvOutput(item) : (item as unknown as CsvExportableData)\n\n  const exportData = async (items: TData[]): Promise<void> => {\n    try {\n      if (items.length === 0) {\n        toast.error('No data to export')\n        return\n      }\n\n      const csvData = items.map(mapDataForCsv)\n      const csv = generateCsv(csvConfig)(csvData)\n      download(csvConfig)(csv)\n      toast.success(`${items.length} row${items.length === 1 ? '' : 's'} exported successfully!`)\n    } catch (error) {\n      console.error('Failed to export data:', error)\n      toast.error(`Failed to export data.`)\n      throw new Error('Export failed')\n    }\n  }\n\n  const exportAll = async () => {\n    try {\n      await exportData(data)\n    } catch (error) {\n      // Error is handled in exportData\n    }\n  }\n\n  const exportSelected = async () => {\n    try {\n      if (!selectionState || selectionState.selectedIds.size === 0) {\n        toast.error('No rows selected')\n        return\n      }\n\n      const selectedItems = data.filter((row, index) => {\n        const rowId = getRowId ? getRowId(row, index) : index\n        return selectionState.selectedIds.has(rowId)\n      })\n\n      await exportData(selectedItems)\n    } catch (error) {\n      // Error is handled in exportData\n    }\n  }\n\n  return { exportAll, exportSelected }\n}\n\n\n\n\n\n\n\n\n\n\n\n"]}
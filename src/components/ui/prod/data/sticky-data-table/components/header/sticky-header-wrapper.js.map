{"version":3,"file":"sticky-header-wrapper.js","sourceRoot":"/","sources":["other-repos/demo-repo/src/components/ui/prod/data/sticky-data-table/components/header/sticky-header-wrapper.tsx"],"names":[],"mappings":"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","sourcesContent":["'use client'\n\n/**\n * StickyDataTable V2 - StickyHeaderWrapper Component\n *\n * Wrapper component for the sticky header section.\n * Contains header, navigation arrows, gradient overlay, and optionally an integrated toolbar.\n *\n * When toolbar is integrated:\n * - Toolbar renders above the table header within the sticky container\n * - Both toolbar and header stick together when scrolling\n * - Header gap expands to accommodate toolbar height\n *\n * @module components/sticky-header-wrapper\n */\n\nimport { memo, type RefObject, type ReactNode } from 'react'\nimport { TABLE_CONFIG } from '../../config'\nimport type {\n  ComputedColumn,\n  StickyState,\n  BorderConfig,\n  BackgroundConfig,\n  ColumnChange,\n  SelectionState,\n  SortColumn,\n  SortDirection,\n  DragCloneMode,\n} from '../../types'\nimport { NavigationArrows } from '../navigation/navigation-arrows'\nimport { TableHeader } from './table-header'\nimport { DragColumnOverlay } from './drag-column-overlay'\n\ninterface StickyHeaderWrapperProps {\n  /** Header gap above sticky header */\n  headerGap?: number\n  /** Header height override */\n  headerHeight?: number\n  /** Header scroll ref */\n  headerScrollRef: RefObject<HTMLDivElement | null>\n  /** Body scroll ref (for arrow positioning) */\n  bodyScrollRef: RefObject<HTMLDivElement | null>\n  /** Sticky columns */\n  stickyColumns: ComputedColumn[]\n  /** Scrollable columns */\n  scrollableColumns: ComputedColumn[]\n  /** All columns */\n  allColumns: ComputedColumn[]\n  /** Column labels */\n  columnLabels: Record<string, string>\n  /** Sort column */\n  sortColumn: SortColumn\n  /** Sort direction */\n  sortDirection: SortDirection\n  /** Sort handler */\n  onSort: (columnKey: string) => void\n  /** Sticky state */\n  stickyState: StickyState\n  /** Show scroll indicator */\n  showScrollIndicator: boolean\n  /** Scroll left handler */\n  onScrollLeft: () => void\n  /** Scroll right handler */\n  onScrollRight: () => void\n  /** Border radius */\n  borderRadius: number\n  /** Border config */\n  borderConfig: BorderConfig\n  /** Background config */\n  backgroundConfig: BackgroundConfig\n  /** Column change for animation */\n  columnChange: ColumnChange | null\n  /** Leaving column keys */\n  leavingColumnKeys: Set<string>\n  /** Leaving columns with position data */\n  leavingColumns: ComputedColumn[]\n  /** Entering column keys */\n  enteringColumnKeys: Set<string>\n  /** Total sticky width */\n  totalStickyWidth: number\n  /** Arrow position override */\n  arrowPreferredTopOffset?: number\n  /** Selection state */\n  selectionState: SelectionState | null\n  // ---- Integrated Toolbar (Experimental) ----\n  /** Toolbar content to render in the sticky area above the table header */\n  integratedToolbar?: ReactNode\n  /** Padding configuration for the integrated toolbar */\n  integratedToolbarPadding?: {\n    top?: number\n    bottom?: number\n    left?: number\n    right?: number\n  }\n  /** Height of the integrated toolbar row (px) */\n  integratedToolbarHeight?: number\n  // ---- Column Reordering ----\n  /** Enable column reordering via drag-and-drop */\n  enableColumnReorder?: boolean\n  /** Callback when columns are reordered (passes column keys for correct ordering with hidden columns) */\n  onReorderColumns?: (fromKey: string, toKey: string, insertAtEnd?: boolean) => void\n  /** Whether column configuration has completed hydration (suppresses animation during hydration) */\n  isColumnConfigHydrated?: boolean\n  /** Ref to track the last dropped column key for FLIP animation exclusion */\n  lastDroppedKeyRef?: React.MutableRefObject<string | null>\n  /** Drag clone mode: 'floating' or 'inline' */\n  dragCloneMode?: DragCloneMode\n  // ---- Drag State (lifted from useHeaderDrag) ----\n  /** Drag state from parent */\n  dragState?: {\n    isDragging: boolean\n    draggedKey: string | null\n    dragOverKey: string | null\n    dropSide: 'left' | 'right' | null\n    pointerX: number\n    pointerY: number\n    dragWidth: number\n    dragHeight: number\n    dragLabel: string\n    dragAlign: 'left' | 'center' | 'right'\n  }\n  /** Column rects ref for hit testing */\n  columnRectsRef?: React.RefObject<Map<string, DOMRect>>\n  /** Ref tracking the X position where drag started (for overlay positioning) */\n  dragStartXRef?: React.RefObject<number>\n  /** Check if column is draggable */\n  isColumnDraggable?: (column: ComputedColumn) => boolean\n  /** Pointer down handler for drag */\n  handlePointerDown?: (e: React.PointerEvent, columnKey: string, label: string) => void\n  /** Pointer move handler for drag */\n  handlePointerMove?: (e: React.PointerEvent) => void\n  /** Pointer up handler for drag */\n  handlePointerUp?: (e: React.PointerEvent) => void\n  /** Pointer cancel handler for drag */\n  handlePointerCancel?: () => void\n  /** Get shift direction for a column */\n  getShiftDirection?: (columnKey: string, colIndex: number) => 'left' | 'right' | null\n  /** Get inline offset for dragged column */\n  getInlineOffset?: (columnKey: string) => number | null\n  /** Get shift amount in pixels */\n  getShiftAmount?: () => number\n  /** Current clone mode */\n  cloneMode?: DragCloneMode\n  /** Whether in inline drag mode */\n  isInlineDragMode?: boolean\n  // ---- Gradient Background ----\n  /** CSS variable or color for gradient overlays (auto-detected from page background) */\n  gradientBackgroundColor?: string\n  // ---- Arrow Visibility ----\n  /** Hide navigation arrows (e.g., during empty state) */\n  hideArrows?: boolean\n}\n\n/**\n * Sticky header wrapper\n *\n * Features:\n * - Sticky positioning with gap\n * - Navigation arrows\n * - Gradient scroll indicator\n * - Shadow line indicator\n */\nconst StickyHeaderWrapperBase = ({\n  headerGap = TABLE_CONFIG.HEADER_GAP,\n  headerHeight = TABLE_CONFIG.HEADER_HEIGHT,\n  headerScrollRef,\n  bodyScrollRef,\n  stickyColumns,\n  scrollableColumns,\n  allColumns,\n  columnLabels,\n  sortColumn,\n  sortDirection,\n  onSort,\n  stickyState,\n  showScrollIndicator,\n  onScrollLeft,\n  onScrollRight,\n  borderRadius,\n  borderConfig,\n  backgroundConfig,\n  columnChange,\n  leavingColumnKeys,\n  leavingColumns,\n  enteringColumnKeys,\n  totalStickyWidth,\n  arrowPreferredTopOffset,\n  selectionState,\n  integratedToolbar,\n  integratedToolbarPadding,\n  integratedToolbarHeight,\n  enableColumnReorder,\n  onReorderColumns,\n  isColumnConfigHydrated = true,\n  lastDroppedKeyRef,\n  dragCloneMode = 'floating',\n  // Drag state from parent (lifted useHeaderDrag)\n  dragState,\n  columnRectsRef,\n  dragStartXRef,\n  isColumnDraggable,\n  handlePointerDown,\n  handlePointerMove,\n  handlePointerUp,\n  handlePointerCancel,\n  getShiftDirection,\n  getInlineOffset,\n  getShiftAmount,\n  cloneMode,\n  isInlineDragMode,\n  gradientBackgroundColor = 'var(--background-color-secondary_alt)',\n  hideArrows = false,\n}: StickyHeaderWrapperProps) => {\n  // Calculate effective padding for integrated toolbar\n  const toolbarPadding = {\n    top: integratedToolbarPadding?.top ?? TABLE_CONFIG.INTEGRATED_TOOLBAR_TOP_PADDING,\n    bottom: integratedToolbarPadding?.bottom ?? TABLE_CONFIG.INTEGRATED_TOOLBAR_TO_HEADER_GAP,\n    left: integratedToolbarPadding?.left ?? 0,\n    right: integratedToolbarPadding?.right ?? 0,\n  }\n  const toolbarHeight = integratedToolbarHeight ?? TABLE_CONFIG.INTEGRATED_TOOLBAR_HEIGHT\n\n  return (\n    <div\n      className={`sticky z-30 flex flex-col ${backgroundConfig.headerWrapper}`}\n      style={{\n        top: `${headerGap}px`,\n        width: '100%',\n      }}\n    >\n      {/* Background filler above header (and toolbar if integrated) */}\n      <div\n        className={backgroundConfig.headerWrapper}\n        style={{\n          height: `${headerGap}px`,\n          position: 'absolute',\n          top: `-${headerGap}px`,\n          left: 0,\n          right: 0,\n          pointerEvents: 'none',\n        }}\n      />\n\n      {/* Integrated Toolbar (Experimental) - Renders above table header in sticky area */}\n      {integratedToolbar && (\n        <div\n          className=\"flex items-center justify-end\"\n          style={{\n            minHeight: toolbarHeight,\n            paddingTop: toolbarPadding.top,\n            paddingBottom: toolbarPadding.bottom,\n            paddingLeft: toolbarPadding.left,\n            paddingRight: toolbarPadding.right,\n            // Debug: uncomment to visualize toolbar bounds\n            // backgroundColor: 'rgba(59, 130, 246, 0.1)',\n            // border: '1px dashed rgba(59, 130, 246, 0.5)',\n          }}\n        >\n          {integratedToolbar}\n        </div>\n      )}\n\n      {/* Navigation arrows - hidden during empty state */}\n      {!hideArrows && (\n        <NavigationArrows\n          showLeftArrow={stickyState.showLeftArrow}\n          showRightArrow={stickyState.showRightArrow}\n          onScrollLeft={onScrollLeft}\n          onScrollRight={onScrollRight}\n          bodyScrollRef={bodyScrollRef}\n          headerGap={headerGap}\n          totalStickyWidth={totalStickyWidth}\n          preferredTopOffset={arrowPreferredTopOffset}\n        />\n      )}\n\n      {/* Shadow line indicator (hidden by default) */}\n      <div\n        className=\"pointer-events-none absolute z-[1] w-[1px]\"\n        style={{\n          top: 0,\n          left: `${totalStickyWidth}px`,\n          height: '100%',\n          background: 'linear-gradient(to bottom, transparent, rgba(0,0,0,0.1), transparent)',\n          opacity: 0,\n        }}\n      />\n\n      {/* Table header - gradient is now rendered INSIDE the header using clip-path for proper clipping */}\n      <TableHeader\n        headerScrollRef={headerScrollRef}\n        headerHeight={headerHeight}\n        stickyColumns={stickyColumns}\n        scrollableColumns={scrollableColumns}\n        allColumns={allColumns}\n        columnLabels={columnLabels}\n        stickyState={stickyState}\n        borderConfig={borderConfig}\n        backgroundConfig={backgroundConfig}\n        borderRadius={borderRadius}\n        sortColumn={sortColumn}\n        sortDirection={sortDirection}\n        onSort={onSort}\n        columnChange={columnChange}\n        leavingColumnKeys={leavingColumnKeys}\n        leavingColumns={leavingColumns}\n        enteringColumnKeys={enteringColumnKeys}\n        selectionState={selectionState}\n        enableColumnReorder={enableColumnReorder}\n        onReorderColumns={onReorderColumns}\n        isColumnConfigHydrated={isColumnConfigHydrated}\n        lastDroppedKeyRef={lastDroppedKeyRef}\n        dragCloneMode={dragCloneMode}\n        // Drag state from parent (lifted useHeaderDrag)\n        dragState={dragState}\n        columnRectsRef={columnRectsRef}\n        isColumnDraggable={isColumnDraggable}\n        handlePointerDown={handlePointerDown}\n        handlePointerMove={handlePointerMove}\n        handlePointerUp={handlePointerUp}\n        handlePointerCancel={handlePointerCancel}\n        getShiftDirection={getShiftDirection}\n        getInlineOffset={getInlineOffset}\n        getShiftAmount={getShiftAmount}\n        cloneMode={cloneMode}\n        isInlineDragMode={isInlineDragMode}\n        // Gradient is now inside header, clipped by clip-path to match border-radius\n        showScrollIndicator={showScrollIndicator}\n        gradientBackgroundColor={gradientBackgroundColor}\n      />\n\n      {/* Column drag overlay - renders via portal for unified column styling */}\n      {isInlineDragMode && dragState && columnRectsRef && dragStartXRef && (\n        <DragColumnOverlay\n          dragState={dragState}\n          columnRectsRef={columnRectsRef}\n          dragStartXRef={dragStartXRef}\n          bodyScrollRef={bodyScrollRef}\n          borderRadius={borderRadius}\n        />\n      )}\n    </div>\n  )\n}\n\nexport const StickyHeaderWrapper = memo(StickyHeaderWrapperBase)\nStickyHeaderWrapper.displayName = 'StickyHeaderWrapper'\n\n\n"]}
{"version":3,"file":"drag-column-overlay.js","sourceRoot":"/","sources":["other-repos/demo-repo/src/components/ui/prod/data/sticky-data-table/components/header/drag-column-overlay.tsx"],"names":[],"mappings":";AAAA,YAAY,CAAA;;;AAEZ;;;;;;;;;;;GAWG;AAEH,iCAA4C;AAgB5C;;;;;;;;;;;GAWG;AACH,MAAM,qBAAqB,GAAG,CAAC,EAC7B,SAAS,EACT,cAAc,EACd,aAAa,EACb,aAAa,EACb,YAAY,GAAG,CAAC,GACO,EAAE,EAAE;IAC3B,iDAAiD;IACjD,IAAI,CAAC,SAAS,CAAC,UAAU,IAAI,CAAC,SAAS,CAAC,UAAU;QAAE,OAAO,IAAI,CAAA;IAE/D,yCAAyC;IACzC,MAAM,UAAU,GAAG,cAAc,CAAC,OAAO,EAAE,GAAG,CAAC,SAAS,CAAC,UAAU,CAAC,CAAA;IACpE,IAAI,CAAC,UAAU;QAAE,OAAO,IAAI,CAAA;IAE5B,iDAAiD;IACjD,MAAM,QAAQ,GAAG,aAAa,CAAC,OAAO,EAAE,qBAAqB,EAAE,CAAA;IAC/D,IAAI,CAAC,QAAQ;QAAE,OAAO,IAAI,CAAA;IAE1B,yCAAyC;IACzC,MAAM,YAAY,GAAG,SAAS,CAAC,QAAQ,GAAG,CAAC,aAAa,CAAC,OAAO,IAAI,CAAC,CAAC,CAAA;IAEtE,6BAA6B;IAC7B,6CAA6C;IAC7C,MAAM,IAAI,GAAG,UAAU,CAAC,IAAI,GAAG,YAAY,CAAA;IAC3C,MAAM,GAAG,GAAG,UAAU,CAAC,GAAG,CAAA;IAC1B,MAAM,KAAK,GAAG,UAAU,CAAC,KAAK,CAAA;IAC9B,8CAA8C;IAC9C,MAAM,MAAM,GAAG,QAAQ,CAAC,MAAM,GAAG,UAAU,CAAC,GAAG,CAAA;IAE/C,OAAO,CACL,CAAC,GAAG,CACF,SAAS,CAAC,iEAAiE,CAC3E,KAAK,CAAC,CAAC;YACL,IAAI;YACJ,GAAG;YACH,KAAK;YACL,MAAM;YACN,oDAAoD;YACpD,SAAS,EAAE,kCAAkC;YAC7C,YAAY,EAAE,GAAG,YAAY,IAAI;SAClC,CAAC,CACF,WAAW,CAAC,MAAM,EAClB,CACH,CAAA;AACH,CAAC,CAAA;AAEY,QAAA,iBAAiB,GAAG,IAAA,YAAI,EAAC,qBAAqB,CAAC,CAAA;AAC5D,yBAAiB,CAAC,WAAW,GAAG,mBAAmB,CAAA","sourcesContent":["'use client'\n\n/**\n * StickyDataTable V2 - DragColumnOverlay Component\n *\n * Renders a unified overlay that spans the entire dragged column (header + body).\n * This provides a single shine/shadow effect around the whole column instead of\n * per-cell styling which creates visual breaks.\n *\n * Rendered as a fixed-position element (not a portal) to maintain proper\n * stacking context with table cells.\n *\n * @module components/header/drag-column-overlay\n */\n\nimport { memo, type RefObject } from 'react'\nimport type { PointerDragState } from './types'\n\ninterface DragColumnOverlayProps {\n  /** Current drag state */\n  dragState: PointerDragState\n  /** Ref to column DOMRects captured at drag start */\n  columnRectsRef: RefObject<Map<string, DOMRect>>\n  /** Ref to the X position where drag started */\n  dragStartXRef: RefObject<number>\n  /** Ref to the body scroll container (for calculating height) */\n  bodyScrollRef: RefObject<HTMLDivElement | null>\n  /** Border radius to match the table styling */\n  borderRadius?: number\n}\n\n/**\n * DragColumnOverlay\n *\n * A fixed-position overlay that provides unified column styling during drag.\n * Positioned over the dragged column and follows it as it moves.\n *\n * Benefits over per-cell styling:\n * - Single shine/shadow border around the entire column\n * - No visual breaks between header and body cells\n * - Can include complex effects (gradients, glows)\n * - Doesn't interfere with cell memoization\n */\nconst DragColumnOverlayBase = ({\n  dragState,\n  columnRectsRef,\n  dragStartXRef,\n  bodyScrollRef,\n  borderRadius = 8,\n}: DragColumnOverlayProps) => {\n  // Don't render if not dragging or no dragged key\n  if (!dragState.isDragging || !dragState.draggedKey) return null\n\n  // Get the dragged column's original rect\n  const columnRect = columnRectsRef.current?.get(dragState.draggedKey)\n  if (!columnRect) return null\n\n  // Get body container rect for height calculation\n  const bodyRect = bodyScrollRef.current?.getBoundingClientRect()\n  if (!bodyRect) return null\n\n  // Calculate displacement from drag start\n  const displacement = dragState.pointerX - (dragStartXRef.current ?? 0)\n\n  // Calculate overlay position\n  // The overlay follows the column as it moves\n  const left = columnRect.left + displacement\n  const top = columnRect.top\n  const width = columnRect.width\n  // Height spans from header top to body bottom\n  const height = bodyRect.bottom - columnRect.top\n\n  return (\n    <div\n      className=\"pointer-events-none fixed z-40 bg-quaternary/80 corner-squircle\"\n      style={{\n        left,\n        top,\n        width,\n        height,\n        // Unified column styling - shine border with shadow\n        boxShadow: 'var(--shine-3), var(--shadow-lg)',\n        borderRadius: `${borderRadius}px`,\n      }}\n      aria-hidden=\"true\"\n    />\n  )\n}\n\nexport const DragColumnOverlay = memo(DragColumnOverlayBase)\nDragColumnOverlay.displayName = 'DragColumnOverlay'\n"]}
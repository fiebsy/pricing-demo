{"version":3,"file":"filter-toolbar.js","sourceRoot":"/","sources":["other-repos/demo-repo/src/components/ui/prod/data/sticky-data-table/components/filter/filter-toolbar.tsx"],"names":[],"mappings":"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","sourcesContent":["'use client'\n\n// =============================================================================\n// Filter Toolbar V2\n// =============================================================================\n// Production-ready filter toolbar with built-in defaults.\n// Uses the unified FilterConfig from config/filter.ts\n//\n// Features:\n// - Submenu-based category â†’ value navigation\n// - Built-in sliding animations and back button\n// - Configurable menu, trigger, and pill styling\n// - Works out of the box with sensible defaults\n// =============================================================================\n\nimport * as React from 'react'\nimport { useCallback, useEffect, useMemo, useState } from 'react'\nimport { Button as AriaButton } from 'react-aria-components'\nimport { cn } from '@/lib/utils'\n\n// PROD Base UI imports (migrated from legacy-base-ui)\nimport {\n  FilterMenu,\n  FilterChip,\n  FilterTrigger,\n} from '@/components/ui/prod/base/filter'\nimport type {\n  MenuItemType,\n  MenuItemSubmenu,\n  MenuItemAction,\n  ChipConfig,\n} from '@/components/ui/prod/base/filter'\n\nimport type {\n  ActiveFilter,\n  DateFilterConfig,\n  FilterCategory,\n  FilterConfig,\n  FilterOperator,\n  FilterState,\n  RangeFilterConfig,\n  SelectFilterConfig,\n} from '../../types'\n\nimport {\n  DEFAULT_FILTER_CONFIG,\n  mergeFilterConfig,\n  toMenuAppearanceConfig,\n  type FilterToolbarConfig,\n  type FilterTriggerConfig,\n  type FilterPillConfig,\n} from '../../config'\n\n// ============================================================================\n// TYPES\n// ============================================================================\n\n/**\n * Props for FilterToolbar component\n */\nexport interface FilterToolbarProps {\n  /** Available filter categories */\n  categories: FilterCategory[]\n  /** Current filter state */\n  filterState: FilterState\n  /** Callback when a filter is added */\n  onFilterAdd: (filter: Omit<ActiveFilter, 'id'>) => void\n  /** Callback when a filter is removed */\n  onFilterRemove: (filterId: string) => void\n  /** Callback when all filters are cleared */\n  onFiltersClear: () => void\n  /**\n   * Optional configuration overrides\n   * Merges with DEFAULT_FILTER_CONFIG - only specify what you want to change\n   *\n   * @example\n   * ```tsx\n   * // Just change menu width\n   * config={{ menu: { width: 280 } }}\n   *\n   * // Use a preset\n   * config={FILTER_PRESET_COMPACT}\n   * ```\n   */\n  config?: Partial<FilterToolbarConfig>\n  /** Custom class name */\n  className?: string\n  /** Show clear all button when filters are active */\n  showClearAll?: boolean\n}\n\n// ============================================================================\n// HELPER: Convert FilterPillConfig to PROD ChipConfig\n// ============================================================================\n\n/**\n * Maps FilterPillConfig size values to PROD ChipConfig size values\n * PROD sizes: 'xs' | 'sm' | 'md' | 'lg'\n */\nfunction mapPillSizeToChipSize(size: FilterPillConfig['size']): ChipConfig['size'] {\n  const sizeMap: Record<string, ChipConfig['size']> = {\n    xs: 'xs',\n    sm: 'sm',\n    default: 'md',\n    md: 'md',\n    lg: 'lg',\n    xl: 'lg',\n  }\n  return sizeMap[size] ?? 'md'\n}\n\n/**\n * Maps FilterPillConfig rounded values to PROD ChipConfig rounded values\n * PROD rounded: 'sm' | 'md' | 'lg' | 'full'\n */\nfunction mapPillRoundedToChipRounded(rounded: FilterPillConfig['rounded']): ChipConfig['rounded'] {\n  const roundedMap: Record<string, ChipConfig['rounded']> = {\n    none: 'sm',\n    sm: 'sm',\n    default: 'md',\n    md: 'md',\n    lg: 'lg',\n    xl: 'lg',\n    full: 'full',\n  }\n  return roundedMap[rounded] ?? 'full'\n}\n\n/**\n * Convert FilterPillConfig to PROD ChipConfig\n * Includes visual styling and animation duration\n */\nfunction toChipConfig(pill: FilterPillConfig): ChipConfig {\n  return {\n    size: mapPillSizeToChipSize(pill.size),\n    rounded: mapPillRoundedToChipRounded(pill.rounded),\n    iconSize: pill.iconSize,\n    closeSize: pill.closeIconSize,\n    iconOpacity: pill.leftIconOpacity / 100, // Convert 0-100 to 0-1\n    iconValueGap: pill.iconValueGap,\n    valueCloseGap: pill.itemGap,\n    paddingLeft: pill.paddingLeft,\n    paddingRight: pill.paddingRight,\n    duration: pill.duration,\n  }\n}\n\n// ============================================================================\n// HOOK: Convert filter categories to menu items\n// ============================================================================\n\nconst useFilterMenuItems = (\n  categories: FilterCategory[],\n  onFilterAdd: (filter: Omit<ActiveFilter, 'id'>) => void\n): MenuItemType[] => {\n  return useMemo(() => {\n    return categories.map((category): MenuItemSubmenu => {\n      const config = category.config\n      let valueItems: MenuItemAction[] = []\n\n      // Convert filter options to action items based on filter type\n      switch (config.type) {\n        case 'select': {\n          const selectConfig = config as SelectFilterConfig\n          valueItems = selectConfig.options.map((option): MenuItemAction => ({\n            id: `${category.key}-${option.id}`,\n            // Include count in label if available (PROD menu doesn't support addon prop)\n            label: option.count !== undefined ? `${option.label} (${option.count})` : option.label,\n            icon: option.icon as MenuItemAction['icon'],\n            onClick: () => {\n              onFilterAdd({\n                categoryKey: category.key,\n                operator: 'equals',\n                value: option.id,\n                displayLabel: category.label,\n                displayValue: option.label,\n              })\n            },\n          }))\n          break\n        }\n\n        case 'date': {\n          const dateConfig = config as DateFilterConfig\n          valueItems = dateConfig.presets.map((preset): MenuItemAction => {\n            const days = preset.days ?? 0\n            return {\n              id: `${category.key}-${preset.id}`,\n              label: preset.label,\n              onClick: () => {\n                const filterDate = new Date()\n                if (days !== 0) {\n                  filterDate.setDate(filterDate.getDate() + days)\n                }\n                const operator: FilterOperator = days < 0 ? 'greater_than' : 'equals'\n                onFilterAdd({\n                  categoryKey: category.key,\n                  operator,\n                  value: filterDate.getTime(),\n                  displayLabel: category.label,\n                  displayValue: preset.label,\n                })\n              },\n            }\n          })\n          break\n        }\n\n        case 'range': {\n          const rangeConfig = config as RangeFilterConfig\n          if (rangeConfig.presets && rangeConfig.presets.length > 0) {\n            valueItems = rangeConfig.presets.map((preset): MenuItemAction => ({\n              id: `${category.key}-${preset.id}`,\n              label: preset.label,\n              icon: preset.icon as MenuItemAction['icon'],\n              onClick: () => {\n                onFilterAdd({\n                  categoryKey: category.key,\n                  operator: 'between',\n                  value: [preset.min, preset.max],\n                  displayLabel: category.label,\n                  displayValue: preset.label,\n                })\n              },\n            }))\n          }\n          break\n        }\n      }\n\n      return {\n        id: category.key,\n        type: 'submenu',\n        label: category.label,\n        description: category.description,\n        icon: category.icon as MenuItemSubmenu['icon'],\n        items: valueItems,\n      }\n    })\n  }, [categories, onFilterAdd])\n}\n\n// ============================================================================\n// COMPONENT: ClearAllButton (with fade-in animation)\n// ============================================================================\n\nconst EASING_EXPO_OUT = 'cubic-bezier(0.16, 1, 0.3, 1)'\n\nconst ClearAllButton: React.FC<{ onPress: () => void }> = ({ onPress }) => {\n  const [isVisible, setIsVisible] = useState(false)\n\n  useEffect(() => {\n    const frame = requestAnimationFrame(() => setIsVisible(true))\n    return () => cancelAnimationFrame(frame)\n  }, [])\n\n  return (\n    <AriaButton\n      onPress={onPress}\n      className={cn(\n        'text-sm font-medium text-tertiary hover:text-secondary transition-colors',\n        'outline-hidden focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-brand'\n      )}\n      style={{\n        opacity: isVisible ? 1 : 0,\n        transition: `opacity 200ms ${EASING_EXPO_OUT}`,\n      }}\n    >\n      Clear all\n    </AriaButton>\n  )\n}\n\n// ============================================================================\n// COMPONENT: FilterToolbar\n// ============================================================================\n\n/**\n * FilterToolbar Component\n *\n * Provides a complete filter UI for the StickyDataTable including:\n * - \"Add filter\" button using BaseUIMenu with submenu navigation\n * - Built-in sliding animations and back button from menu component\n * - Active filter pills with remove functionality\n * - Clear all filters option\n *\n * Uses DEFAULT_FILTER_CONFIG for all styling. Override via `config` prop.\n *\n * @example Basic usage (uses all defaults)\n * ```tsx\n * <FilterToolbar\n *   categories={filterCategories}\n *   filterState={filterState}\n *   onFilterAdd={addFilter}\n *   onFilterRemove={removeFilter}\n *   onFiltersClear={clearFilters}\n * />\n * ```\n *\n * @example With custom config\n * ```tsx\n * <FilterToolbar\n *   categories={filterCategories}\n *   filterState={filterState}\n *   onFilterAdd={addFilter}\n *   onFilterRemove={removeFilter}\n *   onFiltersClear={clearFilters}\n *   config={{\n *     menu: { width: 280 },\n *     pill: { shine: '2' }\n *   }}\n * />\n * ```\n *\n * @example Using a preset\n * ```tsx\n * import { FILTER_PRESET_COMPACT } from './config'\n *\n * <FilterToolbar\n *   {...props}\n *   config={FILTER_PRESET_COMPACT}\n * />\n * ```\n */\nexport const FilterToolbar: React.FC<FilterToolbarProps> = ({\n  categories,\n  filterState,\n  onFilterAdd,\n  onFilterRemove,\n  onFiltersClear,\n  config: configOverrides,\n  className,\n  showClearAll = true,\n}) => {\n  // Track menu open state for trigger button animation\n  const [isMenuOpen, setIsMenuOpen] = useState(false)\n\n  // Merge config with defaults - stable reference when configOverrides doesn't change\n  const config = useMemo(\n    () => mergeFilterConfig(DEFAULT_FILTER_CONFIG, configOverrides),\n    [configOverrides]\n  )\n\n  // Convert to menu appearance config - stable reference\n  const menuAppearance = useMemo(\n    () => toMenuAppearanceConfig(config.menu),\n    [config.menu]\n  )\n\n  // Convert to PROD chip config - stable reference\n  const chipConfig = useMemo(\n    () => toChipConfig(config.pill),\n    [config.pill]\n  )\n\n  // Stable category lookup map\n  const categoryMap = useMemo(\n    () => new Map(categories.map((c) => [c.key, c])),\n    [categories]\n  )\n\n  // Convert filter categories to menu items\n  const menuItems = useFilterMenuItems(categories, onFilterAdd)\n\n  // Memoize trigger size/rounded to prevent object recreation\n  const triggerSize = config.trigger.height >= 48 ? 'lg' : config.trigger.height >= 40 ? 'md' : 'sm'\n  const triggerRounded = config.trigger.rounded === 'full' ? 'full' : 'lg'\n\n  return (\n    <div className={cn('flex flex-wrap items-center gap-3', className)}>\n      {/* Add Filter Button */}\n      <FilterMenu\n        trigger={\n          <FilterTrigger\n            isOpen={isMenuOpen}\n            size={triggerSize}\n            rounded={triggerRounded}\n            variant=\"default\"\n          />\n        }\n        items={menuItems}\n        align=\"start\"\n        side=\"bottom\"\n        width={config.menu.width}\n        appearance={menuAppearance}\n        onOpenChange={setIsMenuOpen}\n      />\n\n      {/* Active Filter Pills - inline callbacks are fine, React handles this efficiently */}\n      {filterState.activeFilters.map((filter) => (\n        <FilterChip\n          key={filter.id}\n          icon={categoryMap.get(filter.categoryKey)?.icon}\n          value={filter.displayValue}\n          config={chipConfig}\n          onRemove={() => onFilterRemove(filter.id)}\n        />\n      ))}\n\n      {/* Clear All Button */}\n      {showClearAll && filterState.hasFilters && (\n        <ClearAllButton onPress={onFiltersClear} />\n      )}\n    </div>\n  )\n}\n\nFilterToolbar.displayName = 'FilterToolbar'\n"]}
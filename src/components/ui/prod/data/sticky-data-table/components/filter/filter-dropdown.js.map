{"version":3,"file":"filter-dropdown.js","sourceRoot":"/","sources":["other-repos/demo-repo/src/components/ui/prod/data/sticky-data-table/components/filter/filter-dropdown.tsx"],"names":[],"mappings":"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","sourcesContent":["/**\n * Filter Dropdown Component\n *\n * Uses RevealMenu from base-ui/menu to provide a nested menu interface\n * for selecting filters. Replaces the FilterToolbar popover with a more\n * elegant dropdown experience.\n *\n * @module sticky-data-table/components/filter-dropdown\n */\n\n'use client'\n\nimport * as React from 'react'\nimport { useCallback, useMemo, useState } from 'react'\nimport Add01Icon from '@hugeicons-pro/core-stroke-rounded/Add01Icon'\nimport Cancel01Icon from '@hugeicons-pro/core-stroke-rounded/Cancel01Icon'\nimport Search01Icon from '@hugeicons-pro/core-stroke-rounded/Search01Icon'\nimport { cn } from '@/lib/utils'\n\n// PROD Base UI imports (migrated from legacy-base-ui)\nimport { HugeIcon } from '@/components/ui/prod/base/icon'\nimport { Menu } from '@/components/ui/prod/base/menu'\nimport type { MenuItemType } from '@/components/ui/prod/base/menu'\n\nimport type {\n  ActiveFilter,\n  DateFilterConfig,\n  DateRangePreset,\n  FilterCategory,\n  FilterOperator,\n  FilterState,\n  FilterValue,\n  RangeFilterConfig,\n  SelectFilterConfig,\n} from '../../types'\n\n/**\n * Props for FilterDropdown component\n */\ninterface FilterDropdownProps {\n  /** Available filter categories */\n  categories: FilterCategory[]\n  /** Current filter state */\n  filterState: FilterState\n  /** Callback when a filter is added */\n  onFilterAdd: (filter: Omit<ActiveFilter, 'id'>) => void\n  /** Callback when a filter is removed */\n  onFilterRemove: (filterId: string) => void\n  /** Callback when all filters are cleared */\n  onFiltersClear: () => void\n  /** Custom class name */\n  className?: string\n  /** Show clear all button when filters are active */\n  showClearAll?: boolean\n}\n\n/**\n * Helper to check if a value is a Hugeicon array\n */\nconst isHugeIconArray = (value: unknown): boolean => {\n  return (\n    Array.isArray(value) && value.length > 0 && Array.isArray(value[0]) && typeof value[0][0] === 'string'\n  )\n}\n\n/**\n * Render an icon - handles both Hugeicon arrays and React components\n */\nconst renderIcon = (icon: unknown, size: number = 16, className?: string): React.ReactNode => {\n  if (!icon) return null\n\n  // If it's a Hugeicon array, wrap with HugeIcon component\n  if (isHugeIconArray(icon)) {\n    return <HugeIcon icon={icon} size={size} strokeWidth={1.5} className={className} />\n  }\n\n  // If it's a React component function, render it\n  if (typeof icon === 'function') {\n    const IconComponent = icon as React.FC<{ className?: string }>\n    return <IconComponent className={className} />\n  }\n\n  return null\n}\n\n/**\n * Active Filter Pill Component\n * Displays an active filter with remove button\n */\nconst FilterPill: React.FC<{\n  filter: ActiveFilter\n  category?: FilterCategory\n  onRemove: () => void\n}> = ({ filter, category, onRemove }) => {\n  return (\n    <div\n      className={cn(\n        'group inline-flex items-center gap-1.5 rounded-lg px-2.5 py-1.5',\n        'bg-primary border border-primary',\n        'text-sm font-medium text-secondary',\n        'transition-all duration-150 ease-out'\n      )}\n    >\n      {category?.icon && (\n        <span className=\"text-quaternary\">\n          {renderIcon(category.icon, 16, 'size-4')}\n        </span>\n      )}\n      <span className=\"text-tertiary\">{filter.displayLabel}</span>\n      <span className=\"text-primary\">{filter.displayValue}</span>\n      <button\n        onClick={onRemove}\n        className={cn(\n          'ml-0.5 -mr-0.5 rounded p-0.5',\n          'text-quaternary hover:text-secondary hover:bg-secondary',\n          'transition-colors duration-100',\n          'outline-hidden focus-visible:outline-2 focus-visible:outline-offset-1 focus-visible:outline-brand'\n        )}\n      >\n        <HugeIcon icon={Cancel01Icon} size={14} strokeWidth={2} />\n      </button>\n    </div>\n  )\n}\n\n/**\n * Group categories by their group property\n */\nfunction groupCategories(categories: FilterCategory[]): Map<string, FilterCategory[]> {\n  const groups = new Map<string, FilterCategory[]>()\n  categories.forEach((cat) => {\n    const group = cat.group || 'Filters'\n    if (!groups.has(group)) {\n      groups.set(group, [])\n    }\n    groups.get(group)!.push(cat)\n  })\n  return groups\n}\n\n/**\n * Convert filter categories to menu items with nested submenus\n * Filters items based on search query\n */\nfunction convertCategoriesToMenuItems(\n  categories: FilterCategory[],\n  onFilterAdd: (filter: Omit<ActiveFilter, 'id'>) => void,\n  searchQuery: string = ''\n): MenuItemType[] {\n  const items: MenuItemType[] = []\n\n  // Filter categories based on search query\n  let filteredCategories = categories\n  if (searchQuery) {\n    const query = searchQuery.toLowerCase()\n    filteredCategories = categories.filter(\n      (cat) =>\n        cat.label.toLowerCase().includes(query) ||\n        cat.key.toLowerCase().includes(query) ||\n        cat.description?.toLowerCase().includes(query)\n    )\n  }\n\n  // Convert each category to a submenu item (no grouping)\n  filteredCategories.forEach((category) => {\n    const submenuItems = convertCategoryToMenuSubmenuItems(category, onFilterAdd, searchQuery)\n\n    if (submenuItems.length > 0) {\n      items.push({\n        id: category.key,\n        type: 'submenu',\n        label: category.label,\n        icon: category.icon as any,\n        description: category.description,\n        items: submenuItems,\n      })\n    }\n  })\n\n  return items\n}\n\n/**\n * Convert a single filter category to submenu items based on its config type\n * Filters options based on search query\n */\nfunction convertCategoryToMenuSubmenuItems(\n  category: FilterCategory,\n  onFilterAdd: (filter: Omit<ActiveFilter, 'id'>) => void,\n  searchQuery: string = ''\n): MenuItemType[] {\n  const config = category.config\n  const items: MenuItemType[] = []\n\n  // Generic filter function\n  const filterBySearch = <T extends { id: string; label: string }>(options: T[]): T[] => {\n    if (!searchQuery) return options\n    const query = searchQuery.toLowerCase()\n    return options.filter(\n      (opt) => opt.label.toLowerCase().includes(query) || opt.id.toLowerCase().includes(query)\n    )\n  }\n\n  switch (config.type) {\n    case 'select': {\n      const selectConfig = config as SelectFilterConfig\n      const filteredOptions = filterBySearch(selectConfig.options)\n      filteredOptions.forEach((option) => {\n        items.push({\n          id: `${category.key}-${option.id}`,\n          label: option.label,\n          icon: option.icon as any,\n          onClick: () => {\n            onFilterAdd({\n              categoryKey: category.key,\n              operator: 'equals',\n              value: option.id,\n              displayLabel: category.label,\n              displayValue: option.label,\n            })\n          },\n        })\n      })\n      break\n    }\n\n    case 'date': {\n      const dateConfig = config as DateFilterConfig\n      const filteredPresets = filterBySearch(dateConfig.presets)\n      filteredPresets.forEach((preset) => {\n        const days = preset.days ?? 0\n        const filterDate = new Date()\n        if (days !== 0) {\n          filterDate.setDate(filterDate.getDate() + days)\n        }\n\n        items.push({\n          id: `${category.key}-${preset.id}`,\n          label: preset.label,\n          icon: preset.icon as any,\n          onClick: () => {\n            const operator: FilterOperator = days < 0 ? 'greater_than' : 'equals'\n            onFilterAdd({\n              categoryKey: category.key,\n              operator,\n              value: filterDate.getTime(),\n              displayLabel: category.label,\n              displayValue: preset.label,\n            })\n          },\n        })\n      })\n      break\n    }\n\n    case 'range': {\n      const rangeConfig = config as RangeFilterConfig\n      if (rangeConfig.presets && rangeConfig.presets.length > 0) {\n        const filteredPresets = filterBySearch(rangeConfig.presets)\n        filteredPresets.forEach((preset) => {\n          items.push({\n            id: `${category.key}-${preset.id}`,\n            label: preset.label,\n            onClick: () => {\n              onFilterAdd({\n                categoryKey: category.key,\n                operator: 'between',\n                value: [preset.min, preset.max],\n                displayLabel: category.label,\n                displayValue: preset.label,\n              })\n            },\n          })\n        })\n      }\n      break\n    }\n\n    default:\n      // Unsupported filter types\n      break\n  }\n\n  return items\n}\n\n/**\n * Filter Dropdown Component\n *\n * Provides a dropdown-based filter UI using RevealMenu:\n * - \"Add filter\" button with nested menu\n * - Active filter pills with remove functionality\n * - Clear all filters option\n */\nexport const FilterDropdown: React.FC<FilterDropdownProps> = ({\n  categories,\n  filterState,\n  onFilterAdd,\n  onFilterRemove,\n  onFiltersClear,\n  className,\n  showClearAll = true,\n}) => {\n  const [searchQuery, setSearchQuery] = useState('')\n\n  const getCategoryForFilter = useCallback(\n    (filter: ActiveFilter) => categories.find((c) => c.key === filter.categoryKey),\n    [categories]\n  )\n\n  // Convert categories to menu items with search filtering\n  const menuItems = useMemo(() => {\n    return convertCategoriesToMenuItems(categories, onFilterAdd, searchQuery)\n  }, [categories, onFilterAdd, searchQuery])\n\n  // Search input header\n  const searchHeader = useMemo(\n    () => (\n      <div className=\"px-1.5 pb-2 border-b border-secondary\">\n        <div className=\"flex items-center gap-2 rounded-lg bg-secondary border border-secondary px-2.5 py-1.5\">\n          <HugeIcon icon={Search01Icon} size={14} strokeWidth={1.5} className=\"text-quaternary shrink-0\" />\n          <input\n            type=\"text\"\n            placeholder=\"Search filters...\"\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n            className=\"flex-1 bg-transparent text-sm font-normal text-primary placeholder:text-quaternary outline-hidden\"\n            onClick={(e) => e.stopPropagation()}\n            onKeyDown={(e) => e.stopPropagation()}\n            autoFocus\n          />\n        </div>\n      </div>\n    ),\n    [searchQuery]\n  )\n\n  // Handle dropdown close to reset search\n  const handleOpenChange = useCallback((open: boolean) => {\n    if (!open) {\n      setSearchQuery('')\n    }\n  }, [])\n\n  return (\n    <div className={cn('flex flex-wrap items-center gap-2', className)}>\n      {/* Active Filter Pills */}\n      {filterState.activeFilters.map((filter) => (\n        <FilterPill\n          key={filter.id}\n          filter={filter}\n          category={getCategoryForFilter(filter)}\n          onRemove={() => onFilterRemove(filter.id)}\n        />\n      ))}\n\n      {/* Add Filter Menu - using PROD Menu component */}\n      <Menu\n        trigger={\n          <button\n            className={cn(\n              'inline-flex items-center gap-1.5 rounded-lg px-2.5 py-1.5',\n              'bg-primary border border-primary',\n              'text-sm font-medium text-tertiary',\n              'hover:bg-secondary hover:text-secondary transition-all duration-150',\n              'outline-hidden focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-brand'\n            )}\n          >\n            <HugeIcon icon={Add01Icon} size={16} strokeWidth={2} />\n            <span>Add a filter</span>\n          </button>\n        }\n        items={menuItems}\n        header={searchHeader}\n        width={280}\n        side=\"bottom\"\n        align=\"start\"\n        onOpenChange={handleOpenChange}\n        animation={{\n          duration: 300,\n          easing: 'cubic-bezier(0.16, 1, 0.3, 1)',\n          animateHeight: true,\n        }}\n      />\n\n      {/* Clear All Button */}\n      {showClearAll && filterState.hasFilters && (\n        <button\n          onClick={onFiltersClear}\n          className={cn(\n            'text-sm font-medium text-tertiary hover:text-secondary transition-colors',\n            'outline-hidden focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-brand'\n          )}\n        >\n          Clear all\n        </button>\n      )}\n    </div>\n  )\n}\n\n"]}
{"version":3,"file":"skeleton-debug.js","sourceRoot":"/","sources":["other-repos/demo-repo/src/components/ui/prod/data/sticky-data-table/utils/skeleton-debug.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * Skeleton Debug Utility\n *\n * Comprehensive debugging for skeleton flash investigation.\n * Toggle DEBUG_SKELETON in browser console: window.__SKELETON_DEBUG = true\n *\n * Usage:\n * ```ts\n * import { skeletonDebug } from './skeleton-debug'\n *\n * skeletonDebug.log('observer', 'Sentinel intersecting', { isIntersecting: true })\n * skeletonDebug.stateChange('isLoadingMore', false, true)\n * skeletonDebug.timerEvent('settle', 'started', 300)\n * ```\n */\n\ntype DebugCategory =\n  | 'observer'      // IntersectionObserver events\n  | 'apollo'        // Apollo loading state changes\n  | 'loadMore'      // handleLoadMore lifecycle\n  | 'state'         // State changes (isLoadingMore, isBatchLoading, etc.)\n  | 'timer'         // Timer events (settle timers)\n  | 'skeleton'      // Skeleton visibility changes\n  | 'data'          // Data length changes\n  | 'filter'        // Filter dependency changes\n  | 'render'        // Render cycle events\n\ninterface DebugEntry {\n  timestamp: number\n  elapsed: number\n  category: DebugCategory\n  message: string\n  data?: Record<string, unknown>\n}\n\n// Color scheme for console output\nconst CATEGORY_COLORS: Record<DebugCategory, string> = {\n  observer: '#FF6B6B',   // Red\n  apollo: '#4ECDC4',     // Teal\n  loadMore: '#45B7D1',   // Blue\n  state: '#96CEB4',      // Green\n  timer: '#FFEAA7',      // Yellow\n  skeleton: '#DDA0DD',   // Plum\n  data: '#98D8C8',       // Mint\n  filter: '#F7DC6F',     // Gold\n  render: '#BB8FCE',     // Purple\n}\n\nconst CATEGORY_ICONS: Record<DebugCategory, string> = {\n  observer: 'üëÅÔ∏è',\n  apollo: 'üîÑ',\n  loadMore: 'üì•',\n  state: 'üìä',\n  timer: '‚è±Ô∏è',\n  skeleton: 'üíÄ',\n  data: 'üì¶',\n  filter: 'üîç',\n  render: 'üé®',\n}\n\nclass SkeletonDebugger {\n  private startTime: number = Date.now()\n  private entries: DebugEntry[] = []\n  private enabled: boolean = false\n  private categoryFilter: Set<DebugCategory> | null = null\n\n  constructor() {\n    // Check for debug flag on initialization\n    if (typeof window !== 'undefined') {\n      this.enabled = (window as any).__SKELETON_DEBUG === true\n      // Expose this instance to window for console control\n      ;(window as any).skeletonDebug = this\n    }\n  }\n\n  /**\n   * Enable debugging\n   */\n  enable(): void {\n    this.enabled = true\n    this.startTime = Date.now()\n    this.entries = []\n    console.log('%c[SkeletonDebug] Enabled - tracking skeleton states', 'color: #4ECDC4; font-weight: bold')\n  }\n\n  /**\n   * Disable debugging\n   */\n  disable(): void {\n    this.enabled = false\n    console.log('%c[SkeletonDebug] Disabled', 'color: #888')\n  }\n\n  /**\n   * Filter to specific categories only\n   */\n  filter(...categories: DebugCategory[]): void {\n    if (categories.length === 0) {\n      this.categoryFilter = null\n      console.log('%c[SkeletonDebug] Showing all categories', 'color: #4ECDC4')\n    } else {\n      this.categoryFilter = new Set(categories)\n      console.log(`%c[SkeletonDebug] Filtering to: ${categories.join(', ')}`, 'color: #4ECDC4')\n    }\n  }\n\n  /**\n   * Check if debugging is active\n   */\n  isEnabled(): boolean {\n    if (typeof window !== 'undefined') {\n      // Check runtime flag\n      return (window as any).__SKELETON_DEBUG === true || this.enabled\n    }\n    return this.enabled\n  }\n\n  /**\n   * Log a debug message\n   */\n  log(category: DebugCategory, message: string, data?: Record<string, unknown>): void {\n    if (!this.isEnabled()) return\n    if (this.categoryFilter && !this.categoryFilter.has(category)) return\n\n    const now = Date.now()\n    const elapsed = now - this.startTime\n    const entry: DebugEntry = { timestamp: now, elapsed, category, message, data }\n    this.entries.push(entry)\n\n    const icon = CATEGORY_ICONS[category]\n    const color = CATEGORY_COLORS[category]\n    const elapsedStr = `+${elapsed}ms`.padStart(8)\n\n    if (data) {\n      console.log(\n        `%c${elapsedStr} ${icon} [${category}]%c ${message}`,\n        `color: ${color}; font-weight: bold`,\n        'color: inherit',\n        data\n      )\n    } else {\n      console.log(\n        `%c${elapsedStr} ${icon} [${category}]%c ${message}`,\n        `color: ${color}; font-weight: bold`,\n        'color: inherit'\n      )\n    }\n  }\n\n  /**\n   * Log a state change with before/after values\n   */\n  stateChange(stateName: string, from: unknown, to: unknown, extra?: Record<string, unknown>): void {\n    if (from === to) return // Skip no-op changes\n\n    this.log('state', `${stateName}: ${JSON.stringify(from)} ‚Üí ${JSON.stringify(to)}`, {\n      stateName,\n      from,\n      to,\n      ...extra,\n    })\n  }\n\n  /**\n   * Log timer events (start, fire, clear)\n   */\n  timerEvent(timerName: string, event: 'started' | 'fired' | 'cleared', durationMs?: number): void {\n    const message = event === 'started'\n      ? `${timerName} timer started (${durationMs}ms)`\n      : event === 'fired'\n        ? `${timerName} timer fired`\n        : `${timerName} timer cleared`\n\n    this.log('timer', message, { timerName, event, durationMs })\n  }\n\n  /**\n   * Log IntersectionObserver events\n   */\n  observerEvent(event: 'intersecting' | 'not-intersecting' | 'created' | 'disconnected', details?: Record<string, unknown>): void {\n    this.log('observer', `Sentinel ${event}`, details)\n  }\n\n  /**\n   * Log Apollo loading state changes\n   */\n  apolloLoading(loading: boolean, networkStatus?: number, details?: Record<string, unknown>): void {\n    this.log('apollo', `Apollo loading: ${loading}${networkStatus !== undefined ? ` (networkStatus: ${networkStatus})` : ''}`, {\n      loading,\n      networkStatus,\n      ...details,\n    })\n  }\n\n  /**\n   * Log skeleton visibility changes\n   */\n  skeletonVisibility(visible: boolean, source: string, details?: Record<string, unknown>): void {\n    this.log('skeleton', `Skeleton ${visible ? 'SHOWN' : 'HIDDEN'} (${source})`, {\n      visible,\n      source,\n      ...details,\n    })\n  }\n\n  /**\n   * Log data changes\n   */\n  dataChange(rawLength: number, filteredLength: number, hasNextPage: boolean): void {\n    this.log('data', `Data: ${filteredLength}/${rawLength} items, hasNextPage: ${hasNextPage}`, {\n      rawLength,\n      filteredLength,\n      hasNextPage,\n    })\n  }\n\n  /**\n   * Export all entries as JSON (useful for analysis)\n   */\n  export(): DebugEntry[] {\n    return [...this.entries]\n  }\n\n  /**\n   * Clear all entries and reset timer\n   */\n  reset(): void {\n    this.entries = []\n    this.startTime = Date.now()\n    console.log('%c[SkeletonDebug] Reset', 'color: #4ECDC4')\n  }\n\n  /**\n   * Print a summary of recent events\n   */\n  summary(lastNMs: number = 5000): void {\n    const now = Date.now()\n    const cutoff = now - lastNMs\n    const recent = this.entries.filter(e => e.timestamp >= cutoff)\n\n    console.group(`%c[SkeletonDebug] Summary (last ${lastNMs}ms)`, 'color: #4ECDC4; font-weight: bold')\n    console.log(`Total events: ${recent.length}`)\n\n    // Count by category\n    const byCat = recent.reduce((acc, e) => {\n      acc[e.category] = (acc[e.category] || 0) + 1\n      return acc\n    }, {} as Record<string, number>)\n    console.log('By category:', byCat)\n\n    // State changes\n    const stateChanges = recent.filter(e => e.category === 'state')\n    if (stateChanges.length > 0) {\n      console.log('State changes:', stateChanges.map(e => `${e.data?.stateName}: ${e.data?.from} ‚Üí ${e.data?.to}`))\n    }\n\n    console.groupEnd()\n  }\n}\n\n// Singleton instance\nexport const skeletonDebug = new SkeletonDebugger()\n\n// Convenience function to check if debugging is enabled\nexport const isSkeletonDebugEnabled = (): boolean => skeletonDebug.isEnabled()\n\n/**\n * Helper to wrap a value with debug logging\n */\nexport function debugValue<T>(category: DebugCategory, label: string, value: T): T {\n  if (skeletonDebug.isEnabled()) {\n    skeletonDebug.log(category, `${label}: ${JSON.stringify(value)}`)\n  }\n  return value\n}\n"]}
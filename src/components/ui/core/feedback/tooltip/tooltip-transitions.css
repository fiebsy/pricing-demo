/**
 * Tooltip Animation CSS
 *
 * Matches legacy tooltip animations using keyframes equivalent to tailwindcss-animate.
 * GPU-composited properties only (transform, opacity).
 *
 * Animation feel:
 * - Entry: ease-out (decelerates into view)
 * - Exit: ease-in (accelerates out of view)
 * - Scale: 95% â†’ 100% (subtle zoom)
 * - Slide: 2px in direction away from trigger
 *
 * Base UI structure:
 * - Positioner: has data-side="top|bottom|left|right"
 * - Popup: has data-open, data-closed, data-instant
 */

/* ==========================================================================
   KEYFRAMES
   Matches tailwindcss-animate 'enter' and 'exit' keyframes
   ========================================================================== */

@keyframes tooltip-enter-top {
  from {
    opacity: 0;
    transform: scale(0.95) translate3d(0, 2px, 0);
  }
  to {
    opacity: 1;
    transform: scale(1) translate3d(0, 0, 0);
  }
}

@keyframes tooltip-exit-top {
  from {
    opacity: 1;
    transform: scale(1) translate3d(0, 0, 0);
  }
  to {
    opacity: 0;
    transform: scale(0.95) translate3d(0, 2px, 0);
  }
}

@keyframes tooltip-enter-bottom {
  from {
    opacity: 0;
    transform: scale(0.95) translate3d(0, -2px, 0);
  }
  to {
    opacity: 1;
    transform: scale(1) translate3d(0, 0, 0);
  }
}

@keyframes tooltip-exit-bottom {
  from {
    opacity: 1;
    transform: scale(1) translate3d(0, 0, 0);
  }
  to {
    opacity: 0;
    transform: scale(0.95) translate3d(0, -2px, 0);
  }
}

@keyframes tooltip-enter-left {
  from {
    opacity: 0;
    transform: scale(0.95) translate3d(2px, 0, 0);
  }
  to {
    opacity: 1;
    transform: scale(1) translate3d(0, 0, 0);
  }
}

@keyframes tooltip-exit-left {
  from {
    opacity: 1;
    transform: scale(1) translate3d(0, 0, 0);
  }
  to {
    opacity: 0;
    transform: scale(0.95) translate3d(2px, 0, 0);
  }
}

@keyframes tooltip-enter-right {
  from {
    opacity: 0;
    transform: scale(0.95) translate3d(-2px, 0, 0);
  }
  to {
    opacity: 1;
    transform: scale(1) translate3d(0, 0, 0);
  }
}

@keyframes tooltip-exit-right {
  from {
    opacity: 1;
    transform: scale(1) translate3d(0, 0, 0);
  }
  to {
    opacity: 0;
    transform: scale(0.95) translate3d(-2px, 0, 0);
  }
}

/* ==========================================================================
   BASE STYLES
   ========================================================================== */

.tooltip-popup {
  /* Animation timing */
  --tooltip-duration: 150ms;
  --tooltip-ease-in: cubic-bezier(0.4, 0, 1, 1);
  --tooltip-ease-out: cubic-bezier(0, 0, 0.2, 1);

  /* GPU compositing */
  will-change: transform, opacity;
  transform: translateZ(0);
  backface-visibility: hidden;
}

/* ==========================================================================
   ANIMATION STATES
   Base UI Positioner has data-side, Popup has data-open/data-closed
   Use descendant selectors to target Popup based on Positioner's side
   ========================================================================== */

/* TOP placement */
[data-side="top"] .tooltip-popup[data-open] {
  animation: tooltip-enter-top var(--tooltip-duration) var(--tooltip-ease-out) forwards;
}
[data-side="top"] .tooltip-popup[data-closed] {
  animation: tooltip-exit-top var(--tooltip-duration) var(--tooltip-ease-in) forwards;
}

/* BOTTOM placement */
[data-side="bottom"] .tooltip-popup[data-open] {
  animation: tooltip-enter-bottom var(--tooltip-duration) var(--tooltip-ease-out) forwards;
}
[data-side="bottom"] .tooltip-popup[data-closed] {
  animation: tooltip-exit-bottom var(--tooltip-duration) var(--tooltip-ease-in) forwards;
}

/* LEFT placement */
[data-side="left"] .tooltip-popup[data-open] {
  animation: tooltip-enter-left var(--tooltip-duration) var(--tooltip-ease-out) forwards;
}
[data-side="left"] .tooltip-popup[data-closed] {
  animation: tooltip-exit-left var(--tooltip-duration) var(--tooltip-ease-in) forwards;
}

/* RIGHT placement */
[data-side="right"] .tooltip-popup[data-open] {
  animation: tooltip-enter-right var(--tooltip-duration) var(--tooltip-ease-out) forwards;
}
[data-side="right"] .tooltip-popup[data-closed] {
  animation: tooltip-exit-right var(--tooltip-duration) var(--tooltip-ease-in) forwards;
}

/*
 * Instant state - intentionally not disabling exit animation
 * Base UI adds data-instant when closing via click, but we want the
 * exit animation to play regardless of how the tooltip closes.
 * Only disable entry animation for instant opens.
 */
.tooltip-popup[data-instant][data-open] {
  animation: none !important;
}

/* ==========================================================================
   ACCESSIBILITY
   ========================================================================== */

@media (prefers-reduced-motion: reduce) {
  .tooltip-popup {
    animation: none !important;
    transition: none !important;
  }
}

{"version":3,"file":"control-registry.js","sourceRoot":"/","sources":["other-repos/demo-repo/src/components/ui/deprecated/controls/unified-control-panel/registry/control-registry.tsx"],"names":[],"mappings":";AAAA;;;;;;;;;;;;GAYG;AAEH,YAAY,CAAA;AAdZ;;;;;;;;;;;;GAYG;;;AAIH,iCAAoF;AA4BpF,gFAAgF;AAChF,mBAAmB;AACnB,gFAAgF;AAEhF;;;GAGG;AACH,MAAM,eAAe,GAAoB,IAAI,GAAG,EAAE,CAAA;AA8HzC,0CAAe;AA5HxB;;GAEG;AACH,SAAgB,eAAe,CAC7B,IAAY,EACZ,SAA8B;IAE9B,eAAe,CAAC,GAAG,CAAC,IAAI,EAAE,SAA6B,CAAC,CAAA;AAC1D,CAAC;AALD,0CAKC;AAED;;GAEG;AACH,SAAgB,iBAAiB,CAAC,IAAY;IAC5C,OAAO,eAAe,CAAC,MAAM,CAAC,IAAI,CAAC,CAAA;AACrC,CAAC;AAFD,8CAEC;AAED;;GAEG;AACH,SAAgB,UAAU,CAAC,IAAY;IACrC,OAAO,eAAe,CAAC,GAAG,CAAC,IAAI,CAAC,CAAA;AAClC,CAAC;AAFD,gCAEC;AAED;;GAEG;AACH,SAAgB,UAAU,CAAC,IAAY;IACrC,OAAO,eAAe,CAAC,GAAG,CAAC,IAAI,CAAC,CAAA;AAClC,CAAC;AAFD,gCAEC;AAED;;GAEG;AACH,SAAgB,kBAAkB;IAChC,OAAO,KAAK,CAAC,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,CAAC,CAAA;AAC3C,CAAC;AAFD,gDAEC;AAED,gFAAgF;AAChF,2CAA2C;AAC3C,gFAAgF;AAEhF,MAAM,sBAAsB,GAAG,IAAA,qBAAa,EAAkB,eAAe,CAAC,CAAA;AAkFpD,wDAAsB;AAzEhD;;;GAGG;AACH,SAAgB,uBAAuB,CAAC,EACtC,QAAQ,EACR,QAAQ,EACR,MAAM,GAAG,IAAI,GACgB;IAC7B,MAAM,cAAc,GAAG,IAAA,kBAAU,EAAC,sBAAsB,CAAC,CAAA;IAEzD,MAAM,cAAc,GAAG,IAAA,eAAO,EAAC,GAAG,EAAE;QAClC,IAAI,CAAC,QAAQ;YAAE,OAAO,cAAc,CAAA;QAEpC,IAAI,MAAM,EAAE,CAAC;YACX,iEAAiE;YACjE,MAAM,MAAM,GAAG,IAAI,GAAG,CAAC,cAAc,CAAC,CAAA;YACtC,QAAQ,CAAC,OAAO,CAAC,CAAC,SAAS,EAAE,IAAI,EAAE,EAAE;gBACnC,MAAM,CAAC,GAAG,CAAC,IAAI,EAAE,SAAS,CAAC,CAAA;YAC7B,CAAC,CAAC,CAAA;YACF,OAAO,MAAM,CAAA;QACf,CAAC;QAED,OAAO,QAAQ,CAAA;IACjB,CAAC,EAAE,CAAC,QAAQ,EAAE,MAAM,EAAE,cAAc,CAAC,CAAC,CAAA;IAEtC,OAAO,CACL,CAAC,sBAAsB,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,cAAc,CAAC,CACrD;MAAA,CAAC,QAAQ,CACX;IAAA,EAAE,sBAAsB,CAAC,QAAQ,CAAC,CACnC,CAAA;AACH,CAAC;AA3BD,0DA2BC;AAED;;GAEG;AACH,SAAgB,kBAAkB;IAChC,OAAO,IAAA,kBAAU,EAAC,sBAAsB,CAAC,CAAA;AAC3C,CAAC;AAFD,gDAEC;AAED;;GAEG;AACH,SAAgB,gBAAgB;IAC9B,MAAM,QAAQ,GAAG,kBAAkB,EAAE,CAAA;IAErC,OAAO,SAAS,aAAa,CAC3B,MAAqB,EACrB,QAAkC;QAElC,MAAM,SAAS,GAAG,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,CAAA;QAE3C,IAAI,CAAC,SAAS,EAAE,CAAC;YACf,IAAI,OAAO,CAAC,GAAG,CAAC,QAAQ,KAAK,aAAa,EAAE,CAAC;gBAC3C,OAAO,CAAC,IAAI,CAAC,uDAAuD,MAAM,CAAC,IAAI,GAAG,CAAC,CAAA;YACrF,CAAC;YACD,OAAO,IAAI,CAAA;QACb,CAAC;QAED,OAAO,CACL,CAAC,SAAS,CACR,MAAM,CAAC,CAAC,MAAM,CAAC,CACf,QAAQ,CAAC,CAAC,QAAQ,CAAC,CACnB,QAAQ,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,EAC1B,CACH,CAAA;IACH,CAAC,CAAA;AACH,CAAC;AAxBD,4CAwBC","sourcesContent":["/**\n * Control Registry\n *\n * Extensible registry pattern for control components.\n * Allows registering custom control types without modifying core code.\n *\n * Usage:\n *   // Register a custom control type\n *   registerControl('my-custom', MyCustomControl)\n *\n *   // Use in config\n *   { type: 'my-custom', id: 'foo', label: 'Foo', ...customProps }\n */\n\n'use client'\n\nimport { ComponentType, createContext, useContext, ReactNode, useMemo } from 'react'\nimport type { ControlConfig, BaseControlConfig } from '../types'\n\n// -----------------------------------------------------------------------------\n// Types\n// -----------------------------------------------------------------------------\n\n/**\n * Props that all control components receive\n */\nexport interface ControlComponentProps<T extends BaseControlConfig = BaseControlConfig> {\n  config: T\n  onChange: (value: unknown) => void\n  disabled?: boolean\n}\n\n/**\n * A registered control component\n */\nexport type ControlComponent<T extends BaseControlConfig = BaseControlConfig> = ComponentType<\n  ControlComponentProps<T>\n>\n\n/**\n * The control registry - maps type names to components\n */\nexport type ControlRegistry = Map<string, ControlComponent>\n\n// -----------------------------------------------------------------------------\n// Default Registry\n// -----------------------------------------------------------------------------\n\n/**\n * The default registry instance\n * Built-in controls are registered in control-primitives.tsx\n */\nconst defaultRegistry: ControlRegistry = new Map()\n\n/**\n * Register a control component for a given type\n */\nexport function registerControl<T extends BaseControlConfig>(\n  type: string,\n  component: ControlComponent<T>\n): void {\n  defaultRegistry.set(type, component as ControlComponent)\n}\n\n/**\n * Unregister a control component\n */\nexport function unregisterControl(type: string): boolean {\n  return defaultRegistry.delete(type)\n}\n\n/**\n * Get a control component by type\n */\nexport function getControl(type: string): ControlComponent | undefined {\n  return defaultRegistry.get(type)\n}\n\n/**\n * Check if a control type is registered\n */\nexport function hasControl(type: string): boolean {\n  return defaultRegistry.has(type)\n}\n\n/**\n * Get all registered control types\n */\nexport function getRegisteredTypes(): string[] {\n  return Array.from(defaultRegistry.keys())\n}\n\n// -----------------------------------------------------------------------------\n// Registry Context (for scoped registries)\n// -----------------------------------------------------------------------------\n\nconst ControlRegistryContext = createContext<ControlRegistry>(defaultRegistry)\n\ninterface ControlRegistryProviderProps {\n  children: ReactNode\n  registry?: ControlRegistry\n  /** If true, extends the default registry instead of replacing it */\n  extend?: boolean\n}\n\n/**\n * Provider for a custom control registry scope\n * Use this to provide additional controls for a specific subtree\n */\nexport function ControlRegistryProvider({\n  children,\n  registry,\n  extend = true,\n}: ControlRegistryProviderProps) {\n  const parentRegistry = useContext(ControlRegistryContext)\n\n  const mergedRegistry = useMemo(() => {\n    if (!registry) return parentRegistry\n\n    if (extend) {\n      // Merge with parent registry (custom controls override built-in)\n      const merged = new Map(parentRegistry)\n      registry.forEach((component, type) => {\n        merged.set(type, component)\n      })\n      return merged\n    }\n\n    return registry\n  }, [registry, extend, parentRegistry])\n\n  return (\n    <ControlRegistryContext.Provider value={mergedRegistry}>\n      {children}\n    </ControlRegistryContext.Provider>\n  )\n}\n\n/**\n * Hook to access the control registry\n */\nexport function useControlRegistry(): ControlRegistry {\n  return useContext(ControlRegistryContext)\n}\n\n/**\n * Hook to render a control from the registry\n */\nexport function useRenderControl() {\n  const registry = useControlRegistry()\n\n  return function renderControl(\n    config: ControlConfig,\n    onChange: (value: unknown) => void\n  ): ReactNode {\n    const Component = registry.get(config.type)\n\n    if (!Component) {\n      if (process.env.NODE_ENV === 'development') {\n        console.warn(`[ControlRegistry] No component registered for type \"${config.type}\"`)\n      }\n      return null\n    }\n\n    return (\n      <Component\n        config={config}\n        onChange={onChange}\n        disabled={config.disabled}\n      />\n    )\n  }\n}\n\n// -----------------------------------------------------------------------------\n// Exports\n// -----------------------------------------------------------------------------\n\nexport { defaultRegistry, ControlRegistryContext }\n"]}
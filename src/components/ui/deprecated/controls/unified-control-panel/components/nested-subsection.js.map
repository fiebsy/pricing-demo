{"version":3,"file":"nested-subsection.js","sourceRoot":"/","sources":["other-repos/demo-repo/src/components/ui/deprecated/controls/unified-control-panel/components/nested-subsection.tsx"],"names":[],"mappings":"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","sourcesContent":["/**\n * Nested Subsection\n *\n * Renders subsections with support for nesting depth and gradient fade\n */\n\n'use client'\n\nimport { useState, memo, useCallback } from 'react'\nimport { cx } from '@/components/utils/cx'\n\nimport type {\n  ControlConfig,\n  ControlSubsection,\n  GradientFadeConfig,\n} from '../types'\nimport {\n  ControlGroup,\n  ControlGrid,\n  ControlRenderer,\n  SectionHeader,\n} from './control-primitives'\n\n// -----------------------------------------------------------------------------\n// Gradient Fade Overlay\n// -----------------------------------------------------------------------------\n\ninterface GradientFadeOverlayProps {\n  config: GradientFadeConfig\n  className?: string\n}\n\nexport const GradientFadeOverlay = memo(({ config, className }: GradientFadeOverlayProps) => {\n  if (!config.enabled) return null\n\n  const {\n    direction = 'to-b',\n    from = 'transparent',\n    to = 'var(--color-background-secondary)',\n    opacity = 50,\n  } = config\n\n  const directionToCss: Record<string, string> = {\n    'to-t': 'to top',\n    'to-b': 'to bottom',\n    'to-l': 'to left',\n    'to-r': 'to right',\n    'to-br': 'to bottom right',\n    'to-bl': 'to bottom left',\n    'to-tr': 'to top right',\n    'to-tl': 'to top left',\n  }\n\n  return (\n    <div\n      className={cx('pointer-events-none absolute inset-0 rounded-md', className)}\n      style={{\n        background: `linear-gradient(${directionToCss[direction] || 'to bottom'}, ${from}, ${to})`,\n        opacity: opacity / 100,\n      }}\n    />\n  )\n})\nGradientFadeOverlay.displayName = 'GradientFadeOverlay'\n\n// -----------------------------------------------------------------------------\n// Nested Inset Wrapper\n// -----------------------------------------------------------------------------\n\ninterface NestedInsetProps {\n  depth: number\n  gradientFade?: GradientFadeConfig\n  children: React.ReactNode\n  className?: string\n}\n\nexport const NestedInset = memo(({ depth, gradientFade, children, className }: NestedInsetProps) => {\n  const depthStyles = {\n    1: 'bg-secondary/50 border-secondary/50',\n    2: 'bg-tertiary/50 border-tertiary/50',\n    3: 'bg-quaternary/50 border-quaternary/50',\n  }\n\n  const bgClass = depthStyles[Math.min(depth, 3) as keyof typeof depthStyles] || depthStyles[1]\n\n  return (\n    <div\n      className={cx(\n        'relative overflow-hidden rounded-md border p-3',\n        bgClass,\n        className\n      )}\n    >\n      {gradientFade?.enabled && <GradientFadeOverlay config={gradientFade} />}\n      <div className=\"relative z-10\">{children}</div>\n    </div>\n  )\n})\nNestedInset.displayName = 'NestedInset'\n\nexport const NestedCard = NestedInset\n\n// -----------------------------------------------------------------------------\n// Nested Subsection Renderer\n// -----------------------------------------------------------------------------\n\ninterface NestedSubsectionProps {\n  subsection: ControlSubsection\n  sectionId: string\n  onChange: (event: { controlId: string; sectionId: string; value: unknown }) => void\n  depth?: number\n}\n\nexport const NestedSubsection = memo(({\n  subsection,\n  sectionId,\n  onChange,\n  depth = 0,\n}: NestedSubsectionProps) => {\n  const {\n    title,\n    description,\n    controls,\n    columns = 1,\n    collapsible = false,\n    defaultCollapsed = false,\n    gradientFade,\n    children,\n  } = subsection\n\n  const [isCollapsed, setIsCollapsed] = useState(defaultCollapsed)\n\n  const handleControlChange = useCallback(\n    (controlId: string) => (value: unknown) => {\n      onChange({ controlId, sectionId, value })\n    },\n    [onChange, sectionId]\n  )\n\n  const toggleCollapse = useCallback(() => {\n    setIsCollapsed((prev) => !prev)\n  }, [])\n\n  const renderControl = (control: ControlConfig) => {\n    if (!control || !control.id) {\n      console.warn('NestedSubsection: Invalid control detected', control)\n      return null\n    }\n\n    if (control.type === 'inline-toggle') {\n      return (\n        <ControlRenderer\n          key={control.id}\n          config={control}\n          onChange={handleControlChange(control.id)}\n        />\n      )\n    }\n\n    if (control.type === 'custom') {\n      return (\n        <div key={control.id}>\n          {control.label && <SectionHeader title={control.label} />}\n          {control.render()}\n        </div>\n      )\n    }\n\n    if (control.type === 'color-array') {\n      return (\n        <div key={control.id}>\n          <SectionHeader title={control.label} />\n          <ControlRenderer config={control} onChange={handleControlChange(control.id)} />\n        </div>\n      )\n    }\n\n    return (\n      <ControlGroup key={control.id} label={control.label} description={control.description}>\n        <ControlRenderer config={control} onChange={handleControlChange(control.id)} />\n      </ControlGroup>\n    )\n  }\n\n  const validControls = controls.filter((control) => control != null)\n\n  const content = (\n    <div className=\"space-y-4\">\n      {title && (\n        collapsible ? (\n          <button\n            type=\"button\"\n            onClick={toggleCollapse}\n            className=\"flex w-full items-center justify-between text-left hover:opacity-80\"\n          >\n            <div>\n              <h5 className=\"text-secondary text-xs font-semibold uppercase tracking-wider\">\n                {title}\n              </h5>\n              {description && (\n                <p className=\"text-tertiary mt-0.5 text-[11px]\">{description}</p>\n              )}\n            </div>\n            <span\n              className={cx(\n                'text-tertiary text-xs transition-transform duration-200',\n                isCollapsed ? '-rotate-90' : 'rotate-0'\n              )}\n            >\n              â–¼\n            </span>\n          </button>\n        ) : (\n          <div>\n            <h5 className=\"text-secondary text-xs font-semibold uppercase tracking-wider\">\n              {title}\n            </h5>\n            {description && (\n              <p className=\"text-tertiary mt-0.5 text-[11px]\">{description}</p>\n            )}\n          </div>\n        )\n      )}\n\n      {(!collapsible || !isCollapsed) && (\n        <>\n          {validControls.length > 0 && (\n            columns === 1 ? (\n              <div className=\"space-y-4\">{validControls.map(renderControl)}</div>\n            ) : (\n              <ControlGrid columns={columns}>{validControls.map(renderControl)}</ControlGrid>\n            )\n          )}\n\n          {children && children.length > 0 && (\n            <div className=\"mt-3 space-y-3\">\n              {children.map((child, index) => (\n                <NestedSubsection\n                  key={`${sectionId}-nested-${index}`}\n                  subsection={child}\n                  sectionId={sectionId}\n                  onChange={onChange}\n                  depth={(child.depth ?? depth) + 1}\n                />\n              ))}\n            </div>\n          )}\n        </>\n      )}\n    </div>\n  )\n\n  const shouldWrap = depth > 0 || gradientFade?.enabled\n\n  if (shouldWrap) {\n    return (\n      <NestedInset depth={depth} gradientFade={gradientFade}>\n        {content}\n      </NestedInset>\n    )\n  }\n\n  return content\n})\nNestedSubsection.displayName = 'NestedSubsection'\n"]}
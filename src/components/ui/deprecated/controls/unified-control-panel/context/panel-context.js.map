{"version":3,"file":"panel-context.js","sourceRoot":"/","sources":["other-repos/demo-repo/src/components/ui/deprecated/controls/unified-control-panel/context/panel-context.tsx"],"names":[],"mappings":"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","sourcesContent":["/**\n * Panel Context\n *\n * Split context pattern for optimal performance:\n * - PanelStateContext: Frequently changing values (activeTab, isScrollingProgrammatically)\n * - PanelActionsContext: Stable functions and refs (never cause re-renders)\n *\n * Use usePanelState() when you need reactive state\n * Use usePanelActions() when you only need functions/refs\n * Use usePanelContext() for backwards compatibility (combines both)\n */\n\n'use client'\n\nimport {\n  createContext,\n  useCallback,\n  useContext,\n  useMemo,\n  useRef,\n  useState,\n  ReactNode,\n} from 'react'\nimport type { PanelStateValue, PanelActionsValue, PanelContextValue } from '../types'\n\n// -----------------------------------------------------------------------------\n// Split Contexts\n// -----------------------------------------------------------------------------\n\nconst PanelStateContext = createContext<PanelStateValue | null>(null)\nconst PanelActionsContext = createContext<PanelActionsValue | null>(null)\n\n// Legacy combined context (for backwards compatibility)\nconst PanelContext = createContext<PanelContextValue | null>(null)\n\n// -----------------------------------------------------------------------------\n// Provider\n// -----------------------------------------------------------------------------\n\ninterface PanelProviderProps {\n  children: ReactNode\n  defaultActiveTab: string\n  defaultMinimized?: boolean\n}\n\nexport const PanelProvider = ({\n  children,\n  defaultActiveTab,\n  defaultMinimized = false,\n}: PanelProviderProps) => {\n  const [activeTab, setActiveTab] = useState(defaultActiveTab)\n  const [isScrollingProgrammatically, setIsScrollingProgrammatically] = useState(false)\n  const [isMinimized, setIsMinimized] = useState(defaultMinimized)\n\n  const containerRef = useRef<HTMLDivElement>(null)\n  const sectionRefs = useRef<Map<string, HTMLElement>>(new Map())\n\n  // Stable function - never changes\n  const registerSection = useCallback((id: string, element: HTMLElement | null) => {\n    if (element) {\n      sectionRefs.current.set(id, element)\n    } else {\n      sectionRefs.current.delete(id)\n    }\n  }, [])\n\n  // Stable function - never changes\n  const scrollToSection = useCallback((sectionId: string) => {\n    const sectionEl = sectionRefs.current.get(sectionId)\n    const container = containerRef.current\n\n    if (!sectionEl || !container) return\n\n    setActiveTab(sectionId)\n    setIsScrollingProgrammatically(true)\n\n    const scrollMargin = 128\n    const elementTop = sectionEl.offsetTop\n    const targetScroll = Math.max(0, elementTop - scrollMargin)\n\n    const scrollDistance = Math.abs(container.scrollTop - targetScroll)\n    const useSmooth = scrollDistance > 500\n\n    container.scrollTo({\n      top: targetScroll,\n      behavior: useSmooth ? 'smooth' : 'auto',\n    })\n\n    const resetDelay = useSmooth ? 600 : 100\n    setTimeout(() => {\n      setIsScrollingProgrammatically(false)\n    }, resetDelay)\n  }, [])\n\n  // Toggle minimize state\n  const toggleMinimize = useCallback(() => {\n    setIsMinimized((prev) => !prev)\n  }, [])\n\n  // Set minimize state directly\n  const setMinimized = useCallback((value: boolean) => {\n    setIsMinimized(value)\n  }, [])\n\n  // State value - changes when state changes\n  const stateValue = useMemo<PanelStateValue>(\n    () => ({\n      activeTab,\n      isScrollingProgrammatically,\n      isMinimized,\n    }),\n    [activeTab, isScrollingProgrammatically, isMinimized]\n  )\n\n  // Actions value - stable reference, never changes\n  const actionsValue = useMemo<PanelActionsValue>(\n    () => ({\n      setActiveTab,\n      setIsScrollingProgrammatically,\n      registerSection,\n      scrollToSection,\n      toggleMinimize,\n      setMinimized,\n      containerRef,\n    }),\n    [registerSection, scrollToSection, toggleMinimize, setMinimized]\n  )\n\n  // Combined value for backwards compatibility\n  const combinedValue = useMemo<PanelContextValue>(\n    () => ({\n      ...stateValue,\n      ...actionsValue,\n    }),\n    [stateValue, actionsValue]\n  )\n\n  return (\n    <PanelActionsContext.Provider value={actionsValue}>\n      <PanelStateContext.Provider value={stateValue}>\n        <PanelContext.Provider value={combinedValue}>{children}</PanelContext.Provider>\n      </PanelStateContext.Provider>\n    </PanelActionsContext.Provider>\n  )\n}\n\n// -----------------------------------------------------------------------------\n// Hooks\n// -----------------------------------------------------------------------------\n\n/**\n * Get only the panel state (activeTab, isScrollingProgrammatically)\n * Use this when you need reactive state values\n */\nexport const usePanelState = (): PanelStateValue => {\n  const context = useContext(PanelStateContext)\n  if (!context) {\n    throw new Error('usePanelState must be used within a PanelProvider')\n  }\n  return context\n}\n\n/**\n * Get only the panel actions (functions and refs)\n * Use this when you only need to call functions or access refs\n * Components using this won't re-render when state changes\n */\nexport const usePanelActions = (): PanelActionsValue => {\n  const context = useContext(PanelActionsContext)\n  if (!context) {\n    throw new Error('usePanelActions must be used within a PanelProvider')\n  }\n  return context\n}\n\n/**\n * Get both state and actions (backwards compatible)\n * Prefer usePanelState() or usePanelActions() for better performance\n */\nexport const usePanelContext = (): PanelContextValue => {\n  const context = useContext(PanelContext)\n  if (!context) {\n    throw new Error('usePanelContext must be used within a PanelProvider')\n  }\n  return context\n}\n\nexport { PanelContext, PanelStateContext, PanelActionsContext }\n"]}
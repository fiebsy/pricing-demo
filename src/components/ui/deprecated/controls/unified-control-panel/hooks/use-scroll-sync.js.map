{"version":3,"file":"use-scroll-sync.js","sourceRoot":"/","sources":["other-repos/demo-repo/src/components/ui/deprecated/controls/unified-control-panel/hooks/use-scroll-sync.ts"],"names":[],"mappings":";AAAA;;;;GAIG;AAEH,YAAY,CAAA;AANZ;;;;GAIG;;;AAIH,iCAAyC;AAUlC,MAAM,aAAa,GAAG,CAAC,EAC5B,UAAU,EACV,eAAe,EACf,UAAU,GAAG,KAAK,EAClB,YAAY,EACZ,UAAU,GAAG,mBAAmB,GACX,EAAE,EAAE;IACzB,MAAM,WAAW,GAAG,IAAA,cAAM,EAA8B,IAAI,CAAC,CAAA;IAC7D,MAAM,oBAAoB,GAAG,IAAA,cAAM,EAAgB,IAAI,CAAC,CAAA;IAExD,IAAA,iBAAS,EAAC,GAAG,EAAE;QACb,MAAM,SAAS,GAAG,YAAY,CAAC,OAAO,CAAA;QACtC,IAAI,CAAC,SAAS,IAAI,UAAU,CAAC,MAAM,KAAK,CAAC;YAAE,OAAM;QAEjD,IAAI,WAAW,CAAC,OAAO,EAAE,CAAC;YACxB,WAAW,CAAC,OAAO,CAAC,UAAU,EAAE,CAAA;QAClC,CAAC;QAED,WAAW,CAAC,OAAO,GAAG,IAAI,oBAAoB,CAC5C,CAAC,OAAO,EAAE,EAAE;YACV,IAAI,UAAU;gBAAE,OAAM;YAEtB,IAAI,YAAY,GAAqC,IAAI,CAAA;YACzD,IAAI,UAAU,GAAG,QAAQ,CAAA;YAEzB,KAAK,MAAM,KAAK,IAAI,OAAO,EAAE,CAAC;gBAC5B,IAAI,KAAK,CAAC,cAAc,EAAE,CAAC;oBACzB,MAAM,IAAI,GAAG,KAAK,CAAC,kBAAkB,CAAA;oBACrC,IAAI,IAAI,CAAC,GAAG,GAAG,UAAU,EAAE,CAAC;wBAC1B,UAAU,GAAG,IAAI,CAAC,GAAG,CAAA;wBACrB,YAAY,GAAG,KAAK,CAAA;oBACtB,CAAC;gBACH,CAAC;YACH,CAAC;YAED,IAAI,YAAY,EAAE,CAAC;gBACjB,MAAM,aAAa,GAAG,YAAY,CAAC,MAAqB,CAAA;gBACxD,IAAI,aAAa,CAAC,EAAE,EAAE,CAAC;oBACrB,MAAM,UAAU,GAAG,aAAa,CAAC,EAAE,CAAA;oBACnC,IAAI,UAAU,KAAK,oBAAoB,CAAC,OAAO,EAAE,CAAC;wBAChD,oBAAoB,CAAC,OAAO,GAAG,UAAU,CAAA;wBACzC,eAAe,CAAC,UAAU,CAAC,CAAA;oBAC7B,CAAC;gBACH,CAAC;YACH,CAAC;QACH,CAAC,EACD;YACE,IAAI,EAAE,SAAS;YACf,UAAU;YACV,SAAS,EAAE,CAAC,CAAC,EAAE,GAAG,EAAE,GAAG,CAAC;SACzB,CACF,CAAA;QAED,UAAU,CAAC,OAAO,CAAC,CAAC,EAAE,EAAE,EAAE;YACxB,MAAM,OAAO,GAAG,SAAS,CAAC,aAAa,CAAC,qBAAqB,EAAE,IAAI,CAAC,CAAA;YACpE,IAAI,OAAO,EAAE,CAAC;gBACZ,WAAW,CAAC,OAAO,EAAE,OAAO,CAAC,OAAO,CAAC,CAAA;YACvC,CAAC;QACH,CAAC,CAAC,CAAA;QAEF,OAAO,GAAG,EAAE;YACV,WAAW,CAAC,OAAO,EAAE,UAAU,EAAE,CAAA;QACnC,CAAC,CAAA;IACH,CAAC,EAAE,CAAC,UAAU,EAAE,eAAe,EAAE,UAAU,EAAE,YAAY,EAAE,UAAU,CAAC,CAAC,CAAA;IAEvE,OAAO;QACL,SAAS,EAAE,GAAG,EAAE;YACd,oBAAoB,CAAC,OAAO,GAAG,IAAI,CAAA;QACrC,CAAC;KACF,CAAA;AACH,CAAC,CAAA;AAtEY,QAAA,aAAa,iBAsEzB","sourcesContent":["/**\n * Use Scroll Sync\n *\n * IntersectionObserver-based scroll sync for tab navigation\n */\n\n'use client'\n\nimport { useEffect, useRef } from 'react'\n\ninterface UseScrollSyncOptions {\n  sectionIds: string[]\n  onSectionInView: (sectionId: string) => void\n  isDisabled?: boolean\n  containerRef: React.RefObject<HTMLElement | null>\n  rootMargin?: string\n}\n\nexport const useScrollSync = ({\n  sectionIds,\n  onSectionInView,\n  isDisabled = false,\n  containerRef,\n  rootMargin = '-20% 0px -70% 0px',\n}: UseScrollSyncOptions) => {\n  const observerRef = useRef<IntersectionObserver | null>(null)\n  const lastActiveSectionRef = useRef<string | null>(null)\n\n  useEffect(() => {\n    const container = containerRef.current\n    if (!container || sectionIds.length === 0) return\n\n    if (observerRef.current) {\n      observerRef.current.disconnect()\n    }\n\n    observerRef.current = new IntersectionObserver(\n      (entries) => {\n        if (isDisabled) return\n\n        let topmostEntry: IntersectionObserverEntry | null = null\n        let topmostTop = Infinity\n\n        for (const entry of entries) {\n          if (entry.isIntersecting) {\n            const rect = entry.boundingClientRect\n            if (rect.top < topmostTop) {\n              topmostTop = rect.top\n              topmostEntry = entry\n            }\n          }\n        }\n\n        if (topmostEntry) {\n          const targetElement = topmostEntry.target as HTMLElement\n          if (targetElement.id) {\n            const newSection = targetElement.id\n            if (newSection !== lastActiveSectionRef.current) {\n              lastActiveSectionRef.current = newSection\n              onSectionInView(newSection)\n            }\n          }\n        }\n      },\n      {\n        root: container,\n        rootMargin,\n        threshold: [0, 0.1, 0.5],\n      }\n    )\n\n    sectionIds.forEach((id) => {\n      const element = container.querySelector(`[data-section-id=\"${id}\"]`)\n      if (element) {\n        observerRef.current?.observe(element)\n      }\n    })\n\n    return () => {\n      observerRef.current?.disconnect()\n    }\n  }, [sectionIds, onSectionInView, isDisabled, containerRef, rootMargin])\n\n  return {\n    resetSync: () => {\n      lastActiveSectionRef.current = null\n    },\n  }\n}\n"]}
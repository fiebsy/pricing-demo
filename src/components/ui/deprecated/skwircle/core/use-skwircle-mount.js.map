{"version":3,"file":"use-skwircle-mount.js","sourceRoot":"/","sources":["other-repos/demo-repo/src/components/ui/deprecated/skwircle/core/use-skwircle-mount.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * useSkwircleMount Hook\n *\n * Smart FOUC (Flash of Unstyled Content) prevention.\n * Analyzes layout stability to determine the best mount strategy.\n */\n\n'use client'\n\nimport { useMemo } from 'react'\nimport type { SkwircleMountStrategy } from '../types'\nimport { parsePx } from '../utils'\n\ninterface UseSkwircleMountOptions {\n  /** Mount strategy preference */\n  mountStrategy: SkwircleMountStrategy\n  /** Whether first measurement has completed */\n  hasMeasured: boolean\n  /** Initial dimensions for SSR */\n  initialDimensions?: { width: number; height: number }\n  /** Element className for stability analysis */\n  className?: string\n  /** Element style for stability analysis */\n  style?: React.CSSProperties\n  /** Whether element uses fill mode */\n  fillMode?: boolean\n}\n\ninterface UseSkwircleMountResult {\n  /** Whether the component should be visible */\n  shouldShow: boolean\n  /** Opacity value (0 or 1) */\n  opacity: number\n  /** CSS transition for opacity */\n  transition: string | undefined\n}\n\ntype LayoutStability = 'stable' | 'uncertain' | 'unstable'\n\n/**\n * Analyze layout stability based on CSS properties.\n *\n * @returns Layout stability level\n */\nfunction analyzeLayoutStability(\n  className?: string,\n  style?: React.CSSProperties,\n  fillMode?: boolean,\n  initialDimensions?: { width: number; height: number }\n): LayoutStability {\n  const cn = className ?? ''\n  const st = style ?? {}\n\n  // Check for fixed dimensions\n  const fixedW = parsePx(st.width)\n  const fixedH = parsePx(st.height)\n  const hasFixedSize = !!fixedW && !!fixedH\n  const hasInitialDims = !!initialDimensions && initialDimensions.width > 0 && initialDimensions.height > 0\n\n  // Fixed size or initial dimensions = stable\n  if (hasFixedSize || hasInitialDims) {\n    return 'stable'\n  }\n\n  // Check for fluid sizing patterns\n  const isFluidWidth =\n    typeof st.width === 'string' &&\n    (st.width.includes('%') || st.width.includes('calc') || st.width === 'auto')\n  const isFluidHeight =\n    typeof st.height === 'string' &&\n    (st.height.includes('%') || st.height.includes('calc') || st.height === 'auto')\n\n  const isFlexGrow =\n    st.flex !== undefined ||\n    st.flexGrow !== undefined ||\n    st.flexBasis !== undefined ||\n    cn.includes('flex-1') ||\n    cn.includes('grow') ||\n    cn.includes('basis-') ||\n    cn.includes('w-full')\n\n  const isFluid =\n    isFluidWidth ||\n    isFluidHeight ||\n    cn.includes('w-full') ||\n    cn.includes('h-full') ||\n    fillMode\n\n  // Fluid or flex = unstable\n  if (isFluid || isFlexGrow) {\n    return 'unstable'\n  }\n\n  // Otherwise uncertain (content-based sizing)\n  return 'uncertain'\n}\n\n/**\n * Hook to determine mount behavior for FOUC prevention.\n *\n * Mount strategies:\n * - 'auto': Smart detection based on layout stability\n * - 'fade': Always fade in after measurement\n * - 'immediate': Show immediately (use with initialDimensions)\n */\nexport function useSkwircleMount(options: UseSkwircleMountOptions): UseSkwircleMountResult {\n  const {\n    mountStrategy,\n    hasMeasured,\n    initialDimensions,\n    className,\n    style,\n    fillMode,\n  } = options\n\n  return useMemo(() => {\n    // Determine effective strategy\n    let effectiveStrategy: 'fade' | 'immediate' = 'fade'\n\n    if (mountStrategy === 'immediate') {\n      effectiveStrategy = 'immediate'\n    } else if (mountStrategy === 'fade') {\n      effectiveStrategy = 'fade'\n    } else {\n      // 'auto' - analyze layout stability\n      const stability = analyzeLayoutStability(className, style, fillMode, initialDimensions)\n\n      switch (stability) {\n        case 'stable':\n          // Fixed dimensions - show immediately\n          effectiveStrategy = 'immediate'\n          break\n        case 'unstable':\n          // Fluid layout - must fade to hide resize\n          effectiveStrategy = 'fade'\n          break\n        case 'uncertain':\n        default:\n          // Content-based - fade to be safe\n          effectiveStrategy = 'fade'\n          break\n      }\n    }\n\n    // Compute visibility\n    const shouldShow = effectiveStrategy === 'immediate' ? true : hasMeasured\n\n    return {\n      shouldShow,\n      opacity: shouldShow ? 1 : 0,\n      transition: effectiveStrategy === 'fade' ? 'opacity 150ms ease-out' : undefined,\n    }\n  }, [mountStrategy, hasMeasured, initialDimensions, className, style, fillMode])\n}\n"]}
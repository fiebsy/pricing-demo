{"version":3,"file":"use-expanding-search.js","sourceRoot":"/","sources":["other-repos/demo-repo/src/components/ui/deprecated/expanding-search/hooks/use-expanding-search.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * Expanding Search - Hook\n *\n * Manages state and event handlers for the expanding search component.\n *\n * @module expanding-search/hooks/use-expanding-search\n */\n\n'use client'\n\nimport { useState, useRef, useEffect, useCallback } from 'react'\n\nimport type { UseExpandingSearchProps, UseExpandingSearchReturn } from '../types'\n\nexport function useExpandingSearch({\n  value: controlledValue,\n  expanded: controlledExpanded,\n  defaultExpanded,\n  autoFocus,\n  collapseOnBlur,\n  onChange,\n  onSubmit,\n  onExpandedChange,\n}: UseExpandingSearchProps): UseExpandingSearchReturn {\n  // ============================================================================\n  // State\n  // ============================================================================\n\n  const [internalExpanded, setInternalExpanded] = useState(defaultExpanded)\n  const [internalValue, setInternalValue] = useState('')\n  const inputRef = useRef<HTMLInputElement>(null)\n  const containerRef = useRef<HTMLDivElement>(null)\n\n  const isExpanded = controlledExpanded ?? internalExpanded\n  const inputValue = controlledValue ?? internalValue\n\n  // ============================================================================\n  // Handlers\n  // ============================================================================\n\n  const handleExpandedChange = useCallback((expanded: boolean) => {\n    setInternalExpanded(expanded)\n    onExpandedChange?.(expanded)\n  }, [onExpandedChange])\n\n  const handleToggle = useCallback(() => {\n    handleExpandedChange(!isExpanded)\n  }, [isExpanded, handleExpandedChange])\n\n  const handleInputChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    const newValue = e.target.value\n    setInternalValue(newValue)\n    onChange?.(newValue)\n  }, [onChange])\n\n  const handleKeyDown = useCallback((e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (e.key === 'Enter') {\n      onSubmit?.(inputValue)\n    } else if (e.key === 'Escape') {\n      handleExpandedChange(false)\n    }\n  }, [inputValue, onSubmit, handleExpandedChange])\n\n  const handleClear = useCallback((e: React.MouseEvent) => {\n    e.stopPropagation()\n    setInternalValue('')\n    onChange?.('')\n    inputRef.current?.focus()\n  }, [onChange])\n\n  const handleContainerClick = useCallback(() => {\n    if (!isExpanded) {\n      handleExpandedChange(true)\n    }\n  }, [isExpanded, handleExpandedChange])\n\n  // ============================================================================\n  // Effects\n  // ============================================================================\n\n  // Auto-focus when expanded\n  useEffect(() => {\n    if (isExpanded && autoFocus) {\n      const timer = setTimeout(() => {\n        inputRef.current?.focus()\n      }, 50)\n      return () => clearTimeout(timer)\n    }\n  }, [isExpanded, autoFocus])\n\n  // Collapse on outside click/touch\n  useEffect(() => {\n    if (!collapseOnBlur || !isExpanded) return\n\n    const handleClickOutside = (e: MouseEvent | TouchEvent) => {\n      if (containerRef.current && !containerRef.current.contains(e.target as Node)) {\n        handleExpandedChange(false)\n      }\n    }\n\n    document.addEventListener('mousedown', handleClickOutside)\n    document.addEventListener('touchstart', handleClickOutside)\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside)\n      document.removeEventListener('touchstart', handleClickOutside)\n    }\n  }, [isExpanded, collapseOnBlur, handleExpandedChange])\n\n  // ============================================================================\n  // Return\n  // ============================================================================\n\n  return {\n    // Refs\n    inputRef,\n    containerRef,\n    // State\n    isExpanded,\n    inputValue,\n    // Handlers\n    handleToggle,\n    handleInputChange,\n    handleKeyDown,\n    handleClear,\n    handleContainerClick,\n  }\n}\n"]}
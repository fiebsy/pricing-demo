{"version":3,"file":"use-export-csv-sticky.js","sourceRoot":"/","sources":["other-repos/demo-repo/src/components/ui/deprecated/sticky-data-table/hooks/use-export-csv-sticky.ts"],"names":[],"mappings":";;;AAaA;;GAEG;AACH,SAAS,WAAW,CAAC,IAAyB,EAAE,QAAgB;IAC9D,IAAI,IAAI,CAAC,MAAM,KAAK,CAAC;QAAE,OAAM;IAE7B,6BAA6B;IAC7B,MAAM,OAAO,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAA;IAEpC,oBAAoB;IACpB,MAAM,OAAO,GAAG;QACd,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC;QACjB,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAChB,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE;YACnB,MAAM,KAAK,GAAG,GAAG,CAAC,MAAM,CAAC,CAAA;YACzB,8DAA8D;YAC9D,MAAM,WAAW,GAAG,MAAM,CAAC,KAAK,IAAI,EAAE,CAAC,CAAA;YACvC,IAAI,WAAW,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,WAAW,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,WAAW,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC;gBACzF,OAAO,IAAI,WAAW,CAAC,OAAO,CAAC,IAAI,EAAE,IAAI,CAAC,GAAG,CAAA;YAC/C,CAAC;YACD,OAAO,WAAW,CAAA;QACpB,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CACb;KACF,CAAA;IAED,MAAM,UAAU,GAAG,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;IACrC,MAAM,IAAI,GAAG,IAAI,IAAI,CAAC,CAAC,UAAU,CAAC,EAAE,EAAE,IAAI,EAAE,yBAAyB,EAAE,CAAC,CAAA;IACxE,MAAM,IAAI,GAAG,QAAQ,CAAC,aAAa,CAAC,GAAG,CAAC,CAAA;IACxC,MAAM,GAAG,GAAG,GAAG,CAAC,eAAe,CAAC,IAAI,CAAC,CAAA;IAErC,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE,GAAG,CAAC,CAAA;IAC9B,IAAI,CAAC,YAAY,CAAC,UAAU,EAAE,GAAG,QAAQ,MAAM,CAAC,CAAA;IAChD,IAAI,CAAC,KAAK,CAAC,UAAU,GAAG,QAAQ,CAAA;IAChC,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAA;IAC/B,IAAI,CAAC,KAAK,EAAE,CAAA;IACZ,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAA;AACjC,CAAC;AAED;;GAEG;AACI,MAAM,kBAAkB,GAAG,CAAQ,EACxC,IAAI,EACJ,cAAc,EACd,QAAQ,EACR,QAAQ,EACR,kBAAkB,GACe,EAAE,EAAE;IACrC,MAAM,aAAa,GAAG,CAAC,IAAW,EAAqB,EAAE,CACvD,kBAAkB,CAAC,CAAC,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAE,IAAqC,CAAA;IAExF,MAAM,UAAU,GAAG,KAAK,EAAE,KAAc,EAAiB,EAAE;QACzD,IAAI,CAAC;YACH,IAAI,KAAK,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;gBACvB,OAAO,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAA;gBACjC,OAAM;YACR,CAAC;YAED,MAAM,OAAO,GAAG,KAAK,CAAC,GAAG,CAAC,aAAa,CAAC,CAAA;YACxC,WAAW,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAA;YAC9B,OAAO,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC,MAAM,OAAO,KAAK,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,yBAAyB,CAAC,CAAA;QAC3F,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,OAAO,CAAC,KAAK,CAAC,wBAAwB,EAAE,KAAK,CAAC,CAAA;YAC9C,MAAM,IAAI,KAAK,CAAC,eAAe,CAAC,CAAA;QAClC,CAAC;IACH,CAAC,CAAA;IAED,MAAM,SAAS,GAAG,KAAK,IAAI,EAAE;QAC3B,IAAI,CAAC;YACH,MAAM,UAAU,CAAC,IAAI,CAAC,CAAA;QACxB,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,iCAAiC;QACnC,CAAC;IACH,CAAC,CAAA;IAED,MAAM,cAAc,GAAG,KAAK,IAAI,EAAE;QAChC,IAAI,CAAC;YACH,IAAI,CAAC,cAAc,IAAI,cAAc,CAAC,WAAW,CAAC,IAAI,KAAK,CAAC,EAAE,CAAC;gBAC7D,OAAO,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAA;gBAChC,OAAM;YACR,CAAC;YAED,MAAM,aAAa,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,KAAK,EAAE,EAAE;gBAC/C,MAAM,KAAK,GAAG,QAAQ,CAAC,CAAC,CAAC,QAAQ,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAA;gBACrD,OAAO,cAAc,CAAC,WAAW,CAAC,GAAG,CAAC,KAAK,CAAC,CAAA;YAC9C,CAAC,CAAC,CAAA;YAEF,MAAM,UAAU,CAAC,aAAa,CAAC,CAAA;QACjC,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,iCAAiC;QACnC,CAAC;IACH,CAAC,CAAA;IAED,OAAO,EAAE,SAAS,EAAE,cAAc,EAAE,CAAA;AACtC,CAAC,CAAA;AArDY,QAAA,kBAAkB,sBAqD9B","sourcesContent":["import type { SelectionState } from '../types'\n\ntype CsvCompatibleType = string | number | boolean\nexport type CsvExportableData = Record<string, CsvCompatibleType>\n\ntype UseExportCsvStickyOptions<TData> = {\n  data: TData[]\n  selectionState: SelectionState | null\n  fileName: string\n  getRowId?: (row: TData, index: number) => string | number\n  customizeCsvOutput?: (data: TData) => CsvExportableData\n}\n\n/**\n * Simple CSV export utility - generates and downloads CSV files\n */\nfunction downloadCsv(data: CsvExportableData[], fileName: string) {\n  if (data.length === 0) return\n\n  // Get headers from first row\n  const headers = Object.keys(data[0])\n\n  // Build CSV content\n  const csvRows = [\n    headers.join(','),\n    ...data.map(row =>\n      headers.map(header => {\n        const value = row[header]\n        // Escape quotes and wrap in quotes if contains comma or quote\n        const stringValue = String(value ?? '')\n        if (stringValue.includes(',') || stringValue.includes('\"') || stringValue.includes('\\n')) {\n          return `\"${stringValue.replace(/\"/g, '\"\"')}\"`\n        }\n        return stringValue\n      }).join(',')\n    )\n  ]\n\n  const csvContent = csvRows.join('\\n')\n  const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' })\n  const link = document.createElement('a')\n  const url = URL.createObjectURL(blob)\n\n  link.setAttribute('href', url)\n  link.setAttribute('download', `${fileName}.csv`)\n  link.style.visibility = 'hidden'\n  document.body.appendChild(link)\n  link.click()\n  document.body.removeChild(link)\n}\n\n/**\n * Export hook for StickyDataTable that works with SelectionState\n */\nexport const useExportCsvSticky = <TData>({\n  data,\n  selectionState,\n  fileName,\n  getRowId,\n  customizeCsvOutput,\n}: UseExportCsvStickyOptions<TData>) => {\n  const mapDataForCsv = (item: TData): CsvExportableData =>\n    customizeCsvOutput ? customizeCsvOutput(item) : (item as unknown as CsvExportableData)\n\n  const exportData = async (items: TData[]): Promise<void> => {\n    try {\n      if (items.length === 0) {\n        console.warn('No data to export')\n        return\n      }\n\n      const csvData = items.map(mapDataForCsv)\n      downloadCsv(csvData, fileName)\n      console.log(`${items.length} row${items.length === 1 ? '' : 's'} exported successfully!`)\n    } catch (error) {\n      console.error('Failed to export data:', error)\n      throw new Error('Export failed')\n    }\n  }\n\n  const exportAll = async () => {\n    try {\n      await exportData(data)\n    } catch (error) {\n      // Error is handled in exportData\n    }\n  }\n\n  const exportSelected = async () => {\n    try {\n      if (!selectionState || selectionState.selectedIds.size === 0) {\n        console.warn('No rows selected')\n        return\n      }\n\n      const selectedItems = data.filter((row, index) => {\n        const rowId = getRowId ? getRowId(row, index) : index\n        return selectionState.selectedIds.has(rowId)\n      })\n\n      await exportData(selectedItems)\n    } catch (error) {\n      // Error is handled in exportData\n    }\n  }\n\n  return { exportAll, exportSelected }\n}\n"]}
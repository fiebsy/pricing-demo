{"version":3,"file":"use-table-scroll-state.js","sourceRoot":"/","sources":["other-repos/demo-repo/src/components/ui/deprecated/sticky-data-table/hooks/use-table-scroll-state.ts"],"names":[],"mappings":"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","sourcesContent":["import { useCallback, useEffect, useRef, useState } from 'react'\n\nimport { TABLE_CONFIG } from '../config'\n\ninterface UseTableScrollStateProps {\n  headerScrollRef: React.RefObject<HTMLDivElement | null>\n  bodyScrollRef: React.RefObject<HTMLDivElement | null>\n}\n\ninterface ScrollState {\n  scrollLeft: number\n  scrollWidth: number\n  clientWidth: number\n  canScrollLeft: boolean\n  canScrollRight: boolean\n  hasOverflow: boolean\n  showScrollIndicator: boolean\n}\n\nexport function useTableScrollState({ headerScrollRef, bodyScrollRef }: UseTableScrollStateProps) {\n  const [scrollState, setScrollState] = useState<ScrollState>({\n    scrollLeft: 0,\n    scrollWidth: 0,\n    clientWidth: 0,\n    canScrollLeft: false,\n    canScrollRight: false,\n    hasOverflow: false,\n    showScrollIndicator: false,\n  })\n\n  const rafIdRef = useRef<number | null>(null)\n  const tickingRef = useRef(false)\n\n  const calculateScrollState = useCallback((element: HTMLDivElement): ScrollState => {\n    const scrollLeft = element.scrollLeft\n    const scrollWidth = element.scrollWidth\n    const clientWidth = element.clientWidth\n    const hasOverflow = scrollWidth > clientWidth\n    const canScrollRight = scrollLeft + clientWidth < scrollWidth - TABLE_CONFIG.SCROLL_THRESHOLD\n    const canScrollLeft = scrollLeft > 0\n\n    return {\n      scrollLeft,\n      scrollWidth,\n      clientWidth,\n      canScrollLeft,\n      canScrollRight,\n      hasOverflow,\n      showScrollIndicator: hasOverflow && canScrollRight,\n    }\n  }, [])\n\n  const updateScrollState = useCallback(() => {\n    const headerScroll = headerScrollRef.current\n    if (!headerScroll) return\n\n    if (!tickingRef.current) {\n      rafIdRef.current = requestAnimationFrame(() => {\n        const newState = calculateScrollState(headerScroll)\n\n        setScrollState((prev) => {\n          if (\n            prev.scrollLeft === newState.scrollLeft &&\n            prev.canScrollLeft === newState.canScrollLeft &&\n            prev.canScrollRight === newState.canScrollRight &&\n            prev.hasOverflow === newState.hasOverflow &&\n            prev.showScrollIndicator === newState.showScrollIndicator\n          ) {\n            return prev\n          }\n          return newState\n        })\n\n        tickingRef.current = false\n      })\n      tickingRef.current = true\n    }\n  }, [headerScrollRef, calculateScrollState])\n\n  useEffect(() => {\n    const headerScroll = headerScrollRef.current\n    const bodyScroll = bodyScrollRef.current\n\n    if (!headerScroll || !bodyScroll) return\n\n    const handleHeaderScroll = () => {\n      if (bodyScroll.scrollLeft !== headerScroll.scrollLeft) {\n        bodyScroll.scrollLeft = headerScroll.scrollLeft\n      }\n      updateScrollState()\n    }\n\n    const handleBodyScroll = () => {\n      if (headerScroll.scrollLeft !== bodyScroll.scrollLeft) {\n        headerScroll.scrollLeft = bodyScroll.scrollLeft\n      }\n      updateScrollState()\n    }\n\n    const resizeObserver = new ResizeObserver(() => {\n      updateScrollState()\n    })\n\n    resizeObserver.observe(headerScroll)\n    resizeObserver.observe(bodyScroll)\n\n    headerScroll.addEventListener('scroll', handleHeaderScroll, { passive: true })\n    bodyScroll.addEventListener('scroll', handleBodyScroll, { passive: true })\n\n    updateScrollState()\n\n    return () => {\n      if (rafIdRef.current) {\n        cancelAnimationFrame(rafIdRef.current)\n      }\n      headerScroll.removeEventListener('scroll', handleHeaderScroll)\n      bodyScroll.removeEventListener('scroll', handleBodyScroll)\n      resizeObserver.disconnect()\n    }\n  }, [headerScrollRef, bodyScrollRef, updateScrollState])\n\n  const handleScrollLeft = useCallback(() => {\n    if (headerScrollRef.current) {\n      headerScrollRef.current.scrollBy({ left: -TABLE_CONFIG.SCROLL_AMOUNT, behavior: 'smooth' })\n    }\n  }, [headerScrollRef])\n\n  const handleScrollRight = useCallback(() => {\n    if (headerScrollRef.current) {\n      headerScrollRef.current.scrollBy({ left: TABLE_CONFIG.SCROLL_AMOUNT, behavior: 'smooth' })\n    }\n  }, [headerScrollRef])\n\n  return {\n    ...scrollState,\n    handleScrollLeft,\n    handleScrollRight,\n  }\n}\n"]}
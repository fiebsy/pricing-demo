{"version":3,"file":"use-arrow-position.js","sourceRoot":"/","sources":["other-repos/demo-repo/src/components/ui/deprecated/sticky-data-table/hooks/use-arrow-position.ts"],"names":[],"mappings":";AAAA,YAAY,CAAA;;;AAEZ;;;;;;;GAOG;AAEH,iCAA2C;AAC3C,sCAAsD;AAoBtD;;;;;;;;;;;;GAYG;AACH,SAAgB,gBAAgB,CAAC,EAC/B,OAAO,EACP,SAAS,GAAG,qBAAY,CAAC,UAAU,EACnC,kBAAkB,GAAG,qBAAY,CAAC,oBAAoB,EACtD,YAAY,GAAG,qBAAY,CAAC,aAAa,EACzC,WAAW,GAAG,qBAAY,CAAC,YAAY,GACjB;IACtB,MAAM,CAAC,QAAQ,EAAE,WAAW,CAAC,GAAG,IAAA,gBAAQ,EAAgB;QACtD,GAAG,EAAE,GAAG,kBAAkB,IAAI;KAC/B,CAAC,CAAA;IAEF,IAAA,iBAAS,EAAC,GAAG,EAAE;QACb,MAAM,IAAI,GAAG,OAAO,CAAC,OAAO,CAAA;QAC5B,IAAI,CAAC,IAAI;YAAE,OAAM;QAEjB,MAAM,iBAAiB,GAAG,GAAG,EAAE;YAC7B,MAAM,UAAU,GAAG,IAAI,CAAC,YAAY,CAAA;YACpC,MAAM,YAAY,GAAG,qBAAY,CAAC,aAAa,CAAA;YAE/C,iCAAiC;YACjC,MAAM,YAAY,GAAG,UAAU,GAAG,qBAAY,CAAC,qBAAqB,CAAA;YACpE,MAAM,aAAa,GAAG,YAAY;gBAChC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,GAAG,qBAAY,CAAC,4BAA4B,CAAC;gBACpE,CAAC,CAAC,kBAAkB,CAAA;YAEtB,uBAAuB;YACvB,MAAM,SAAS,GAAG,EAAE,CAAA;YACpB,MAAM,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE,UAAU,GAAG,WAAW,GAAG,YAAY,CAAC,CAAA;YAC9E,MAAM,aAAa,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE,IAAI,CAAC,GAAG,CAAC,aAAa,EAAE,SAAS,CAAC,CAAC,CAAA;YAE7E,mDAAmD;YACnD,MAAM,QAAQ,GAAG,YAAY,GAAG,aAAa,CAAA;YAE7C,WAAW,CAAC,EAAE,GAAG,EAAE,GAAG,QAAQ,IAAI,EAAE,CAAC,CAAA;QACvC,CAAC,CAAA;QAED,sBAAsB;QACtB,iBAAiB,EAAE,CAAA;QAEnB,yBAAyB;QACzB,MAAM,cAAc,GAAG,IAAI,cAAc,CAAC,GAAG,EAAE;YAC7C,qBAAqB,CAAC,iBAAiB,CAAC,CAAA;QAC1C,CAAC,CAAC,CAAA;QACF,cAAc,CAAC,OAAO,CAAC,IAAI,CAAC,CAAA;QAE5B,2BAA2B;QAC3B,MAAM,YAAY,GAAG,GAAG,EAAE,CAAC,qBAAqB,CAAC,iBAAiB,CAAC,CAAA;QACnE,MAAM,YAAY,GAAG,GAAG,EAAE,CAAC,qBAAqB,CAAC,iBAAiB,CAAC,CAAA;QAEnE,MAAM,CAAC,gBAAgB,CAAC,QAAQ,EAAE,YAAY,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAA;QAClE,MAAM,CAAC,gBAAgB,CAAC,QAAQ,EAAE,YAAY,CAAC,CAAA;QAE/C,OAAO,GAAG,EAAE;YACV,cAAc,CAAC,UAAU,EAAE,CAAA;YAC3B,MAAM,CAAC,mBAAmB,CAAC,QAAQ,EAAE,YAAY,CAAC,CAAA;YAClD,MAAM,CAAC,mBAAmB,CAAC,QAAQ,EAAE,YAAY,CAAC,CAAA;QACpD,CAAC,CAAA;IACH,CAAC,EAAE,CAAC,OAAO,EAAE,SAAS,EAAE,kBAAkB,EAAE,YAAY,EAAE,WAAW,CAAC,CAAC,CAAA;IAEvE,OAAO,QAAQ,CAAA;AACjB,CAAC;AA5DD,4CA4DC","sourcesContent":["'use client'\n\n/**\n * StickyDataTable V2 - Arrow Position Hook\n *\n * Calculates dynamic positioning for navigation arrows.\n * Adapts to table height for optimal placement.\n *\n * @module hooks/use-arrow-position\n */\n\nimport { useState, useEffect } from 'react'\nimport { TABLE_CONFIG, ARROW_CONFIG } from '../config'\n\ninterface ArrowPosition {\n  top?: string\n  bottom?: string\n}\n\ninterface UseArrowPositionProps {\n  /** Reference to table body element */\n  bodyRef: React.RefObject<HTMLDivElement | null>\n  /** Header gap offset */\n  headerGap?: number\n  /** Preferred top offset for normal tables */\n  preferredTopOffset?: number\n  /** Minimum offset from bottom */\n  bottomOffset?: number\n  /** Height of arrow button */\n  arrowHeight?: number\n}\n\n/**\n * Hook for calculating arrow positioning\n *\n * Strategy:\n * 1. Short tables (< 200px): Use percentage (40%) positioning\n * 2. Normal tables: Use fixed offset (default 300px)\n * 3. Clamp to ensure arrows stay within bounds\n *\n * Features:\n * - Responsive to table height changes\n * - ResizeObserver for dynamic updates\n * - Scroll-aware positioning\n */\nexport function useArrowPosition({\n  bodyRef,\n  headerGap = TABLE_CONFIG.HEADER_GAP,\n  preferredTopOffset = ARROW_CONFIG.PREFERRED_TOP_OFFSET,\n  bottomOffset = ARROW_CONFIG.BOTTOM_OFFSET,\n  arrowHeight = ARROW_CONFIG.ARROW_HEIGHT,\n}: UseArrowPositionProps): ArrowPosition {\n  const [position, setPosition] = useState<ArrowPosition>({\n    top: `${preferredTopOffset}px`,\n  })\n\n  useEffect(() => {\n    const body = bodyRef.current\n    if (!body) return\n\n    const calculatePosition = () => {\n      const bodyHeight = body.scrollHeight\n      const headerHeight = TABLE_CONFIG.HEADER_HEIGHT\n\n      // Strategy based on table height\n      const isShortTable = bodyHeight < ARROW_CONFIG.SHORT_TABLE_THRESHOLD\n      const offsetFromTop = isShortTable\n        ? Math.round(bodyHeight * ARROW_CONFIG.SHORT_TABLE_POSITION_PERCENT)\n        : preferredTopOffset\n\n      // Clamp to valid range\n      const minOffset = 60\n      const maxOffset = Math.max(minOffset, bodyHeight - arrowHeight - bottomOffset)\n      const clampedOffset = Math.max(minOffset, Math.min(offsetFromTop, maxOffset))\n\n      // Final position relative to sticky header wrapper\n      const arrowTop = headerHeight + clampedOffset\n\n      setPosition({ top: `${arrowTop}px` })\n    }\n\n    // Initial calculation\n    calculatePosition()\n\n    // Watch for size changes\n    const resizeObserver = new ResizeObserver(() => {\n      requestAnimationFrame(calculatePosition)\n    })\n    resizeObserver.observe(body)\n\n    // Watch for scroll changes\n    const handleScroll = () => requestAnimationFrame(calculatePosition)\n    const handleResize = () => requestAnimationFrame(calculatePosition)\n\n    window.addEventListener('scroll', handleScroll, { passive: true })\n    window.addEventListener('resize', handleResize)\n\n    return () => {\n      resizeObserver.disconnect()\n      window.removeEventListener('scroll', handleScroll)\n      window.removeEventListener('resize', handleResize)\n    }\n  }, [bodyRef, headerGap, preferredTopOffset, bottomOffset, arrowHeight])\n\n  return position\n}\n\n\n"]}
{"version":3,"file":"use-table-filters.js","sourceRoot":"/","sources":["other-repos/demo-repo/src/components/ui/deprecated/sticky-data-table/hooks/use-table-filters.ts"],"names":[],"mappings":"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","sourcesContent":["'use client'\n\nimport { useCallback, useMemo, useState } from 'react'\n\nimport type { ActiveFilter, FilterCategory, FilterState, FilterValue } from '../filter-types'\n\n/**\n * Generate a unique ID for filter instances\n */\nfunction generateFilterId(): string {\n  return `filter-${Date.now()}-${Math.random().toString(36).slice(2, 9)}`\n}\n\n/**\n * Props for the useTableFilters hook\n */\nexport interface UseTableFiltersProps {\n  /** Available filter categories */\n  categories: FilterCategory[]\n  /** Initial filters to apply */\n  initialFilters?: ActiveFilter[]\n  /** Callback when filters change */\n  onFiltersChange?: (filters: ActiveFilter[]) => void\n}\n\n/**\n * Return type for the useTableFilters hook\n */\nexport interface UseTableFiltersReturn {\n  /** Current filter state */\n  filterState: FilterState\n  /** Add a new filter */\n  addFilter: (filter: Omit<ActiveFilter, 'id'>) => void\n  /** Remove a filter by ID */\n  removeFilter: (filterId: string) => void\n  /** Update an existing filter's value */\n  updateFilter: (filterId: string, value: FilterValue, displayValue: string) => void\n  /** Clear all filters */\n  clearFilters: () => void\n  /** Get filters for a specific category */\n  getFiltersForCategory: (categoryKey: string) => ActiveFilter[]\n  /** Check if a category has active filters */\n  hasFilterForCategory: (categoryKey: string) => boolean\n  /** Apply filters to data (generic filter function) */\n  applyFilters: <T extends Record<string, any>>(data: T[]) => T[]\n}\n\n/**\n * Hook for managing table filter state\n *\n * Provides a complete filter management system including:\n * - Adding, removing, and updating filters\n * - Filter state with computed properties\n * - Generic data filtering function\n *\n * @example\n * ```tsx\n * const { filterState, addFilter, removeFilter, clearFilters, applyFilters } = useTableFilters({\n *   categories: filterCategories,\n *   onFiltersChange: (filters) => console.log('Filters changed:', filters)\n * })\n *\n * // Apply filters to data\n * const filteredData = applyFilters(rawData)\n * ```\n */\nexport function useTableFilters({\n  categories,\n  initialFilters = [],\n  onFiltersChange,\n}: UseTableFiltersProps): UseTableFiltersReturn {\n  // Internal filter storage\n  const [filtersMap, setFiltersMap] = useState<Map<string, ActiveFilter>>(() => {\n    const map = new Map<string, ActiveFilter>()\n    initialFilters.forEach((filter) => {\n      map.set(filter.id, filter)\n    })\n    return map\n  })\n\n  // Computed filter state\n  const filterState: FilterState = useMemo(() => {\n    const activeFilters = Array.from(filtersMap.values())\n    return {\n      filters: filtersMap,\n      activeFilters,\n      hasFilters: activeFilters.length > 0,\n      filterCount: activeFilters.length,\n    }\n  }, [filtersMap])\n\n  // Add a new filter\n  const addFilter = useCallback(\n    (filter: Omit<ActiveFilter, 'id'>) => {\n      const id = generateFilterId()\n      const newFilter: ActiveFilter = { ...filter, id }\n\n      setFiltersMap((prev) => {\n        const next = new Map(prev)\n        next.set(id, newFilter)\n        return next\n      })\n\n      onFiltersChange?.(Array.from(filtersMap.values()).concat(newFilter))\n    },\n    [onFiltersChange, filtersMap]\n  )\n\n  // Remove a filter by ID\n  const removeFilter = useCallback(\n    (filterId: string) => {\n      setFiltersMap((prev) => {\n        const next = new Map(prev)\n        next.delete(filterId)\n        onFiltersChange?.(Array.from(next.values()))\n        return next\n      })\n    },\n    [onFiltersChange]\n  )\n\n  // Update an existing filter\n  const updateFilter = useCallback(\n    (filterId: string, value: FilterValue, displayValue: string) => {\n      setFiltersMap((prev) => {\n        const existingFilter = prev.get(filterId)\n        if (!existingFilter) return prev\n\n        const next = new Map(prev)\n        next.set(filterId, {\n          ...existingFilter,\n          value,\n          displayValue,\n        })\n        onFiltersChange?.(Array.from(next.values()))\n        return next\n      })\n    },\n    [onFiltersChange]\n  )\n\n  // Clear all filters\n  const clearFilters = useCallback(() => {\n    setFiltersMap(new Map())\n    onFiltersChange?.([])\n  }, [onFiltersChange])\n\n  // Get filters for a specific category\n  const getFiltersForCategory = useCallback(\n    (categoryKey: string): ActiveFilter[] => {\n      return filterState.activeFilters.filter((f) => f.categoryKey === categoryKey)\n    },\n    [filterState.activeFilters]\n  )\n\n  // Check if a category has active filters\n  const hasFilterForCategory = useCallback(\n    (categoryKey: string): boolean => {\n      return filterState.activeFilters.some((f) => f.categoryKey === categoryKey)\n    },\n    [filterState.activeFilters]\n  )\n\n  // Generic filter application function\n  const applyFilters = useCallback(\n    <T extends Record<string, any>>(data: T[]): T[] => {\n      if (!filterState.hasFilters) return data\n\n      return data.filter((row) => {\n        // All filters must pass (AND logic)\n        return filterState.activeFilters.every((filter) => {\n          const category = categories.find((c) => c.key === filter.categoryKey)\n          if (!category) return true\n\n          const rowValue = row[filter.categoryKey]\n          const filterValue = filter.value\n\n          switch (filter.operator) {\n            case 'equals':\n              return rowValue === filterValue\n\n            case 'not_equals':\n              return rowValue !== filterValue\n\n            case 'contains':\n              if (typeof rowValue === 'string' && typeof filterValue === 'string') {\n                return rowValue.toLowerCase().includes(filterValue.toLowerCase())\n              }\n              return false\n\n            case 'not_contains':\n              if (typeof rowValue === 'string' && typeof filterValue === 'string') {\n                return !rowValue.toLowerCase().includes(filterValue.toLowerCase())\n              }\n              return true\n\n            case 'greater_than':\n              if (typeof rowValue === 'number' && typeof filterValue === 'number') {\n                return rowValue > filterValue\n              }\n              if (rowValue instanceof Date && filterValue instanceof Date) {\n                return rowValue > filterValue\n              }\n              // Handle timestamp strings or numbers\n              if (typeof filterValue === 'number') {\n                const rowDate = new Date(rowValue)\n                const filterDate = new Date(filterValue)\n                return rowDate > filterDate\n              }\n              return false\n\n            case 'less_than':\n              if (typeof rowValue === 'number' && typeof filterValue === 'number') {\n                return rowValue < filterValue\n              }\n              if (rowValue instanceof Date && filterValue instanceof Date) {\n                return rowValue < filterValue\n              }\n              // Handle timestamp strings or numbers\n              if (typeof filterValue === 'number') {\n                const rowDate = new Date(rowValue)\n                const filterDate = new Date(filterValue)\n                return rowDate < filterDate\n              }\n              return false\n\n            case 'between':\n              if (Array.isArray(filterValue) && filterValue.length === 2) {\n                const [min, max] = filterValue\n                if (typeof rowValue === 'number' && typeof min === 'number' && typeof max === 'number') {\n                  return rowValue >= min && rowValue <= max\n                }\n              }\n              return false\n\n            case 'in':\n              if (Array.isArray(filterValue)) {\n                return (filterValue as (string | number)[]).includes(rowValue as string | number)\n              }\n              return false\n\n            case 'not_in':\n              if (Array.isArray(filterValue)) {\n                return !(filterValue as (string | number)[]).includes(rowValue as string | number)\n              }\n              return true\n\n            case 'is_empty':\n              return rowValue === null || rowValue === undefined || rowValue === ''\n\n            case 'is_not_empty':\n              return rowValue !== null && rowValue !== undefined && rowValue !== ''\n\n            default:\n              return true\n          }\n        })\n      })\n    },\n    [filterState, categories]\n  )\n\n  return {\n    filterState,\n    addFilter,\n    removeFilter,\n    updateFilter,\n    clearFilters,\n    getFiltersForCategory,\n    hasFilterForCategory,\n    applyFilters,\n  }\n}\n\n\n\n\n\n\n\n\n\n\n\n"]}
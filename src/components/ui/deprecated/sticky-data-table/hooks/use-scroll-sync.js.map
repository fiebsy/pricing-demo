{"version":3,"file":"use-scroll-sync.js","sourceRoot":"/","sources":["other-repos/demo-repo/src/components/ui/deprecated/sticky-data-table/hooks/use-scroll-sync.ts"],"names":[],"mappings":"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","sourcesContent":["'use client'\n\n/**\n * StickyDataTable V2 - Scroll Sync Hook\n *\n * Synchronizes horizontal scroll between header and body containers.\n * Uses requestAnimationFrame for smooth performance.\n *\n * @module hooks/use-scroll-sync\n */\n\nimport { useState, useEffect, useCallback, useRef } from 'react'\nimport { TABLE_CONFIG, ANIMATION_CONFIG } from '../config'\nimport type { ScrollState } from '../types'\n\ninterface UseScrollSyncProps {\n  headerRef: React.RefObject<HTMLDivElement | null>\n  bodyRef: React.RefObject<HTMLDivElement | null>\n}\n\ninterface UseScrollSyncReturn extends ScrollState {\n  handleScrollLeft: () => void\n  handleScrollRight: () => void\n}\n\n/**\n * Calculate scroll state from a scroll container\n */\nfunction calculateScrollState(element: HTMLDivElement): ScrollState {\n  const { scrollLeft, scrollWidth, clientWidth } = element\n  const hasOverflow = scrollWidth > clientWidth\n  const canScrollRight = scrollLeft + clientWidth < scrollWidth - TABLE_CONFIG.SCROLL_THRESHOLD\n  const canScrollLeft = scrollLeft > 0\n\n  return {\n    canScrollLeft,\n    canScrollRight,\n    showScrollIndicator: hasOverflow && canScrollRight,\n  }\n}\n\n/**\n * Hook for synchronized scrolling between header and body\n *\n * Features:\n * - Bidirectional scroll sync\n * - RAF-throttled state updates\n * - ResizeObserver for dimension changes\n * - Sub-pixel scroll handling\n */\nexport function useScrollSync({\n  headerRef,\n  bodyRef,\n}: UseScrollSyncProps): UseScrollSyncReturn {\n  const [scrollState, setScrollState] = useState<ScrollState>({\n    canScrollLeft: false,\n    canScrollRight: false,\n    showScrollIndicator: false,\n  })\n\n  // Refs for RAF throttling\n  const rafIdRef = useRef<number | null>(null)\n  const tickingRef = useRef(false)\n\n  // Update scroll state with RAF throttling\n  const updateScrollState = useCallback(() => {\n    const header = headerRef.current\n    if (!header) return\n\n    if (!tickingRef.current) {\n      rafIdRef.current = requestAnimationFrame(() => {\n        const newState = calculateScrollState(header)\n\n        // Only update state if values changed\n        setScrollState((prev) => {\n          if (\n            prev.canScrollLeft === newState.canScrollLeft &&\n            prev.canScrollRight === newState.canScrollRight &&\n            prev.showScrollIndicator === newState.showScrollIndicator\n          ) {\n            return prev\n          }\n          return newState\n        })\n\n        tickingRef.current = false\n      })\n      tickingRef.current = true\n    }\n  }, [headerRef])\n\n  // Set up scroll synchronization\n  useEffect(() => {\n    const header = headerRef.current\n    const body = bodyRef.current\n\n    if (!header || !body) return\n\n    // Sync body scroll when header scrolls\n    const handleHeaderScroll = () => {\n      // Skip sub-pixel differences\n      if (Math.abs(body.scrollLeft - header.scrollLeft) < ANIMATION_CONFIG.SCROLL_SYNC_THRESHOLD) {\n        return\n      }\n      body.scrollLeft = header.scrollLeft\n      updateScrollState()\n    }\n\n    // Sync header scroll when body scrolls\n    const handleBodyScroll = () => {\n      // Skip sub-pixel differences\n      if (Math.abs(header.scrollLeft - body.scrollLeft) < ANIMATION_CONFIG.SCROLL_SYNC_THRESHOLD) {\n        return\n      }\n      header.scrollLeft = body.scrollLeft\n      updateScrollState()\n    }\n\n    // Watch for size changes\n    const resizeObserver = new ResizeObserver(() => {\n      updateScrollState()\n    })\n\n    resizeObserver.observe(header)\n    resizeObserver.observe(body)\n\n    // Add scroll listeners with passive for better performance\n    header.addEventListener('scroll', handleHeaderScroll, { passive: true })\n    body.addEventListener('scroll', handleBodyScroll, { passive: true })\n\n    // Initial calculation\n    updateScrollState()\n\n    return () => {\n      if (rafIdRef.current) {\n        cancelAnimationFrame(rafIdRef.current)\n      }\n      header.removeEventListener('scroll', handleHeaderScroll)\n      body.removeEventListener('scroll', handleBodyScroll)\n      resizeObserver.disconnect()\n    }\n  }, [headerRef, bodyRef, updateScrollState])\n\n  // Arrow click handlers\n  const handleScrollLeft = useCallback(() => {\n    headerRef.current?.scrollBy({\n      left: -TABLE_CONFIG.SCROLL_AMOUNT,\n      behavior: 'smooth',\n    })\n  }, [headerRef])\n\n  const handleScrollRight = useCallback(() => {\n    headerRef.current?.scrollBy({\n      left: TABLE_CONFIG.SCROLL_AMOUNT,\n      behavior: 'smooth',\n    })\n  }, [headerRef])\n\n  return {\n    ...scrollState,\n    handleScrollLeft,\n    handleScrollRight,\n  }\n}\n\n\n"]}
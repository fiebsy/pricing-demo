{"version":3,"file":"header-cell.js","sourceRoot":"/","sources":["other-repos/demo-repo/src/components/ui/deprecated/sticky-data-table/components/table-header/header-cell.tsx"],"names":[],"mappings":"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","sourcesContent":["'use client'\n\n/**\n * StickyDataTable V2 - HeaderCell Component\n *\n * Individual header cell with sort controls, drag handle, and styling.\n *\n * @module components/table-header/header-cell\n */\n\nimport { memo } from 'react'\nimport { Checkbox } from '@/components/ui/base/primitives/checkbox'\nimport {\n  getAlignmentClasses,\n  getCellBorder,\n  getStickyColumnBorder,\n  getColumnAnimationClass,\n  getColumnAnimationDataAttrs,\n  getCellStyle,\n  getHeaderStickyBackground,\n  getCellPadding,\n} from '../../utils'\nimport { DragHandleIcon, SortIndicator } from './icons'\nimport type { HeaderCellProps } from './types'\n\n/**\n * Header cell component with optional drag-and-drop support\n */\nexport const HeaderCell = memo(function HeaderCell({\n  column,\n  label,\n  stickyState,\n  borderConfig,\n  backgroundConfig,\n  sortColumn,\n  sortDirection,\n  onSort,\n  leavingColumnKeys,\n  enteringColumnKeys,\n  columnChange,\n  selectionState,\n  // Pointer drag props\n  isDraggable = false,\n  isDragging = false,\n  shiftDirection = null,\n  inlineOffset = null,\n  shiftAmount = 4,\n  isInlineMode = false,\n  onPointerDown,\n}: HeaderCellProps) {\n  // Check if this is the actively dragged cell (has inline offset)\n  const isDraggedCell = inlineOffset !== null\n  const isSortable = column.sortable ?? false\n  const isCurrentlySorted = sortColumn === column.key\n\n  // Compute alignment (force right for last column)\n  const effectiveAlign = column.isLast ? 'right' : column.align\n  const alignment = getAlignmentClasses(effectiveAlign)\n\n  // Compute borders\n  const stickyBorder = getStickyColumnBorder(column, stickyState, borderConfig)\n  const shouldSuppressRightBorder = column.isSticky && column.isFirstSticky && stickyState.useEnhancedStyling\n  const cellBorder = stickyBorder || shouldSuppressRightBorder\n    ? ''\n    : getCellBorder(borderConfig, column.isLast, column.key)\n\n  // Compute animation class and data attributes\n  const animationClass = getColumnAnimationClass(column.key, leavingColumnKeys, columnChange, enteringColumnKeys)\n  const animationDataAttrs = getColumnAnimationDataAttrs(column.key, leavingColumnKeys, enteringColumnKeys)\n\n  // Compute background (solid when dragging, hover state for draggable columns)\n  const baseBackgroundClass = getHeaderStickyBackground(backgroundConfig, stickyState, column.isSticky ?? false)\n  const hoverClass = isDraggable && !isDragging ? 'hover:bg-tertiary' : ''\n  const backgroundClass = isDragging ? 'bg-quaternary' : `${baseBackgroundClass} ${hoverClass}`\n\n  // Compute padding\n  const paddingClass = getCellPadding(column.isFirst, column.isLast)\n\n  // Compute style (no transform on cell - only content shifts in floating mode)\n  const baseStyle = getCellStyle(column, stickyState)\n\n  // Calculate cell-level transform for inline mode\n  // In inline mode: dragged cell follows cursor, neighbor cells slide to make room\n  // In floating mode: no cell transforms, only content shifts for drop indicator\n  const getCellTransform = (): string | undefined => {\n    if (isDraggedCell) {\n      // Dragged cell follows cursor\n      return `translateX(${inlineOffset}px)`\n    }\n    if (isInlineMode && shiftDirection) {\n      // Neighbor cells slide to make room (inline mode only)\n      return shiftDirection === 'right'\n        ? `translateX(${shiftAmount}px)`\n        : `translateX(-${shiftAmount}px)`\n    }\n    return undefined\n  }\n\n  const cellTransform = getCellTransform()\n\n  // Build cell style based on drag state\n  // For shifting cells: add right border if cell is \"last\" (normally has no right border)\n  // This prevents a gap at the table edge during drag preview\n  const shiftingCellBorderFix: React.CSSProperties = column.isLast && shiftDirection\n    ? { borderRight: '1px solid var(--border-color-secondary)' }\n    : {}\n\n  const cellStyle: React.CSSProperties = isDraggedCell\n    ? {\n        ...baseStyle,\n        transform: cellTransform,\n        zIndex: 50,\n        boxShadow: 'var(--shine-3), var(--shadow-md)',\n        border: 'none',\n        borderColor: 'transparent',\n        transition: 'box-shadow 150ms ease-out',\n      }\n    : isInlineMode && shiftDirection\n      ? {\n          ...baseStyle,\n          ...shiftingCellBorderFix,\n          transform: cellTransform,\n          transition: 'transform 150ms ease-out',\n        }\n      : baseStyle\n\n  // Content shift transform - ONLY used in floating mode\n  // In floating mode: shifts content to make room for drop indicator (small gap)\n  // In inline mode: no content transform needed, cell itself moves\n  const contentTransform = !isInlineMode && shiftDirection\n    ? shiftDirection === 'right'\n      ? `translateX(${shiftAmount}px)`\n      : `translateX(-${shiftAmount}px)`\n    : 'translateX(0)'\n\n  // Checkbox column handling\n  const isCheckboxColumn = column.key === '__checkbox'\n\n  // Tabular numbers (disabled by default, enable for numeric columns)\n  const useTabularNums = column.useTabularNums ?? false\n\n  // Determine drag handle position (opposite to label alignment)\n  const dragHandlePosition = effectiveAlign === 'right' ? 'left' : 'right'\n\n  // Compute opacity class for label and sort icon only\n  const contentOpacityClass = isDragging\n    ? 'opacity-50'\n    : isSortable\n      ? isCurrentlySorted\n        ? 'group-hover:opacity-80 group-active:opacity-60' // Active sort: full opacity, subtle hover\n        : 'opacity-60 group-hover:opacity-100 group-active:opacity-80' // Sortable but inactive\n      : 'opacity-60' // Non-sortable\n\n  return (\n    <div\n      className={`${backgroundClass} box-border ${cellBorder} ${stickyBorder} ${animationClass} group relative`}\n      style={cellStyle}\n      data-column-key={column.key}\n      onClick={isSortable && !isCheckboxColumn ? () => onSort(column.key) : undefined}\n      {...animationDataAttrs}\n    >\n      {/* Drag handle - 40px touch target, icon centered inside */}\n      {isDraggable && (\n        <div\n          className={`\n            absolute top-1/2 -translate-y-1/2 z-10\n            ${dragHandlePosition === 'left' ? '-left-2' : '-right-2'}\n            w-10 h-10 flex items-center justify-center\n            cursor-grab active:cursor-grabbing\n            opacity-0 transition-opacity duration-150\n            group-hover:opacity-70\n            text-primary\n            touch-none\n          `}\n          onPointerDown={onPointerDown}\n          aria-hidden=\"true\"\n        >\n          <DragHandleIcon />\n        </div>\n      )}\n\n      <div\n        className={`\n          ${paddingClass}\n          flex h-full items-center\n          ${alignment.flexJustify}\n          text-tertiary text-xs font-medium\n          ${alignment.textAlign}\n          ${isSortable ? 'cursor-pointer' : 'cursor-default'}\n          whitespace-nowrap\n          ${useTabularNums ? 'tabular-nums' : ''}\n        `}\n        style={{\n          transform: contentTransform,\n          transition: 'transform 150ms ease-out',\n        }}\n      >\n        {isCheckboxColumn && selectionState ? (\n          <Checkbox\n            isSelected={selectionState.isAllSelected}\n            isIndeterminate={selectionState.isSomeSelected}\n            onChange={(isSelected) => {\n              if (isSelected) {\n                selectionState.selectAllRows()\n              } else {\n                selectionState.deselectAllRows()\n              }\n            }}\n            aria-label=\"Select all\"\n            size=\"sm\"\n          />\n        ) : (\n          <>\n            {/* Sort icon on left for right-aligned columns */}\n            {isSortable && column.align === 'right' && (\n              <span className={`mr-1 transition-opacity ${contentOpacityClass}`}>\n                <SortIndicator isActive={isCurrentlySorted} direction={sortDirection} />\n              </span>\n            )}\n\n            <span className={`min-w-0 transition-opacity ${contentOpacityClass}`}>{label}</span>\n\n            {/* Sort icon on right for left/center-aligned columns */}\n            {isSortable && column.align !== 'right' && (\n              <span className={`ml-1 transition-opacity ${contentOpacityClass}`}>\n                <SortIndicator isActive={isCurrentlySorted} direction={sortDirection} />\n              </span>\n            )}\n          </>\n        )}\n      </div>\n    </div>\n  )\n})\n"]}
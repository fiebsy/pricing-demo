{"version":3,"file":"table-row.js","sourceRoot":"/","sources":["other-repos/demo-repo/src/components/ui/deprecated/sticky-data-table/components/table-row.tsx"],"names":[],"mappings":"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","sourcesContent":["'use client'\n\n/**\n * StickyDataTable V2 - TableRow Component\n *\n * Memoized row component with optimized rendering.\n * Uses CSS Grid for perfect column alignment.\n *\n * ## ⚠️ STYLING RULES (see docs/STYLING-GUIDE.md)\n *\n * renderCell content MUST follow these patterns:\n * - Standard text: `text-sm font-normal text-primary`\n * - Descriptions: `text-xs font-normal text-secondary`\n * - Status codes: `text-xs font-mono text-tertiary`\n * - Status badges: Use Untitled UI Badge component\n *\n * Forbidden in renderCell:\n * - Bold fonts, decorative colors, arbitrary sizes\n *\n * @module components/table-row\n */\n\nimport { memo, useCallback, type ReactNode, type MouseEvent } from 'react'\nimport * as React from 'react'\nimport { Checkbox } from '@/components/ui/base/primitives/checkbox'\nimport type { ComputedColumn, StickyState, BorderConfig, BackgroundConfig, ColumnChange, SelectionState } from '../types'\nimport { generateGridTemplate, getRowBorder } from '../utils'\nimport { TableCell } from './table-cell'\nimport { ANIMATION_CONFIG, TABLE_CONFIG } from '../config'\n\ninterface TableRowProps<T = Record<string, unknown>> {\n  /** Row data */\n  row: T\n  /** Row index */\n  index: number\n  /** Row ID for selection */\n  rowId: string | number\n  /** Sticky columns */\n  stickyColumns: ComputedColumn[]\n  /** Scrollable columns */\n  scrollableColumns: ComputedColumn[]\n  /** All columns (for rendering) */\n  allColumns: ComputedColumn[]\n  /** Sticky state */\n  stickyState: StickyState\n  /** Border configuration */\n  borderConfig: BorderConfig\n  /** Background configuration */\n  backgroundConfig: BackgroundConfig\n  /** Row height override */\n  rowHeight?: number\n  /** Cell render function */\n  renderCell: (columnKey: string, row: T, index: number) => ReactNode\n  /** Row click handler */\n  onRowClick?: (row: T, index: number) => void\n  /** Column change for animation */\n  columnChange: ColumnChange | null\n  /** Leaving column keys */\n  leavingColumnKeys: Set<string>\n  /** Entering column keys */\n  enteringColumnKeys: Set<string>\n  /** Selection state */\n  selectionState: SelectionState | null\n  // ---- Drag State for inline column shifting ----\n  /** Get shift direction for a column */\n  getShiftDirection?: (columnKey: string, colIndex: number) => 'left' | 'right' | null\n  /** Get inline offset for dragged column */\n  getInlineOffset?: (columnKey: string) => number | null\n  /** Get shift amount in pixels */\n  getShiftAmount?: () => number\n  /** Whether in inline drag mode */\n  isInlineDragMode?: boolean\n  /** Key of the column being dragged */\n  draggedColumnKey?: string | null\n}\n\n/**\n * Memoized table row component\n *\n * Features:\n * - CSS Grid layout matching header\n * - Sticky cell positioning\n * - Row hover effects\n * - Checkbox selection\n * - Click handling with exclusions\n */\nfunction TableRowBase<T extends Record<string, unknown>>({\n  row,\n  index,\n  rowId,\n  stickyColumns,\n  scrollableColumns,\n  allColumns,\n  stickyState,\n  borderConfig,\n  backgroundConfig,\n  rowHeight = TABLE_CONFIG.ROW_HEIGHT,\n  renderCell,\n  onRowClick,\n  columnChange,\n  leavingColumnKeys,\n  enteringColumnKeys,\n  selectionState,\n  // Drag state for inline column shifting\n  getShiftDirection,\n  getInlineOffset,\n  getShiftAmount,\n  isInlineDragMode = false,\n  draggedColumnKey,\n}: TableRowProps<T>) {\n  // Generate grid template (matches header)\n  const gridTemplate = generateGridTemplate(stickyColumns, scrollableColumns)\n  const rowBorderClass = getRowBorder(borderConfig)\n\n  // Handle click with exclusions for interactive elements\n  const handleClick = useCallback(\n    (e: MouseEvent) => {\n      // Don't trigger row click for interactive elements\n      const target = e.target as HTMLElement\n      if (\n        target.closest('[data-checkbox-cell]') ||\n        target.closest('[data-actions-cell]') ||\n        target.closest('button') ||\n        target.closest('[role=\"menuitem\"]')\n      ) {\n        e.stopPropagation()\n        return\n      }\n      e.preventDefault()\n      onRowClick?.(row, index)\n    },\n    [row, index, onRowClick]\n  )\n\n  return (\n    <a\n      href=\"#\"\n      className={`grid w-fit min-w-full ${rowBorderClass} hover:bg-secondary no-underline last:border-b-0`}\n      style={{\n        gridTemplateColumns: gridTemplate,\n        height: `${rowHeight}px`,\n        transition: columnChange\n          ? `background-color 0.2s ease, grid-template-columns ${ANIMATION_CONFIG.COLUMN_ANIMATION_DURATION}ms cubic-bezier(0.4, 0, 0.2, 1)`\n          : 'background-color 0.2s ease',\n      }}\n      onClick={handleClick}\n    >\n      {allColumns.map((col, colIndex) => {\n        const isCheckboxColumn = col.key === '__checkbox'\n        const isRankColumn = col.key === 'rank'\n\n        /**\n         * Text size class for cell container\n         *\n         * STYLING RULES (see docs/STYLING-GUIDE.md):\n         * - Default body text: text-sm (14px)\n         * - Rank/compact columns: text-xs (12px)\n         *\n         * Content rendered via renderCell should use:\n         * - Standard text: text-sm font-normal text-primary\n         * - Descriptions: text-xs font-normal text-secondary\n         * - Status codes: text-xs font-mono text-tertiary\n         */\n        const textSizeClass = isRankColumn ? 'text-xs' : 'text-sm'\n\n        // Calculate drag-related props for this cell\n        const shiftDirection = getShiftDirection?.(col.key, colIndex) ?? null\n        const inlineOffset = getInlineOffset?.(col.key) ?? null\n        const shiftAmount = getShiftAmount?.() ?? 0\n        const isDraggedCell = col.key === draggedColumnKey\n\n        // Render checkbox or cell content\n        const cellContent = isCheckboxColumn && selectionState ? (\n          <div data-checkbox-cell=\"true\">\n            <Checkbox\n              isSelected={selectionState.isRowSelected(rowId)}\n              onChange={() => selectionState.toggleRowSelection(rowId)}\n              onClick={(e) => e.stopPropagation()}\n              aria-label=\"Select row\"\n              size=\"sm\"\n            />\n          </div>\n        ) : (\n          renderCell(col.key, row, index)\n        )\n\n        return (\n          <TableCell\n            key={col.key}\n            column={col}\n            stickyState={stickyState}\n            borderConfig={borderConfig}\n            backgroundConfig={backgroundConfig}\n            leavingColumnKeys={leavingColumnKeys}\n            enteringColumnKeys={enteringColumnKeys}\n            columnChange={columnChange}\n            forceRightAlign={col.isLast}\n            textSizeClass={textSizeClass}\n            // Drag state for inline column shifting\n            shiftDirection={shiftDirection}\n            inlineOffset={inlineOffset}\n            shiftAmount={shiftAmount}\n            isInlineDragMode={isInlineDragMode}\n            isDraggedCell={isDraggedCell}\n          >\n            {cellContent}\n          </TableCell>\n        )\n      })}\n    </a>\n  )\n}\n\n// Memoize with custom comparison for performance\nconst MemoizedTableRow = memo(TableRowBase, (prev, next) => {\n  // Quick reference checks\n  if (prev.row !== next.row) return false\n  if (prev.rowId !== next.rowId) return false\n  if (prev.index !== next.index) return false\n  if (prev.stickyState.useEnhancedStyling !== next.stickyState.useEnhancedStyling) return false\n  if (prev.columnChange !== next.columnChange) return false\n  if (prev.leavingColumnKeys !== next.leavingColumnKeys) return false\n  if (prev.enteringColumnKeys !== next.enteringColumnKeys) return false\n\n  // Check border config changes that affect row/cell styling\n  if (prev.borderConfig.showRows !== next.borderConfig.showRows) return false\n  if (prev.borderConfig.rowColor !== next.borderConfig.rowColor) return false\n  if (prev.borderConfig.showCells !== next.borderConfig.showCells) return false\n  if (prev.borderConfig.cellColor !== next.borderConfig.cellColor) return false\n\n  // Check row height changes\n  if (prev.rowHeight !== next.rowHeight) return false\n\n  // Check column changes (length, reference, or properties like align/width)\n  if (prev.allColumns !== next.allColumns) {\n    // If different reference, check if content actually changed\n    if (prev.allColumns.length !== next.allColumns.length) return false\n    // Check key column properties that affect rendering\n    for (let i = 0; i < prev.allColumns.length; i++) {\n      const prevCol = prev.allColumns[i]\n      const nextCol = next.allColumns[i]\n      if (!prevCol || !nextCol) return false\n      if (prevCol.key !== nextCol.key) return false\n      if (prevCol.align !== nextCol.align) return false\n      if (prevCol.width !== nextCol.width) return false\n      if (prevCol.isSticky !== nextCol.isSticky) return false\n    }\n  }\n\n  // Check selection state\n  if (prev.selectionState !== next.selectionState) {\n    if (prev.selectionState?.isRowSelected(prev.rowId) !== next.selectionState?.isRowSelected(next.rowId)) {\n      return false\n    }\n  }\n\n  return true\n})\n\n// Type assertion to preserve generic type information\nexport const TableRow = MemoizedTableRow as <T extends Record<string, unknown>>(\n  props: TableRowProps<T>\n) => React.ReactElement\n;(TableRow as any).displayName = 'TableRow'\n\n\n"]}
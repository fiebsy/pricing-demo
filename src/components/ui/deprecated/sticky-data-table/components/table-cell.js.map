{"version":3,"file":"table-cell.js","sourceRoot":"/","sources":["other-repos/demo-repo/src/components/ui/deprecated/sticky-data-table/components/table-cell.tsx"],"names":[],"mappings":"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","sourcesContent":["'use client'\n\n/**\n * StickyDataTable V2 - TableCell Component\n *\n * Memoized cell component with optimized styling.\n * Handles sticky positioning, borders, and backgrounds.\n *\n * ## ⚠️ STYLING RULES (see docs/STYLING-GUIDE.md)\n *\n * ### Typography Defaults Applied Here:\n * - Header cells: `text-xs font-medium text-tertiary`\n * - Body cells: `text-sm font-normal text-primary`\n *\n * ### Content Styling (applied in renderCell, NOT here):\n * - Standard text: `text-sm font-normal text-primary`\n * - Descriptions: `text-xs font-normal text-secondary`\n * - Status codes/IDs: `text-xs font-mono text-tertiary`\n *\n * ### Forbidden in renderCell:\n * - Bold text (`font-bold`, `font-semibold`)\n * - Decorative colors (`text-blue-500`, etc.)\n * - Arbitrary font sizes (`text-[13px]`, `text-lg`)\n *\n * @module components/table-cell\n */\n\nimport { memo, type ReactNode } from 'react'\nimport type { ComputedColumn, StickyState, BorderConfig, BackgroundConfig, ColumnChange } from '../types'\nimport {\n  getCellPadding,\n  getAlignmentClasses,\n  getCellBorder,\n  getStickyColumnBorder,\n  getColumnAnimationClass,\n  getColumnAnimationDataAttrs,\n  getCellStyle,\n  getRowStickyBackground,\n} from '../utils'\n\n/**\n * TableCell Props\n *\n * @see docs/STYLING-GUIDE.md for complete typography rules\n */\ninterface TableCellProps {\n  /** Column configuration */\n  column: ComputedColumn\n\n  /**\n   * Cell content - rendered by user's renderCell function\n   *\n   * ⚠️ Content MUST follow styling guidelines:\n   * - Body text: `text-sm font-normal text-primary`\n   * - Descriptions: `text-xs font-normal text-secondary`\n   * - Status codes: `text-xs font-mono text-tertiary`\n   * - Status badges: Use Untitled UI Badge component\n   */\n  children: ReactNode\n\n  /** Sticky state for styling */\n  stickyState: StickyState\n\n  /** Border configuration */\n  borderConfig: BorderConfig\n\n  /** Background configuration */\n  backgroundConfig: BackgroundConfig\n\n  /** Set of leaving column keys */\n  leavingColumnKeys: Set<string>\n\n  /** Set of entering column keys */\n  enteringColumnKeys: Set<string>\n\n  /** Current column change */\n  columnChange: ColumnChange | null\n\n  /** Force right alignment (for last column) */\n  forceRightAlign?: boolean\n\n  /**\n   * Text size class for the cell container\n   * @default 'text-sm' for body cells\n   *\n   * This sets the base font size. Content styles are applied\n   * in the renderCell function by the implementer.\n   *\n   * Standard values:\n   * - 'text-sm' (14px) - Default body cell text\n   * - 'text-xs' (12px) - Rank columns, compact displays\n   *\n   * ⚠️ Do not use arbitrary sizes like 'text-[13px]'\n   */\n  textSizeClass?: string\n\n  /**\n   * Is this a header cell\n   * When true, applies header-specific styling:\n   * - `text-tertiary` color\n   * - `font-medium` weight\n   */\n  isHeader?: boolean\n\n  /** Header background getter */\n  getHeaderBackground?: () => string\n  // ---- Drag State for inline column shifting ----\n  /** Direction this cell should shift to make room ('left' | 'right' | null) */\n  shiftDirection?: 'left' | 'right' | null\n  /** Inline mode offset in pixels (only set for the dragged cell in inline mode) */\n  inlineOffset?: number | null\n  /** Shift amount in pixels (full column width for inline mode) */\n  shiftAmount?: number\n  /** Whether in inline drag mode */\n  isInlineDragMode?: boolean\n  /** Whether this is the cell being dragged */\n  isDraggedCell?: boolean\n}\n\n/**\n * Memoized table cell component\n *\n * Renders a single cell with:\n * - Sticky positioning if applicable\n * - Proper borders and backgrounds\n * - Animation classes for column transitions\n * - Responsive text wrapping\n *\n * ## Typography (automatic, based on isHeader):\n * - **Header cells**: `text-xs font-medium text-tertiary`\n * - **Body cells**: `text-sm font-normal text-primary`\n *\n * ## Content Styling (user responsibility in renderCell):\n * See docs/STYLING-GUIDE.md for required patterns\n */\nconst TableCellBase = ({\n  column,\n  children,\n  stickyState,\n  borderConfig,\n  backgroundConfig,\n  leavingColumnKeys,\n  enteringColumnKeys,\n  columnChange,\n  forceRightAlign = false,\n  textSizeClass = 'text-sm',\n  isHeader = false,\n  getHeaderBackground,\n  // Drag state for inline column shifting\n  shiftDirection = null,\n  inlineOffset = null,\n  shiftAmount = 0,\n  isInlineDragMode = false,\n  isDraggedCell = false,\n}: TableCellProps) => {\n  // Compute alignment\n  const effectiveAlign = forceRightAlign ? 'right' : column.align\n  const alignment = getAlignmentClasses(effectiveAlign)\n\n  // Compute borders\n  const stickyBorder = getStickyColumnBorder(column, stickyState, borderConfig)\n  const shouldSuppressRightBorder = column.isSticky && column.isFirstSticky && stickyState.useEnhancedStyling\n  const cellBorder = stickyBorder || shouldSuppressRightBorder\n    ? ''\n    : getCellBorder(borderConfig, column.isLast, column.key)\n\n  // Compute animation class (legacy support) and data attributes (new)\n  const animationClass = getColumnAnimationClass(column.key, leavingColumnKeys, columnChange, enteringColumnKeys)\n  const animationDataAttrs = getColumnAnimationDataAttrs(column.key, leavingColumnKeys, enteringColumnKeys)\n\n  // Compute padding\n  const paddingClass = getCellPadding(column.isFirst, column.isLast)\n\n  // Compute background\n  const backgroundClass = isHeader && getHeaderBackground\n    ? getHeaderBackground()\n    : getRowStickyBackground(backgroundConfig, stickyState, column.isSticky ?? false)\n\n  // Compute base style\n  const baseStyle = getCellStyle(column, stickyState)\n\n  // Calculate cell-level transform for inline drag mode\n  // In inline mode: dragged cell follows cursor, neighbor cells slide to make room\n  const getCellTransform = (): string | undefined => {\n    if (isDraggedCell && inlineOffset !== null) {\n      // Dragged cell follows cursor\n      return `translateX(${inlineOffset}px)`\n    }\n    if (isInlineDragMode && shiftDirection) {\n      // Neighbor cells slide to make room (inline mode only)\n      return shiftDirection === 'right'\n        ? `translateX(${shiftAmount}px)`\n        : `translateX(-${shiftAmount}px)`\n    }\n    return undefined\n  }\n\n  const cellTransform = getCellTransform()\n\n  // Build cell style based on drag state\n  // For shifting cells: add right border if cell is \"last\" (normally has no right border)\n  // This prevents a gap at the table edge during drag preview\n  const shiftingCellBorderFix: React.CSSProperties = column.isLast && shiftDirection\n    ? { borderRight: '1px solid var(--border-color-secondary)' }\n    : {}\n\n  const style: React.CSSProperties = isDraggedCell && inlineOffset !== null\n    ? {\n        ...baseStyle,\n        transform: cellTransform,\n        zIndex: 50,\n        transition: 'none', // No transition for dragged cell - follows cursor directly\n      }\n    : isInlineDragMode && shiftDirection\n      ? {\n          ...baseStyle,\n          ...shiftingCellBorderFix,\n          transform: cellTransform,\n          transition: 'transform 150ms ease-out',\n        }\n      : baseStyle\n\n  // Text wrapping and line clamping\n  const allowTextWrap = column.allowTextWrap ?? false\n  const maxLines = column.maxLines\n\n  // Determine text overflow behavior:\n  // 1. maxLines set: wrap text, clamp at N lines with ellipsis\n  // 2. allowTextWrap: wrap text, no limit\n  // 3. default: single line, truncate with ellipsis\n  const hasLineClamping = maxLines !== undefined && maxLines > 0\n  const shouldWrap = hasLineClamping || allowTextWrap\n\n  // Tabular numbers (enabled by default for better number alignment)\n  // Set useTabularNums: false to disable for text-only columns\n  const useTabularNums = column.useTabularNums ?? true\n\n  return (\n    <div\n      className={`${backgroundClass} box-border ${cellBorder} ${stickyBorder} ${animationClass}`}\n      style={style}\n      {...animationDataAttrs}\n    >\n      {/*\n       * Cell content wrapper with typography styles\n       *\n       * TYPOGRAPHY RULES (see docs/STYLING-GUIDE.md):\n       * - Headers: text-xs font-medium text-tertiary (automatic)\n       * - Body: text-sm font-normal text-primary (automatic)\n       *\n       * Content rendered via renderCell should use:\n       * - Standard text: text-sm font-normal text-primary\n       * - Descriptions: text-xs font-normal text-secondary\n       * - Status codes: text-xs font-mono text-tertiary\n       *\n       * ⚠️ FORBIDDEN in renderCell:\n       * - font-bold, font-semibold (use font-normal)\n       * - text-blue-500, etc. (use semantic tokens)\n       * - text-[13px], text-lg (use text-sm or text-xs)\n       */}\n      <div\n        className={`\n          ${paddingClass}\n          flex h-full items-center\n          ${shouldWrap ? 'min-w-0' : ''}\n          ${alignment.flexJustify}\n          ${textSizeClass}\n          ${isHeader ? 'text-tertiary font-medium' : 'text-primary font-normal'}\n          ${alignment.textAlign}\n          ${shouldWrap ? 'whitespace-normal' : 'whitespace-nowrap'}\n          ${useTabularNums ? 'tabular-nums' : ''}\n        `}\n      >\n        {hasLineClamping ? (\n          // Line-clamped content: wrap up to maxLines, then truncate with ellipsis\n          <div\n            className=\"w-full min-w-0 overflow-hidden\"\n            style={{\n              display: '-webkit-box',\n              WebkitLineClamp: maxLines,\n              WebkitBoxOrient: 'vertical',\n              lineClamp: maxLines,\n            }}\n          >\n            {children}\n          </div>\n        ) : shouldWrap ? (\n          // Unlimited wrapping\n          <div className=\"w-full min-w-0\">{children}</div>\n        ) : (\n          // Single line, truncate (default)\n          children\n        )}\n      </div>\n    </div>\n  )\n}\n\n// Memoize with custom comparison\nexport const TableCell = memo(TableCellBase, (prev, next) => {\n  // Quick checks for common cases\n  if (prev.children !== next.children) return false\n  if (prev.column.key !== next.column.key) return false\n  if (prev.stickyState.useEnhancedStyling !== next.stickyState.useEnhancedStyling) return false\n  if (prev.leavingColumnKeys !== next.leavingColumnKeys) return false\n  if (prev.enteringColumnKeys !== next.enteringColumnKeys) return false\n  if (prev.columnChange !== next.columnChange) return false\n\n  // Check border config changes that affect cell styling\n  if (prev.borderConfig.showCells !== next.borderConfig.showCells) return false\n  if (prev.borderConfig.cellColor !== next.borderConfig.cellColor) return false\n  if (prev.borderConfig.showRows !== next.borderConfig.showRows) return false\n  if (prev.borderConfig.rowColor !== next.borderConfig.rowColor) return false\n\n  return true\n})\n\nTableCell.displayName = 'TableCell'\n\n"]}
{"version":3,"file":"reveal-menu.js","sourceRoot":"/","sources":["other-repos/demo-repo/src/components/ui/deprecated/base/menu/reveal-menu.tsx"],"names":[],"mappings":"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","sourcesContent":["/**\n * Base UI Menu - Reveal Menu Component\n *\n * Wrapper that adds a reveal/scale animation to the BaseUIMenu.\n * Injects CSS keyframes for smooth scale-in effect on open.\n *\n * @module base-ui/menu/reveal-menu\n */\n\n'use client'\n\nimport React, { useCallback, useEffect, useState } from 'react'\n\nimport { cn } from '@/lib/utils'\nimport type { RevealMenuProps, MenuItem, IconTriggerConfig } from './types'\nimport {\n  DEFAULT_MENU_PROPS,\n  DEFAULT_HEIGHT_TRANSITION,\n  DEFAULT_SLIDE_TRANSITION,\n  DEFAULT_REVEAL_CONFIG,\n} from './config'\nimport { useRevealAnimation } from './hooks/use-reveal-animation'\nimport { BaseUIMenu } from './base-ui-menu'\nimport { IconTrigger } from './components'\n\n// ============================================================================\n// Helper Functions\n// ============================================================================\n\nfunction isIconTriggerConfig(trigger: unknown): trigger is IconTriggerConfig {\n  return (\n    trigger !== null &&\n    typeof trigger === 'object' &&\n    'icon' in trigger &&\n    !React.isValidElement(trigger)\n  )\n}\n\n// ============================================================================\n// Component\n// ============================================================================\n\n/**\n * Menu with reveal animation\n * Built on Base UI Menu primitives\n *\n * Animation Architecture:\n * - Container 1: Menu.Popup (outer wrapper)\n * - Container 1A: Root menu panel\n * - Container 1B: Submenu panel(s)\n */\nexport const RevealMenu: React.FC<RevealMenuProps> = ({\n  trigger,\n  items,\n  align = DEFAULT_MENU_PROPS.align,\n  side = DEFAULT_MENU_PROPS.side,\n  sideOffset,\n  alignOffset,\n  width = DEFAULT_MENU_PROPS.width,\n  variant = DEFAULT_MENU_PROPS.variant,\n  revealConfig = DEFAULT_REVEAL_CONFIG,\n  heightTransition = DEFAULT_HEIGHT_TRANSITION,\n  slideTransition = DEFAULT_SLIDE_TRANSITION,\n  onOpenChange: externalOnOpenChange,\n  header,\n  className,\n  appearance,\n  // Panel Navigation Animation (1A ↔ 1B)\n  heightAnimationEnabled = true,\n  opacityCrossfadeEnabled = true,\n  opacityDurationRatio = 0.8,\n}) => {\n  // ============================================================================\n  // State\n  // ============================================================================\n\n  const [isOpen, setIsOpen] = useState(false)\n  const [animationKey, setAnimationKey] = useState(0)\n\n  const handleOpenChange = useCallback(\n    (open: boolean) => {\n      setIsOpen(open)\n      externalOnOpenChange?.(open)\n    },\n    [externalOnOpenChange]\n  )\n\n  // ============================================================================\n  // Animation\n  // ============================================================================\n\n  const { uniqueClass, animationCss } = useRevealAnimation({\n    isOpen,\n    revealConfig,\n    side,\n    align,\n    animationKey,\n  })\n\n  // ============================================================================\n  // Loop Animation (for testing)\n  // ============================================================================\n\n  useEffect(() => {\n    if (revealConfig.loop && isOpen) {\n      const interval = setInterval(() => {\n        handleOpenChange(false)\n        setTimeout(() => {\n          setAnimationKey((prev) => prev + 1)\n          handleOpenChange(true)\n        }, revealConfig.duration)\n      }, revealConfig.duration * 2)\n\n      return () => clearInterval(interval)\n    }\n  }, [isOpen, revealConfig.loop, revealConfig.duration, handleOpenChange])\n\n  // ============================================================================\n  // Trigger\n  // ============================================================================\n\n  const stableTrigger = React.useMemo(() => {\n    if (isIconTriggerConfig(trigger)) {\n      return (\n        <div className=\"inline-flex items-center justify-center\">\n          <IconTrigger\n            icon={trigger.icon}\n            className={trigger.className}\n            isOpen={isOpen}\n          />\n        </div>\n      )\n    }\n\n    if (\n      React.isValidElement(trigger) ||\n      typeof trigger === 'string' ||\n      typeof trigger === 'number'\n    ) {\n      return <div className=\"inline-block\">{trigger}</div>\n    }\n\n    return trigger\n  }, [trigger, isOpen])\n\n  // ============================================================================\n  // Render\n  // ============================================================================\n\n  return (\n    <div className=\"reveal-menu-wrapper\">\n      {/* Inject animation CSS when open */}\n      {isOpen && <style>{animationCss}</style>}\n\n      <BaseUIMenu\n        trigger={stableTrigger}\n        items={items}\n        align={align}\n        side={side}\n        sideOffset={sideOffset}\n        alignOffset={alignOffset}\n        width={width}\n        variant={variant}\n        open={isOpen}\n        onOpenChange={handleOpenChange}\n        className={cn(\n          uniqueClass,\n          // Disable default animations (we use our own)\n          'data-[open]:fade-in-0 animate-none data-[open]:animate-none',\n          className\n        )}\n        appearance={appearance}\n        heightTransition={heightTransition}\n        slideTransition={slideTransition}\n        header={header}\n        // Panel Navigation Animation (1A ↔ 1B)\n        heightAnimationEnabled={heightAnimationEnabled}\n        opacityCrossfadeEnabled={opacityCrossfadeEnabled}\n        opacityDurationRatio={opacityDurationRatio}\n      />\n    </div>\n  )\n}\n\nRevealMenu.displayName = 'RevealMenu'\n"]}
{"version":3,"file":"use-reveal-animation.js","sourceRoot":"/","sources":["other-repos/demo-repo/src/components/ui/deprecated/base/menu/hooks/use-reveal-animation.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * Base UI Menu - Reveal Animation Hook\n *\n * Generates CSS keyframe animations for the reveal effect when menu opens.\n *\n * @module base-ui/menu/hooks/use-reveal-animation\n */\n\nimport { useMemo, useRef } from 'react'\nimport type { RevealAnimationConfig, MenuSide, MenuAlign } from '../types'\nimport { getTransformOrigin as getTransformOriginConfig } from '../config'\n\ninterface UseRevealAnimationOptions {\n  /** Whether the menu is open */\n  isOpen: boolean\n  /** Reveal animation configuration */\n  revealConfig: RevealAnimationConfig\n  /** Menu side */\n  side: MenuSide\n  /** Menu alignment */\n  align: MenuAlign\n  /** Animation key for forcing re-animation */\n  animationKey: number\n}\n\ninterface UseRevealAnimationReturn {\n  /** Unique class name for CSS targeting */\n  uniqueClass: string\n  /** Generated CSS string to inject */\n  animationCss: string\n  /** Computed transform origin */\n  transformOrigin: string\n}\n\n/**\n * Hook for generating reveal animation CSS\n */\nexport function useRevealAnimation({\n  isOpen,\n  revealConfig,\n  side,\n  align,\n  animationKey,\n}: UseRevealAnimationOptions): UseRevealAnimationReturn {\n  const wrapperIdRef = useRef(`base-ui-menu-${Math.random().toString(36).substr(2, 9)}`)\n  const wrapperId = wrapperIdRef.current\n  const uniqueClass = `base-ui-menu-content-${wrapperId}`\n\n  // ============================================================================\n  // Transform Origin Calculation\n  // ============================================================================\n\n  const transformOrigin = useMemo(() => {\n    const { direction } = revealConfig\n\n    if (direction === 'center') {\n      return 'center center'\n    }\n\n    return getTransformOriginConfig(side, align)\n  }, [revealConfig.direction, side, align])\n\n  // ============================================================================\n  // CSS Generation\n  // ============================================================================\n\n  const animationCss = useMemo(() => {\n    if (!isOpen) return ''\n\n    const {\n      duration,\n      easing,\n      contentAnimation,\n      contentDelay,\n      scaleStart,\n      scaleEnd,\n      opacityStart = 0,\n      opacityEnd = 1,\n      includeOpacity = true,\n      opacityDelay = 0,\n    } = revealConfig\n\n    const scaleKeyframeName = `base-ui-reveal-scale-${wrapperId}-${animationKey}`\n    const opacityKeyframeName = `base-ui-reveal-opacity-${wrapperId}-${animationKey}`\n\n    const scaleAnimation = `${scaleKeyframeName} ${duration}ms ${easing} both`\n    const opacityAnimation = includeOpacity\n      ? `, ${opacityKeyframeName} ${duration}ms ${easing} ${opacityDelay}ms both`\n      : ''\n\n    // Target Base UI's data-open attribute\n    let css = `\n      .${uniqueClass}[data-open] {\n        transform-origin: ${transformOrigin} !important;\n        animation: ${scaleAnimation}${opacityAnimation} !important;\n        will-change: transform${includeOpacity ? ', opacity' : ''};\n      }\n\n      @keyframes ${scaleKeyframeName} {\n        from { transform: scale(${scaleStart}); }\n        to { transform: scale(${scaleEnd}); }\n      }\n\n      @keyframes ${opacityKeyframeName} {\n        from { opacity: ${opacityStart}; }\n        to { opacity: ${opacityEnd}; }\n      }\n    `\n\n    // Content animation\n    const contentKeyframeName = `base-ui-reveal-content-${wrapperId}-${animationKey}`\n    const innerSelector = `.${uniqueClass}[data-open] > div`\n\n    let contentInitialState = ''\n    let contentKeyframes = ''\n\n    switch (contentAnimation) {\n      case 'normal':\n        contentInitialState = `\n          transform: scale(${1 / scaleStart});\n          opacity: 1;\n        `\n        contentKeyframes = `\n          @keyframes ${contentKeyframeName} {\n            from { transform: scale(${1 / scaleStart}); opacity: 1; }\n            to { transform: scale(${1 / scaleEnd}); opacity: 1; }\n          }\n        `\n        break\n\n      case 'fade':\n        contentInitialState = `\n          transform: scale(1);\n          opacity: 0;\n        `\n        contentKeyframes = `\n          @keyframes ${contentKeyframeName} {\n            from { opacity: 0; }\n            to { opacity: 1; }\n          }\n        `\n        break\n\n      case 'scale-with':\n        contentInitialState = `\n          transform: scale(${scaleStart});\n          opacity: 1;\n        `\n        contentKeyframes = `\n          @keyframes ${contentKeyframeName} {\n            from { transform: scale(${scaleStart}); opacity: 1; }\n            to { transform: scale(${scaleEnd}); opacity: 1; }\n          }\n        `\n        break\n\n      case 'scale-opposite':\n        const oppositeStart = 1 / scaleStart\n        const oppositeEnd = 1 / scaleEnd\n        contentInitialState = `\n          transform: scale(${oppositeStart});\n          opacity: 1;\n        `\n        contentKeyframes = `\n          @keyframes ${contentKeyframeName} {\n            from { transform: scale(${oppositeStart}); opacity: 1; }\n            to { transform: scale(${oppositeEnd}); opacity: 1; }\n          }\n        `\n        break\n    }\n\n    if (contentKeyframes) {\n      css += `\n        ${innerSelector} {\n          transform-origin: ${transformOrigin} !important;\n          ${contentInitialState}\n          animation: ${contentKeyframeName} ${duration}ms ${easing} ${contentDelay}ms forwards !important;\n          will-change: transform;\n          backface-visibility: hidden;\n        }\n        ${contentKeyframes}\n      `\n    }\n\n    return css\n  }, [isOpen, wrapperId, animationKey, revealConfig, transformOrigin, uniqueClass])\n\n  return {\n    uniqueClass,\n    animationCss,\n    transformOrigin,\n  }\n}\n"]}
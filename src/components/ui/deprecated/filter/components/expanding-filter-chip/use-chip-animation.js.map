{"version":3,"file":"use-chip-animation.js","sourceRoot":"/","sources":["other-repos/demo-repo/src/components/ui/deprecated/filter/components/expanding-filter-chip/use-chip-animation.ts"],"names":[],"mappings":";AAAA;;;;;;;GAOG;;;AAEH,iCAAwD;AACxD,+CAKwB;AAwCxB,+EAA+E;AAC/E,OAAO;AACP,+EAA+E;AAE/E;;;;;GAKG;AACH,SAAgB,gBAAgB,CAAC,OAA6B;IAC5D,MAAM,EACJ,eAAe,GAAG,KAAK,EACvB,QAAQ,EAAE,kBAAkB,EAC5B,gBAAgB,EAChB,QAAQ,GAAG,2BAAe,EAC1B,UAAU,GAAG,SAAS,EACtB,gBAAgB,GAAG,8BAAkB,GACtC,GAAG,OAAO,CAAA;IAEX,MAAM,CAAC,gBAAgB,EAAE,mBAAmB,CAAC,GAAG,IAAA,gBAAQ,EAAC,eAAe,CAAC,CAAA;IACzE,MAAM,UAAU,GAAG,kBAAkB,IAAI,gBAAgB,CAAA;IAEzD,wDAAwD;IACxD,MAAM,CAAC,sBAAsB,EAAE,yBAAyB,CAAC,GAAG,IAAA,gBAAQ,EAAC,eAAe,CAAC,CAAA;IAErF,+CAA+C;IAC/C,IAAA,iBAAS,EAAC,GAAG,EAAE;QACb,IAAI,CAAC,UAAU,EAAE,CAAC;YAChB,yBAAyB,CAAC,KAAK,CAAC,CAAA;QAClC,CAAC;IACH,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC,CAAA;IAEhB,qCAAqC;IACrC,IAAA,iBAAS,EAAC,GAAG,EAAE;QACb,IAAI,eAAe;YAAE,OAAM;QAE3B,MAAM,KAAK,GAAG,qBAAqB,CAAC,GAAG,EAAE;YACvC,mBAAmB,CAAC,IAAI,CAAC,CAAA;YACzB,gBAAgB,EAAE,CAAC,IAAI,CAAC,CAAA;QAC1B,CAAC,CAAC,CAAA;QAEF,OAAO,GAAG,EAAE,CAAC,oBAAoB,CAAC,KAAK,CAAC,CAAA;QACxC,uDAAuD;IACzD,CAAC,EAAE,EAAE,CAAC,CAAA;IAEN,MAAM,YAAY,GAAG,IAAA,mBAAW,EAAC,GAAG,EAAE;QACpC,MAAM,QAAQ,GAAG,CAAC,UAAU,CAAA;QAC5B,mBAAmB,CAAC,QAAQ,CAAC,CAAA;QAC7B,gBAAgB,EAAE,CAAC,QAAQ,CAAC,CAAA;IAC9B,CAAC,EAAE,CAAC,UAAU,EAAE,gBAAgB,CAAC,CAAC,CAAA;IAElC,MAAM,mBAAmB,GAAG,IAAA,mBAAW,EACrC,CAAC,CAAwB,EAAE,EAAE;QAC3B,IAAI,CAAC,CAAC,YAAY,KAAK,OAAO,EAAE,CAAC;YAC/B,IAAI,UAAU,EAAE,CAAC;gBACf,yBAAyB,CAAC,IAAI,CAAC,CAAA;YACjC,CAAC;QACH,CAAC;IACH,CAAC,EACD,CAAC,UAAU,CAAC,CACb,CAAA;IAED,MAAM,iBAAiB,GAAG,IAAA,mBAAW,EAAC,GAAG,EAAE;QACzC,IAAI,UAAU,KAAK,MAAM;YAAE,OAAO,CAAC,CAAA;QACnC,IAAI,CAAC,UAAU;YAAE,OAAO,CAAC,CAAA;QACzB,IAAI,UAAU,KAAK,MAAM;YAAE,OAAO,sBAAsB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAA;QAChE,OAAO,CAAC,CAAA;IACV,CAAC,EAAE,CAAC,UAAU,EAAE,UAAU,EAAE,sBAAsB,CAAC,CAAC,CAAA;IAEpD,MAAM,oBAAoB,GAAG,IAAA,mBAAW,EAAC,GAAG,EAAE;QAC5C,IAAI,UAAU,KAAK,MAAM;YAAE,OAAO,MAAM,CAAA;QAExC,IAAI,CAAC,UAAU,EAAE,CAAC;YAChB,OAAO,WAAW,6BAAiB,aAAa,CAAA;QAClD,CAAC;QAED,QAAQ,UAAU,EAAE,CAAC;YACnB,KAAK,MAAM,CAAC,CAAC,CAAC;gBACZ,MAAM,SAAS,GAAG,QAAQ,GAAG,CAAC,CAAC,GAAG,gBAAgB,CAAC,CAAA;gBACnD,MAAM,YAAY,GAAG,QAAQ,GAAG,gBAAgB,CAAA;gBAChD,OAAO,WAAW,YAAY,MAAM,2BAAe,IAAI,SAAS,IAAI,CAAA;YACtE,CAAC;YACD,KAAK,OAAO;gBACV,OAAO,sBAAsB,QAAQ,IAAI,CAAA;YAC3C,KAAK,MAAM;gBACT,OAAO,qBAAqB,CAAA;YAC9B,KAAK,SAAS;gBACZ,OAAO,WAAW,QAAQ,MAAM,2BAAe,EAAE,CAAA;YACnD;gBACE,OAAO,WAAW,QAAQ,GAAG,gBAAgB,MAAM,2BAAe,EAAE,CAAA;QACxE,CAAC;IACH,CAAC,EAAE,CAAC,UAAU,EAAE,UAAU,EAAE,QAAQ,EAAE,gBAAgB,CAAC,CAAC,CAAA;IAExD,MAAM,sBAAsB,GAAG,IAAA,mBAAW,EAAC,GAAG,EAAE;QAC9C,IAAI,UAAU,EAAE,CAAC;YACf,OAAO,SAAS,QAAQ,MAAM,2BAAe,EAAE,CAAA;QACjD,CAAC;QACD,OAAO,SAAS,6BAAiB,aAAa,CAAA;IAChD,CAAC,EAAE,CAAC,UAAU,EAAE,QAAQ,CAAC,CAAC,CAAA;IAE1B,OAAO;QACL,UAAU;QACV,sBAAsB;QACtB,YAAY;QACZ,mBAAmB;QACnB,iBAAiB;QACjB,oBAAoB;QACpB,sBAAsB;KACvB,CAAA;AACH,CAAC;AApGD,4CAoGC","sourcesContent":["/**\n * Chip Animation Hook\n *\n * Manages the expand/collapse animation state and timing for filter chips.\n * Handles reveal modes, opacity transitions, and animation completion tracking.\n *\n * @module base-ui/filter/components/expanding-filter-chip/use-chip-animation\n */\n\nimport { useState, useEffect, useCallback } from 'react'\nimport {\n  EASING_EXPO_OUT,\n  DURATION_EXPAND,\n  DURATION_COLLAPSE,\n  OPACITY_FADE_RATIO,\n} from '../../constants'\n\n// ============================================================================\n// Types\n// ============================================================================\n\nexport type RevealMode = 'fade' | 'delay' | 'sync' | 'instant' | 'none'\n\nexport interface ChipAnimationOptions {\n  /** Whether to start expanded */\n  defaultExpanded?: boolean\n  /** Controlled expanded state */\n  expanded?: boolean\n  /** Called when expanded state changes */\n  onExpandedChange?: (expanded: boolean) => void\n  /** Animation duration in ms */\n  duration?: number\n  /** How the value text is revealed */\n  revealMode?: RevealMode\n  /** Opacity fade ratio (only used with 'fade' mode) */\n  opacityFadeRatio?: number\n}\n\nexport interface ChipAnimationResult {\n  /** Current expanded state */\n  isExpanded: boolean\n  /** Whether width animation has completed (for 'sync' mode) */\n  widthAnimationComplete: boolean\n  /** Toggle expanded state */\n  handleToggle: () => void\n  /** Handler for transitionend events */\n  handleTransitionEnd: (e: React.TransitionEvent) => void\n  /** Get current content opacity */\n  getContentOpacity: () => number\n  /** Get content transition CSS string */\n  getContentTransition: () => string\n  /** Get container transition CSS string */\n  getContainerTransition: () => string\n}\n\n// ============================================================================\n// Hook\n// ============================================================================\n\n/**\n * useChipAnimation - Manages chip expand/collapse animation\n *\n * @param options - Animation configuration options\n * @returns Animation state and handlers\n */\nexport function useChipAnimation(options: ChipAnimationOptions): ChipAnimationResult {\n  const {\n    defaultExpanded = false,\n    expanded: controlledExpanded,\n    onExpandedChange,\n    duration = DURATION_EXPAND,\n    revealMode = 'instant',\n    opacityFadeRatio = OPACITY_FADE_RATIO,\n  } = options\n\n  const [internalExpanded, setInternalExpanded] = useState(defaultExpanded)\n  const isExpanded = controlledExpanded ?? internalExpanded\n\n  // For 'sync' mode: track when width animation completes\n  const [widthAnimationComplete, setWidthAnimationComplete] = useState(defaultExpanded)\n\n  // Reset widthAnimationComplete when collapsing\n  useEffect(() => {\n    if (!isExpanded) {\n      setWidthAnimationComplete(false)\n    }\n  }, [isExpanded])\n\n  // Auto-expand on mount after a frame\n  useEffect(() => {\n    if (defaultExpanded) return\n\n    const frame = requestAnimationFrame(() => {\n      setInternalExpanded(true)\n      onExpandedChange?.(true)\n    })\n\n    return () => cancelAnimationFrame(frame)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  const handleToggle = useCallback(() => {\n    const newValue = !isExpanded\n    setInternalExpanded(newValue)\n    onExpandedChange?.(newValue)\n  }, [isExpanded, onExpandedChange])\n\n  const handleTransitionEnd = useCallback(\n    (e: React.TransitionEvent) => {\n      if (e.propertyName === 'width') {\n        if (isExpanded) {\n          setWidthAnimationComplete(true)\n        }\n      }\n    },\n    [isExpanded]\n  )\n\n  const getContentOpacity = useCallback(() => {\n    if (revealMode === 'none') return 1\n    if (!isExpanded) return 0\n    if (revealMode === 'sync') return widthAnimationComplete ? 1 : 0\n    return 1\n  }, [revealMode, isExpanded, widthAnimationComplete])\n\n  const getContentTransition = useCallback(() => {\n    if (revealMode === 'none') return 'none'\n\n    if (!isExpanded) {\n      return `opacity ${DURATION_COLLAPSE}ms ease-out`\n    }\n\n    switch (revealMode) {\n      case 'fade': {\n        const fadeDelay = duration * (1 - opacityFadeRatio)\n        const fadeDuration = duration * opacityFadeRatio\n        return `opacity ${fadeDuration}ms ${EASING_EXPO_OUT} ${fadeDelay}ms`\n      }\n      case 'delay':\n        return `opacity 1ms linear ${duration}ms`\n      case 'sync':\n        return 'opacity 50ms linear'\n      case 'instant':\n        return `opacity ${duration}ms ${EASING_EXPO_OUT}`\n      default:\n        return `opacity ${duration * opacityFadeRatio}ms ${EASING_EXPO_OUT}`\n    }\n  }, [revealMode, isExpanded, duration, opacityFadeRatio])\n\n  const getContainerTransition = useCallback(() => {\n    if (isExpanded) {\n      return `width ${duration}ms ${EASING_EXPO_OUT}`\n    }\n    return `width ${DURATION_COLLAPSE}ms ease-out`\n  }, [isExpanded, duration])\n\n  return {\n    isExpanded,\n    widthAnimationComplete,\n    handleToggle,\n    handleTransitionEnd,\n    getContentOpacity,\n    getContentTransition,\n    getContainerTransition,\n  }\n}\n"]}
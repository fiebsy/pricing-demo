{"version":3,"file":"cell-renderer.js","sourceRoot":"/","sources":["other-repos/demo-repo/src/modules/collections/components/cell-renderer.tsx"],"names":[],"mappings":";AAAA;;;;GAIG;AAEH,YAAY,CAAA;AANZ;;;;GAIG;;;AAIH,iCAAyB;AACzB,uCAAiC;AAEjC,6EAAwE;AACxE,2DAAuD;AACvD,+DAA2D;AAC3D,qEAA+D;AAE/D,oCAAwD;AACxD,8EAAsE;AACtE,8FAAsF;AAEtF,oDAAyE;AAEzE,gFAAgF;AAChF,iFAAiF;AACjF,gFAAgF;AAEhF,MAAM,eAAe,GAAG,CAAC,EAAE,MAAM,EAAsB,EAAE,EAAE;IACzD,OAAO,CAAC,IAAI,CAAC,SAAS,CAAC,cAAc,CAAC,CAAC,IAAA,2BAAc,EAAC,MAAM,CAAC,CAAC,EAAE,IAAI,CAAC,CAAA;AACvE,CAAC,CAAA;AAED,gFAAgF;AAChF,gBAAgB;AAChB,gFAAgF;AAEhF;;GAEG;AACI,MAAM,UAAU,GAAG,CACxB,SAAiB,EACjB,IAAqB,EACrB,MAAc,EACG,EAAE;IACnB,QAAQ,SAAS,EAAE,CAAC;QAClB,KAAK,+BAA+B,CAAC,CAAC,CAAC;YACrC,wCAAwC;YACxC,MAAM,SAAS,GAAG,IAAI,CAAC,SAAS,IAAI,CAAC,CAAA;YACrC,MAAM,gBAAgB,GAAG,IAAI,CAAC,gBAAgB,IAAI,CAAC,CAAA;YACnD,MAAM,UAAU,GAAG,SAAS,GAAG,gBAAgB,CAAA;YAE/C,OAAO,CACL,CAAC,GAAG,CAAC,SAAS,CAAC,yBAAyB,CACtC;UAAA,CAAC,IAAI,CAAC,SAAS,CAAC,oCAAoC,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE,IAAI,CAC7E;UAAA,CAAC,uCAAiB,CAChB,UAAU,CAAC,CAAC,UAAU,CAAC,CACvB,WAAW,CAAC,CAAC,SAAS,CAAC,CACvB,IAAI,CAAC,CAAC,EAAE,CAAC,CACT,WAAW,CAAC,CAAC,CAAC,CAAC,CACf,WAAW,CAAC,iCAAiC,CAC7C,eAAe,CAAC,4BAA4B,CAC5C,kBAAkB,CAAC,CAAC,KAAK,CAAC,CAC1B,cAAc,CAAC,CAAC,KAAK,CAAC,EAE1B;QAAA,EAAE,GAAG,CAAC,CACP,CAAA;QACH,CAAC;QAED,KAAK,OAAO,CAAC,CAAC,CAAC;YACb,oEAAoE;YACpE,MAAM,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAA;YAC9B,IAAI,QAAQ,KAAK,uBAAe,CAAC,OAAO,EAAE,CAAC;gBACzC,OAAO,CACL,CAAC,aAAK,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC,4BAAkB,CAAC,CAC/E;;UACF,EAAE,aAAK,CAAC,CACT,CAAA;YACH,CAAC;YACD,IAAI,QAAQ,KAAK,uBAAe,CAAC,SAAS,EAAE,CAAC;gBAC3C,OAAO,CACL,CAAC,aAAK,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC,oBAAU,CAAC,CACpE;;UACF,EAAE,aAAK,CAAC,CACT,CAAA;YACH,CAAC;YACD,kCAAkC;YAClC,OAAO,CACL,CAAC,aAAK,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,MAAM,CAC3C;;QACF,EAAE,aAAK,CAAC,CACT,CAAA;QACH,CAAC;QAED,KAAK,kBAAkB,CAAC,CAAC,CAAC;YACxB,qDAAqD;YACrD,IAAI,IAAI,CAAC,YAAY,KAAK,oBAAY,CAAC,eAAe,EAAE,CAAC;gBACvD,MAAM,MAAM,GAAG,IAAI,CAAC,cAAc,IAAI,CAAC,CAAA;gBACvC,IAAI,MAAM,KAAK,CAAC,EAAE,CAAC;oBACjB,OAAO,CAAC,IAAI,CAAC,SAAS,CAAC,iBAAiB,CAAC,CAAC,EAAE,IAAI,CAAC,CAAA;gBACnD,CAAC;gBACD,OAAO,CACL,CAAC,IAAI,CAAC,SAAS,CAAC,eAAe,CAC7B;YAAA,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,EAClC;UAAA,EAAE,IAAI,CAAC,CACR,CAAA;YACH,CAAC;YACD,0CAA0C;YAC1C,MAAM,MAAM,GAAG,IAAI,CAAC,kBAAkB,IAAI,CAAC,CAAA;YAE3C,mDAAmD;YACnD,IAAI,IAAI,CAAC,YAAY,KAAK,oBAAY,CAAC,cAAc,EAAE,CAAC;gBACtD,OAAO,CACL,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC,eAAe,CAAC,CAAC,CAAC,oBAAoB,CAAC,CACrE;YAAA,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,EAClC;UAAA,EAAE,IAAI,CAAC,CACR,CAAA;YACH,CAAC;YAED,2CAA2C;YAC3C,OAAO,CACL,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC,eAAe,CAAC,CAAC,CAAC,sBAAsB,CAAC,CACvE;UAAA,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,EAClC;QAAA,EAAE,IAAI,CAAC,CACR,CAAA;QACH,CAAC;QAED,KAAK,UAAU;YACb,OAAO,CACL,CAAC,IAAI,CAAC,SAAS,CAAC,gDAAgD,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,aAAa,IAAI,UAAU,CAAC,CACvG;UAAA,CAAC,IAAI,CAAC,aAAa,IAAI,UAAU,CACnC;QAAA,EAAE,IAAI,CAAC,CACR,CAAA;QAEH,KAAK,UAAU,CAAC,CAAC,CAAC;YAChB,wCAAwC;YACxC,IAAI,IAAI,CAAC,YAAY,KAAK,oBAAY,CAAC,eAAe,EAAE,CAAC;gBACvD,OAAO,CACL,CAAC,aAAK,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,MAAM,CAC3C;;UACF,EAAE,aAAK,CAAC,CACT,CAAA;YACH,CAAC;YACD,2CAA2C;YAC3C,IAAI,IAAI,CAAC,YAAY,KAAK,oBAAY,CAAC,cAAc,EAAE,CAAC;gBACtD,OAAO,CACL,CAAC,aAAK,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,OAAO,CAC5C;;UACF,EAAE,aAAK,CAAC,CACT,CAAA;YACH,CAAC;YACD,uCAAuC;YACvC,OAAO,CACL,CAAC,aAAK,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,SAAS,CAC9C;;QACF,EAAE,aAAK,CAAC,CACT,CAAA;QACH,CAAC;QAED,KAAK,iBAAiB,CAAC,CAAC,CAAC;YACvB,kDAAkD;YAClD,IAAI,IAAI,CAAC,YAAY,KAAK,oBAAY,CAAC,eAAe,EAAE,CAAC;gBACvD,OAAO,CACL,CAAC,GAAG,CAAC,SAAS,CAAC,+BAA+B,CAC5C;YAAA,CAAC,IAAI,CAAC,SAAS,CAAC,yBAAyB,CAAC,CAAC,EAAE,IAAI,CACnD;UAAA,EAAE,GAAG,CAAC,CACP,CAAA;YACH,CAAC;YAED,2EAA2E;YAC3E,IAAI,IAAI,CAAC,YAAY,EAAE,CAAC;gBACtB,OAAO,CACL,CAAC,GAAG,CAAC,SAAS,CAAC,+BAA+B,CAC5C;YAAA,CAAC,8BAAa,CACZ,iBAAiB,CAAC,CAAC,CAAC,CAAC,CACrB,IAAI,CAAC,IAAI,CACT,SAAS,CAAC,CAAC,IAAI,CAAC,CAChB,aAAa,CAAC,MAAM,CACpB,WAAW,CAAC,SAAS,CACrB,cAAc,CAAC,wCAAwC,CACvD,WAAW,CAAC,CAAC,EAAE,WAAW,EAAE,UAAU,EAAE,SAAS,EAAE,CAAC,EAAE,CAAC,EAE3D;UAAA,EAAE,GAAG,CAAC,CACP,CAAA;YACH,CAAC;YAED,iDAAiD;YACjD,OAAO,CACL,CAAC,GAAG,CAAC,SAAS,CAAC,+BAA+B,CAC5C;UAAA,CAAC,8BAAa,CACZ,iBAAiB,CAAC,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAC1C,IAAI,CAAC,IAAI,CACT,SAAS,CAAC,CAAC,IAAI,CAAC,CAChB,aAAa,CAAC,MAAM,CACpB,cAAc,CAAC,wCAAwC,CACvD,WAAW,CAAC,CAAC,EAAE,WAAW,EAAE,UAAU,EAAE,SAAS,EAAE,CAAC,EAAE,CAAC,EAE3D;QAAA,EAAE,GAAG,CAAC,CACP,CAAA;QACH,CAAC;QAED,KAAK,eAAe,CAAC,CAAC,CAAC;YACrB,kDAAkD;YAClD,MAAM,iBAAiB,GAAG,IAAI,CAAC,2BAA2B,CAAA;YAC1D,MAAM,aAAa,GAAG,IAAI,CAAC,uBAAuB,CAAA;YAClD,MAAM,cAAc,GAAG,IAAI,CAAC,qBAAqB,CAAA;YACjD,MAAM,cAAc,GAAG,IAAI,CAAC,cAAc,CAAA;YAC1C,MAAM,aAAa,GAAG,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAA;YAEzC,+BAA+B;YAC/B,MAAM,kBAAkB,GAAG,IAAI,CAAC,eAAe;gBAC7C,CAAC,CAAC,IAAA,iBAAM,EAAC,IAAI,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,EAAE,eAAe,CAAC;gBACzD,CAAC,CAAC,IAAI,CAAA;YAER,+DAA+D;YAC/D,MAAM,UAAU,GAAG,iBAAiB;gBAClC,CAAC,CAAC,EAAE,SAAS,EAAE,iBAAiB,EAAE,OAAO,EAAE,aAAa,IAAI,EAAE,EAAE,GAAG,EAAE,EAAE,IAAI,EAAE,cAAc,EAAE,EAAE,EAAE,aAAa,EAAE,EAAE;gBAClH,CAAC,CAAC,IAAA,gCAAmB,EAAC,cAAc,IAAI,IAAI,EAAE,aAAa,EAAE,IAAI,CAAC,CAAA;YAEpE,0BAA0B;YAC1B,IAAI,CAAC,UAAU,IAAI,CAAC,cAAc,EAAE,CAAC;gBACnC,OAAO,CACL,CAAC,GAAG,CAAC,SAAS,CAAC,aAAa,CAC1B;YAAA,CAAC,GAAG,CAAC,SAAS,CAAC,uBAAuB,CAAC,aAAa,EAAE,GAAG,CACzD;YAAA,CAAC,GAAG,CAAC,SAAS,CAAC,yBAAyB,CAAC,SAAS,EAAE,GAAG,CACzD;UAAA,EAAE,GAAG,CAAC,CACP,CAAA;YACH,CAAC;YAED,4BAA4B;YAC5B,MAAM,kBAAkB,GAAG,CACzB,EACE;UAAA,CAAC,kBAAkB,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,uBAAuB,CAAC,CAAC,kBAAkB,CAAC,EAAE,IAAI,CAAC,CAC1F;UAAA,CAAC,UAAU,CAAC,OAAO,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,cAAc,CAAC,CAAC,UAAU,CAAC,OAAO,CAAC,EAAE,IAAI,CAAC,CACjF;UAAA,CAAC,IAAI,CAAC,SAAS,CAAC,8BAA8B,CAC5C;YAAA,CAAC,UAAU,CAAC,GAAG,CAAC,IAAI,CAAE,GAAE,CAAC,UAAU,CAAC,GAAG,CAAC,EAAE,CAC5C;UAAA,EAAE,IAAI,CACR;QAAA,GAAG,CACJ,CAAA;YAED,OAAO,CACL,CAAC,iBAAO,CAAC,KAAK,CAAC,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC,WAAW,CAAC,CAAC,kBAAkB,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,CAC3F;UAAA,CAAC,GAAG,CAAC,SAAS,CAAC,6BAA6B,CAC1C;YAAA,CAAC,IAAI,CAAC,SAAS,CAAC,6CAA6C,CAAC,CAAC,UAAU,CAAC,SAAS,CAAC,EAAE,IAAI,CAC1F;YAAA,CAAC,cAAc,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,yBAAyB,CAAC,CAAC,cAAc,CAAC,EAAE,IAAI,CAAC,CACtF;UAAA,EAAE,GAAG,CACP;QAAA,EAAE,iBAAO,CAAC,CACX,CAAA;QACH,CAAC;QAED;YACE,OAAO,IAAI,CAAA;IACf,CAAC;AACH,CAAC,CAAA;AArNY,QAAA,UAAU,cAqNtB","sourcesContent":["/**\n * Collections Dashboard - Cell Renderer\n *\n * Handles the hardened column set for partner collections.\n */\n\n'use client'\n\nimport React from 'react'\nimport { format } from 'date-fns'\nimport { cn } from '@/lib/utils'\nimport { ClawbackTimer } from '@/components/ui/prod/base/clawback-timer'\nimport { Badge } from '@/components/ui/prod/base/badge'\nimport { Tooltip } from '@/components/ui/prod/base/tooltip'\nimport { PayProgressCircle } from './parts/pay-progress-circle'\nimport type { PartnerRiskItem } from '../types'\nimport { PaymentPlanType, RiskCategory } from '../types'\nimport RepeatIcon from '@hugeicons-pro/core-stroke-rounded/RepeatIcon'\nimport MoneyReceive01Icon from '@hugeicons-pro/core-stroke-rounded/MoneyReceive01Icon'\n\nimport { formatStatusContext, formatCurrency } from '../utils/formatters'\n\n// =============================================================================\n// FORMATTED AMOUNT COMPONENT (inline since we don't have the full design system)\n// =============================================================================\n\nconst FormattedAmount = ({ amount }: { amount: number }) => {\n  return <span className=\"tabular-nums\">{formatCurrency(amount)}</span>\n}\n\n// =============================================================================\n// CELL RENDERER\n// =============================================================================\n\n/**\n * Render cell content based on column key\n */\nexport const renderCell = (\n  columnKey: string,\n  item: PartnerRiskItem,\n  _index: number\n): React.ReactNode => {\n  switch (columnKey) {\n    case 'orderIdWithProgressNoClawback': {\n      // Contract ID with mini progress circle\n      const planTotal = item.planTotal ?? 0\n      const remainingBalance = item.remainingBalance ?? 0\n      const amountPaid = planTotal - remainingBalance\n\n      return (\n        <div className=\"flex items-center gap-2\">\n          <span className=\"text-tertiary text-sm tabular-nums\">#{item.contractId}</span>\n          <PayProgressCircle\n            amountPaid={amountPaid}\n            totalAmount={planTotal}\n            size={16}\n            strokeWidth={2}\n            strokeColor=\"var(--color-fg-brand-secondary)\"\n            backgroundColor=\"var(--color-bg-quaternary)\"\n            showPercentageText={false}\n            showAmountText={false}\n          />\n        </div>\n      )\n    }\n\n    case 'route': {\n      // Route type: FUNDING = Upfront, SERVICING = PAC (pay-as-collected)\n      const planType = item.planType\n      if (planType === PaymentPlanType.Funding) {\n        return (\n          <Badge size=\"xs\" shape=\"rounded\" color=\"success\" iconLeading={MoneyReceive01Icon}>\n            Upfront\n          </Badge>\n        )\n      }\n      if (planType === PaymentPlanType.Servicing) {\n        return (\n          <Badge size=\"xs\" shape=\"rounded\" color=\"info\" iconLeading={RepeatIcon}>\n            PAC\n          </Badge>\n        )\n      }\n      // Fallback for PENDING or unknown\n      return (\n        <Badge size=\"xs\" shape=\"rounded\" color=\"gray\">\n          —\n        </Badge>\n      )\n    }\n\n    case 'clawbackEstimate': {\n      // For settled clawbacks: show actual clawback amount\n      if (item.riskCategory === RiskCategory.SettledClawback) {\n        const amount = item.clawbackAmount ?? 0\n        if (amount === 0) {\n          return <span className=\"text-quaternary\">—</span>\n        }\n        return (\n          <span className=\"text-tertiary\">\n            <FormattedAmount amount={amount} />\n          </span>\n        )\n      }\n      // For pre-clawback: show at-risk estimate\n      const atRisk = item.atRiskFundedAmount ?? 0\n\n      // Active clawback gets red/error text for non-zero\n      if (item.riskCategory === RiskCategory.ActiveClawback) {\n        return (\n          <span className={atRisk === 0 ? 'text-tertiary' : 'text-error-primary'}>\n            <FormattedAmount amount={atRisk} />\n          </span>\n        )\n      }\n\n      // Collections - warning color for non-zero\n      return (\n        <span className={atRisk === 0 ? 'text-tertiary' : 'text-warning-primary'}>\n          <FormattedAmount amount={atRisk} />\n        </span>\n      )\n    }\n\n    case 'customer':\n      return (\n        <span className=\"text-primary block max-w-full truncate text-sm\" title={item.customerEmail || 'No email'}>\n          {item.customerEmail || 'No email'}\n        </span>\n      )\n\n    case 'riskTier': {\n      // Settled clawbacks - show clawed badge\n      if (item.riskCategory === RiskCategory.SettledClawback) {\n        return (\n          <Badge size=\"xs\" shape=\"rounded\" color=\"gray\">\n            Clawed\n          </Badge>\n        )\n      }\n      // Active clawback - show last chance badge\n      if (item.riskCategory === RiskCategory.ActiveClawback) {\n        return (\n          <Badge size=\"xs\" shape=\"rounded\" color=\"error\">\n            Last chance\n          </Badge>\n        )\n      }\n      // Collections - show collections badge\n      return (\n        <Badge size=\"xs\" shape=\"rounded\" color=\"warning\">\n          Collections\n        </Badge>\n      )\n    }\n\n    case 'clawbackBattery': {\n      // Settled clawbacks - show dash (no timer needed)\n      if (item.riskCategory === RiskCategory.SettledClawback) {\n        return (\n          <div className=\"flex items-center justify-end\">\n            <span className=\"text-quaternary text-xs\">—</span>\n          </div>\n        )\n      }\n\n      // If in active clawback (expired), show empty battery with \"Expired\" label\n      if (item.isInClawback) {\n        return (\n          <div className=\"flex items-center justify-end\">\n            <ClawbackTimer\n              daysUntilClawback={0}\n              size=\"32\"\n              showLabel={true}\n              labelPosition=\"left\"\n              customLabel=\"Expired\"\n              labelClassName=\"!text-xs !font-medium !text-quaternary\"\n              styleConfig={{ cornerStyle: 'squircle', fillInset: 1 }}\n            />\n          </div>\n        )\n      }\n\n      // Otherwise show ClawbackTimer battery countdown\n      return (\n        <div className=\"flex items-center justify-end\">\n          <ClawbackTimer\n            daysUntilClawback={item.daysUntilClawback}\n            size=\"32\"\n            showLabel={true}\n            labelPosition=\"left\"\n            labelClassName=\"!text-xs !font-medium !text-quaternary\"\n            styleConfig={{ cornerStyle: 'squircle', fillInset: 1 }}\n          />\n        </div>\n      )\n    }\n\n    case 'statusContext': {\n      // Status context: descriptions with relative time\n      const statusDescription = item.statusTransitionDescription\n      const statusTooltip = item.statusTransitionTooltip\n      const statusRelative = item.statusChangedRelative\n      const previousStatus = item.previousStatus\n      const currentStatus = String(item.status)\n\n      // Format timestamp for tooltip\n      const formattedTimestamp = item.statusChangedAt\n        ? format(new Date(item.statusChangedAt), 'MMM d, h:mm a')\n        : null\n\n      // Use provided description or fallback to frontend computation\n      const transition = statusDescription\n        ? { condensed: statusDescription, tooltip: statusTooltip || '', raw: { from: previousStatus, to: currentStatus } }\n        : formatStatusContext(previousStatus ?? null, currentStatus, null)\n\n      // No audit data available\n      if (!transition || !previousStatus) {\n        return (\n          <div className=\"space-y-0.5\">\n            <div className=\"text-tertiary text-xs\">No audit data</div>\n            <div className=\"text-quaternary text-xs\">Pre-audit</div>\n          </div>\n        )\n      }\n\n      // Build tooltip description\n      const tooltipDescription = (\n        <>\n          {formattedTimestamp && <span className=\"mb-1 block opacity-80\">{formattedTimestamp}</span>}\n          {transition.tooltip && <span className=\"mb-1.5 block\">{transition.tooltip}</span>}\n          <span className=\"block text-[10px] opacity-70\">\n            {transition.raw.from} → {transition.raw.to}\n          </span>\n        </>\n      )\n\n      return (\n        <Tooltip title={transition.condensed} description={tooltipDescription} side=\"top\" delay={200}>\n          <div className=\"flex items-baseline gap-1.5\">\n            <span className=\"text-primary max-w-[180px] truncate text-xs\">{transition.condensed}</span>\n            {statusRelative && <span className=\"text-quaternary text-xs\">{statusRelative}</span>}\n          </div>\n        </Tooltip>\n      )\n    }\n\n    default:\n      return null\n  }\n}\n"]}
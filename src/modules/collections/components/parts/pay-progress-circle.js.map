{"version":3,"file":"pay-progress-circle.js","sourceRoot":"/","sources":["other-repos/demo-repo/src/modules/collections/components/parts/pay-progress-circle.tsx"],"names":[],"mappings":"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","sourcesContent":["/**\n * Pay Progress Circle Component\n *\n * Displays a circular progress pie chart showing the amount paid out.\n * Uses semantic tokens for neutral colors that adapt to dark mode.\n */\n\n'use client'\n\nimport { Tooltip } from '@/components/ui/prod/base/tooltip'\nimport { HugeIcon } from '@/components/ui/prod/base/icon'\nimport Tick01Icon from '@hugeicons-pro/core-stroke-rounded/Tick01Icon'\nimport { formatAmount } from '../../utils/formatters'\nimport { cn } from '@/lib/utils'\n\n/**\n * Format a number in compact notation with dollar sign (e.g., $2.02M, $500K)\n */\nconst formatCompactAmount = (amount: number, reduceDecimals = false): string => {\n  if (amount >= 1_000_000) {\n    const decimals = reduceDecimals ? 1 : 2\n    return `$${(amount / 1_000_000).toFixed(decimals)}M`\n  }\n  if (amount >= 1_000) {\n    const decimals = reduceDecimals ? 1 : 2\n    return `$${(amount / 1_000).toFixed(decimals)}K`\n  }\n  const decimals = reduceDecimals ? 1 : 2\n  return `$${amount.toFixed(decimals)}`\n}\n\ninterface PayProgressCircleProps {\n  /** Amount paid out */\n  amountPaid: number\n  /** Total amount (plan total) */\n  totalAmount: number\n  /** Size of the circle in pixels (default: 28) */\n  size?: number\n  /** Stroke width in pixels (default: 3) */\n  strokeWidth?: number\n  /** Stroke color (CSS variable or hex) - default: brand primary */\n  strokeColor?: string\n  /** Background color (CSS variable or hex) - default: quaternary */\n  backgroundColor?: string\n  /** Percentage format: 'number' shows just number, 'percentage' shows with % */\n  percentageFormat?: 'number' | 'percentage'\n  /** Font size for percentage text inside circle (auto-calculated if undefined) */\n  textSize?: number\n  /** Scale multiplier for text size (default: 1.0) */\n  textSizeScale?: number\n  /** Show checkmark icon instead of \"100\" at 100% completion */\n  showCheckmarkAt100?: boolean\n  /** Show amount text outside circle */\n  showAmountText?: boolean\n  /** Show percentage text inside circle (default: true) */\n  showPercentageText?: boolean\n  /** Optional className for the container */\n  className?: string\n  /** Override percentage (0-100) for direct control */\n  percentageOverride?: number\n}\n\nexport const PayProgressCircle = ({\n  amountPaid,\n  totalAmount,\n  size = 28,\n  strokeWidth = 3,\n  strokeColor = 'var(--color-fg-brand-primary)',\n  backgroundColor = 'var(--color-bg-quaternary)',\n  percentageFormat = 'number',\n  textSize,\n  textSizeScale = 1.0,\n  showCheckmarkAt100 = false,\n  showAmountText = false,\n  showPercentageText = true,\n  className,\n  percentageOverride,\n}: PayProgressCircleProps) => {\n  // Use percentage override if provided, otherwise calculate from amountPaid/totalAmount\n  const calculatedPercentage = totalAmount > 0 ? (amountPaid / totalAmount) * 100 : 0\n  const percentage = percentageOverride !== undefined ? percentageOverride : calculatedPercentage\n  const clampedPercentage = Math.max(0, Math.min(100, percentage))\n  const isComplete = clampedPercentage >= 100\n\n  // Determine what to show inside the circle\n  const showCheckmark = showCheckmarkAt100 && isComplete\n  const percentageText = showCheckmark\n    ? ''\n    : percentageFormat === 'number'\n      ? `${clampedPercentage.toFixed(0)}`\n      : `${clampedPercentage.toFixed(0)}%`\n\n  // Calculate radius (accounting for stroke width)\n  const radius = (size - strokeWidth) / 2\n  const center = size / 2\n  const circumference = 2 * Math.PI * radius\n\n  // Calculate stroke dash offset (how much of the circle is filled)\n  const strokeDashoffset = circumference - (clampedPercentage / 100) * circumference\n\n  // Format amounts in compact notation (reduce decimals for denominator)\n  const formattedPaid = formatCompactAmount(amountPaid)\n  const formattedTotal = formatCompactAmount(totalAmount, true)\n\n  // Format full currency values for tooltip\n  const fullPaid = formatAmount(amountPaid)\n  const fullTotal = formatAmount(totalAmount)\n  const tooltipPercentageText = `${clampedPercentage.toFixed(1)}%`\n\n  const tooltipDescription = (\n    <>\n      Paid: {fullPaid}\n      <br />\n      Total: {fullTotal}\n      <br />\n      <span className=\"font-medium\">{tooltipPercentageText} Complete</span>\n    </>\n  )\n\n  return (\n    <Tooltip title=\"Pay Progress\" description={tooltipDescription}>\n      <div className={cn('flex items-center gap-2 cursor-default w-full', className)}>\n        <div className=\"relative\">\n          {/* Circular progress indicator */}\n          <svg\n            width={size}\n            height={size}\n            style={{ transform: 'rotate(-90deg)' }}\n            aria-label={`${formattedPaid} of ${formattedTotal} paid`}\n          >\n            {/* Background circle (unfilled portion) */}\n            <circle\n              cx={center}\n              cy={center}\n              r={radius}\n              fill=\"none\"\n              strokeWidth={strokeWidth}\n              strokeLinecap=\"round\"\n              style={{\n                stroke: backgroundColor,\n              }}\n            />\n\n            {/* Foreground circle (filled portion) - starts at 12 o'clock */}\n            <circle\n              cx={center}\n              cy={center}\n              r={radius}\n              fill=\"none\"\n              strokeWidth={strokeWidth}\n              strokeLinecap=\"round\"\n              strokeDasharray={circumference}\n              strokeDashoffset={strokeDashoffset}\n              style={{\n                stroke: strokeColor,\n                transition: 'stroke-dashoffset 0.3s ease',\n              }}\n            />\n          </svg>\n          {/* Percentage or checkmark inside circle */}\n          {showPercentageText && (\n            <div\n              className=\"absolute inset-0 flex items-center justify-center\"\n              style={{\n                fontSize: showCheckmark\n                  ? undefined\n                  : textSize !== undefined\n                    ? `${textSize * textSizeScale}px`\n                    : `${size * 0.25 * textSizeScale}px`,\n              }}\n            >\n              {showCheckmark ? (\n                <HugeIcon\n                  icon={Tick01Icon}\n                  size={Math.round(size * 0.6 * textSizeScale)}\n                  strokeWidth={2.5}\n                  className=\"text-primary\"\n                />\n              ) : (\n                <span className=\"text-primary font-medium tabular-nums\">\n                  {percentageText}\n                </span>\n              )}\n            </div>\n          )}\n        </div>\n        {/* Amount text outside circle (optional) */}\n        {showAmountText && (\n          <div className=\"flex flex-col gap-0.5\">\n            <span className=\"shrink-0 text-xs font-normal tabular-nums\">\n              <span className=\"text-primary\">{formattedPaid}</span>\n              <span className=\"text-quaternary\"> / </span>\n              <span className=\"text-quaternary\">{formattedTotal}</span>\n            </span>\n          </div>\n        )}\n      </div>\n    </Tooltip>\n  )\n}\n"]}
{"version":3,"file":"metric-tile-bar.js","sourceRoot":"/","sources":["other-repos/demo-repo/src/modules/collections/components/metric-tile-bar.tsx"],"names":[],"mappings":"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","sourcesContent":["/**\n * MetricTileBar Component for Collections\n *\n * Risk activity metric cards that filter the table by status on click.\n * Uses prod MetricCard with METRIC_CARD_PRESETS.flat for hardened styling.\n *\n * Metrics:\n * - At risk: Collections + Last Chance combined (dollar value primary)\n * - Last chance: Contracts in active clawback (dollar value primary)\n * - Settled: Clawed back contracts (dollar value primary)\n * - Default rate: 30-day rate with all-time comparison\n */\n\n'use client'\n\nimport * as React from 'react'\nimport { useMemo, useState } from 'react'\nimport { cn } from '@/lib/utils'\nimport {\n  MetricCard,\n  METRIC_CARD_PRESETS,\n} from '@/components/ui/prod/features/metric-card'\n\nimport type { MetricFilterId } from '../types'\n\n// =============================================================================\n// TYPES\n// =============================================================================\n\nexport interface MetricTileBarProps {\n  /** Currently active metric filter */\n  activeMetric: MetricFilterId | null\n  /** Callback when a metric tile is clicked */\n  onMetricClick: (metricId: MetricFilterId) => void\n  /** Metrics data from the pagination hook */\n  metrics: {\n    collectionsCount: number\n    collectionsAmount: number\n    activeClawbackCount: number\n    activeClawbackAmount: number\n    settledClawbackCount: number\n    settledClawbackAmount: number\n    defaultedOrdersCount: number\n    defaultRateAllTime: number\n  }\n  /** Optional className for the container */\n  className?: string\n}\n\n// =============================================================================\n// CURRENCY FORMATTER\n// =============================================================================\n\nconst formatCurrency = (amount: number): string => {\n  if (amount >= 1000000) {\n    return `$${(amount / 1000000).toFixed(1)}M`\n  }\n  if (amount >= 1000) {\n    return `$${(amount / 1000).toFixed(1)}k`\n  }\n  return `$${amount.toFixed(0)}`\n}\n\n// =============================================================================\n// COMPONENT\n// =============================================================================\n\nexport const MetricTileBar: React.FC<MetricTileBarProps> = ({\n  activeMetric,\n  onMetricClick,\n  metrics,\n  className,\n}) => {\n  const [hoveredId, setHoveredId] = useState<MetricFilterId | null>(null)\n\n  // Compute metric values from pre-calculated metrics\n  const metricValues = useMemo(() => {\n    const atRiskCount = metrics.collectionsCount + metrics.activeClawbackCount\n    const atRiskAmount = metrics.collectionsAmount + metrics.activeClawbackAmount\n\n    return [\n      {\n        id: 'atRisk' as MetricFilterId,\n        label: 'At risk',\n        value: formatCurrency(atRiskAmount),\n        subtext: `${atRiskCount} orders`,\n      },\n      {\n        id: 'clawback' as MetricFilterId,\n        label: 'Last chance',\n        value: formatCurrency(metrics.activeClawbackAmount),\n        subtext: `${metrics.activeClawbackCount} orders`,\n      },\n      {\n        id: 'settled' as MetricFilterId,\n        label: 'Clawed back',\n        value: formatCurrency(metrics.settledClawbackAmount),\n        subtext: `${metrics.settledClawbackCount} orders`,\n      },\n    ]\n  }, [metrics])\n\n  // Format default rate for display\n  const formatRate = (rate: number | null | undefined): string => {\n    if (rate == null || isNaN(rate)) return 'N/A'\n    return `${rate.toFixed(1)}%`\n  }\n\n  const defaultRateDisplay = formatRate(metrics?.defaultRateAllTime)\n  const defaultedCountDisplay = metrics?.defaultedOrdersCount ?? 0\n\n  return (\n    <div className={cn('grid grid-cols-2 gap-3 lg:grid-cols-4', className)}>\n      {metricValues.map((metric) => (\n        <MetricCard\n          key={metric.id}\n          label={metric.label}\n          value={metric.value}\n          count={metric.subtext}\n          config={METRIC_CARD_PRESETS.flat}\n          isActive={activeMetric === metric.id}\n          isHovered={hoveredId === metric.id}\n          onClick={() => onMetricClick(metric.id)}\n          onMouseEnter={() => setHoveredId(metric.id)}\n          onMouseLeave={() => setHoveredId(null)}\n        />\n      ))}\n      {/* Default Rate - Clickable to filter by defaulted orders */}\n      <MetricCard\n        label=\"Default rate\"\n        value={defaultRateDisplay}\n        count={`${defaultedCountDisplay} orders`}\n        config={METRIC_CARD_PRESETS.flat}\n        isActive={activeMetric === 'defaulted'}\n        isHovered={hoveredId === 'defaulted'}\n        onClick={() => onMetricClick('defaulted')}\n        onMouseEnter={() => setHoveredId('defaulted')}\n        onMouseLeave={() => setHoveredId(null)}\n      />\n    </div>\n  )\n}\n\nMetricTileBar.displayName = 'MetricTileBar'\n"]}
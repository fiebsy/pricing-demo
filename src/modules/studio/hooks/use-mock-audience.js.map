{"version":3,"file":"use-mock-audience.js","sourceRoot":"/","sources":["other-repos/demo-repo/src/modules/studio/hooks/use-mock-audience.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * Studio Module - Mock Audience Pagination Hook\n *\n * Simulates server-side pagination with delayed loading\n * for realistic infinite scroll testing.\n */\n\n'use client'\n\nimport { useState, useCallback, useMemo, useRef, useEffect } from 'react'\n\nimport type { AudienceUser, AudienceSortField, AudienceSortOrder, AudienceMetrics } from '../types'\nimport { MOCK_USERS, calculateMetrics } from '../data/mock-users'\nimport { PAGE_SIZE } from '../config/column-config'\n\n// =============================================================================\n// TYPES\n// =============================================================================\n\ninterface UseMockAudienceProps {\n  /** Initial page size */\n  pageSize?: number\n  /** Sort field */\n  sortBy?: AudienceSortField\n  /** Sort order */\n  sortOrder?: AudienceSortOrder\n  /** Search query */\n  searchQuery?: string\n  /** Simulated network delay in ms */\n  delay?: number\n}\n\ninterface UseMockAudienceReturn {\n  /** Currently loaded items */\n  items: AudienceUser[]\n  /** Initial loading state */\n  isLoading: boolean\n  /** Loading more state */\n  isLoadingMore: boolean\n  /** Total count of all items */\n  totalCount: number\n  /** Whether more items exist */\n  hasNextPage: boolean\n  /** Load more items callback */\n  loadMore: () => Promise<void>\n  /** Reset pagination */\n  reset: () => void\n  /** Metrics data */\n  metrics: AudienceMetrics\n}\n\n// =============================================================================\n// SORT COMPARATORS\n// =============================================================================\n\nconst SORT_COMPARATORS: Record<AudienceSortField, (a: AudienceUser, b: AudienceUser) => number> = {\n  NAME: (a, b) => a.name.localeCompare(b.name),\n  MESSAGES: (a, b) => a.messageCount - b.messageCount,\n  LAST_INTERACTED: (a, b) => {\n    const dateA = a.lastInteracted.getTime()\n    const dateB = b.lastInteracted.getTime()\n    return dateA - dateB\n  },\n}\n\n// =============================================================================\n// HOOK\n// =============================================================================\n\nexport const useMockAudience = ({\n  pageSize = PAGE_SIZE,\n  sortBy = 'LAST_INTERACTED',\n  sortOrder = 'DESC',\n  searchQuery,\n  delay = 300,\n}: UseMockAudienceProps = {}): UseMockAudienceReturn => {\n  const [loadedCount, setLoadedCount] = useState(pageSize)\n  const [isLoading, setIsLoading] = useState(true)\n  const [isLoadingMore, setIsLoadingMore] = useState(false)\n  const loadMoreRef = useRef<boolean>(false)\n\n  // Simulate initial load\n  useEffect(() => {\n    setIsLoading(true)\n    const timer = setTimeout(() => {\n      setIsLoading(false)\n    }, delay)\n    return () => clearTimeout(timer)\n  }, [delay])\n\n  // Reset when search/sort changes\n  useEffect(() => {\n    setLoadedCount(pageSize)\n    setIsLoading(true)\n    const timer = setTimeout(() => {\n      setIsLoading(false)\n    }, delay)\n    return () => clearTimeout(timer)\n  }, [searchQuery, sortBy, sortOrder, pageSize, delay])\n\n  // Get sorted and filtered data\n  const processedData = useMemo(() => {\n    let data = [...MOCK_USERS]\n\n    // Apply search filter\n    if (searchQuery && searchQuery.trim()) {\n      const query = searchQuery.toLowerCase().trim()\n      data = data.filter(\n        (item) =>\n          item.name.toLowerCase().includes(query) ||\n          item.email.toLowerCase().includes(query)\n      )\n    }\n\n    // Apply sort\n    const comparator = SORT_COMPARATORS[sortBy]\n    if (comparator) {\n      data.sort((a, b) => {\n        const result = comparator(a, b)\n        return sortOrder === 'ASC' ? result : -result\n      })\n    }\n\n    return data\n  }, [searchQuery, sortBy, sortOrder])\n\n  // Calculate metrics from all users (not just loaded)\n  const metrics = useMemo(() => calculateMetrics(MOCK_USERS), [])\n\n  // Get current page of items\n  const items = useMemo(() => {\n    if (isLoading) return []\n    return processedData.slice(0, loadedCount)\n  }, [processedData, loadedCount, isLoading])\n\n  const totalCount = processedData.length\n  const hasNextPage = loadedCount < totalCount\n\n  // Load more callback\n  const loadMore = useCallback(async () => {\n    if (loadMoreRef.current || !hasNextPage) return\n\n    loadMoreRef.current = true\n    setIsLoadingMore(true)\n\n    // Simulate network delay\n    await new Promise((resolve) => setTimeout(resolve, delay))\n\n    setLoadedCount((prev) => Math.min(prev + 25, totalCount))\n    setIsLoadingMore(false)\n    loadMoreRef.current = false\n  }, [hasNextPage, totalCount, delay])\n\n  // Reset pagination\n  const reset = useCallback(() => {\n    setLoadedCount(pageSize)\n  }, [pageSize])\n\n  return {\n    items,\n    isLoading,\n    isLoadingMore,\n    totalCount,\n    hasNextPage,\n    loadMore,\n    reset,\n    metrics,\n  }\n}\n"]}
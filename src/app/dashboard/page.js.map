{"version":3,"file":"page.js","sourceRoot":"/","sources":["other-repos/demo-repo/src/app/dashboard/page.tsx"],"names":[],"mappings":"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","sourcesContent":["/**\n * Collections Dashboard Page\n *\n * Demo dashboard with mock data, showing:\n * - Metric tiles for quick filtering\n * - FilterMenu with submenu navigation\n * - ExpandingSearch with shine border\n * - Hardened table configuration\n * - ClawbackTimer for countdowns\n *\n * Route: /dashboard\n */\n\n'use client'\n\nimport React, { useState, useMemo, useCallback, useDeferredValue } from 'react'\n\nimport {\n  StickyDataTable,\n  TableEmptyState,\n  useColumnConfiguration,\n  type SelectionState,\n} from '@/components/ui/prod/data/sticky-data-table'\n\n// Collections module imports\nimport {\n  HARDENED_DIMENSIONS,\n  HARDENED_BORDER_CONFIG,\n  HARDENED_BACKGROUND_CONFIG,\n  HARDENED_TOOLBAR_CONFIG,\n  HARDENED_FEATURES,\n} from '@/modules/collections/config/hardened-preset'\nimport {\n  PAGE_SIZE,\n  HARDENED_COLUMNS,\n  COLUMN_LABELS,\n  COLUMN_TO_SORT_FIELD,\n} from '@/modules/collections/config/column-config'\nimport { FILTER_DISPLAY_LABELS, applyFilters } from '@/modules/collections/config/filter-config'\nimport { useMockPagination } from '@/modules/collections/hooks/use-mock-pagination'\nimport { MetricTileBar } from '@/modules/collections/components/metric-tile-bar'\nimport { LeftToolbarContent, RightToolbarContent } from '@/modules/collections/components/toolbar'\nimport { renderCell } from '@/modules/collections/components/cell-renderer'\n\nimport type {\n  MetricFilterId,\n  ActiveFilter,\n  FilterId,\n  PartnerRiskSortField,\n  PartnerRiskSortOrder,\n} from '@/modules/collections/types'\n\n// ============================================================================\n// MAIN PAGE COMPONENT\n// ============================================================================\n\nexport default function DashboardPage() {\n  // Search state\n  const [searchQuery, setSearchQuery] = useState('')\n  const [searchExpanded, setSearchExpanded] = useState(false)\n\n  // Filter state - default to \"At Risk\" (Collections + Last Chance)\n  const [activeFilters, setActiveFilters] = useState<ActiveFilter[]>([\n    {\n      id: 'status-collections',\n      label: FILTER_DISPLAY_LABELS['status-collections'].label,\n      value: FILTER_DISPLAY_LABELS['status-collections'].value,\n      category: FILTER_DISPLAY_LABELS['status-collections'].category,\n    },\n    {\n      id: 'status-clawback',\n      label: FILTER_DISPLAY_LABELS['status-clawback'].label,\n      value: FILTER_DISPLAY_LABELS['status-clawback'].value,\n      category: FILTER_DISPLAY_LABELS['status-clawback'].category,\n    },\n  ])\n\n  // Derive activeMetric from activeFilters for metric tile highlighting\n  const activeMetric = useMemo((): MetricFilterId | null => {\n    const hasCollections = activeFilters.some((f) => f.id === 'status-collections')\n    const hasClawback = activeFilters.some((f) => f.id === 'status-clawback')\n    const hasSettled = activeFilters.some((f) => f.id === 'status-settled')\n    const hasDefaulted = activeFilters.some((f) => f.id === 'outcome-defaulted')\n\n    // Only one filter type active = specific metric\n    if (hasDefaulted && !hasCollections && !hasClawback && !hasSettled) return 'defaulted'\n    if (hasSettled && !hasCollections && !hasClawback && !hasDefaulted) return 'settled'\n    if (hasClawback && !hasCollections && !hasSettled && !hasDefaulted) return 'clawback'\n    // Both collections and clawback = \"At Risk\"\n    if (hasCollections && hasClawback && !hasSettled && !hasDefaulted) return 'atRisk'\n\n    return null\n  }, [activeFilters])\n\n  // Server-side sort state\n  const [sortBy, setSortBy] = useState<PartnerRiskSortField>('STATUS_CHANGED_AT')\n  const [sortOrder, setSortOrder] = useState<PartnerRiskSortOrder>('DESC')\n  const [sortColumnKey, setSortColumnKey] = useState<string | null>('statusContext')\n\n  // Column configuration for drag-to-reorder\n  const {\n    columns: orderedColumns,\n    reorderColumns,\n    isHydrated: isColumnConfigHydrated,\n  } = useColumnConfiguration({\n    columns: HARDENED_COLUMNS,\n    storageKey: 'collections-dashboard-columns',\n  })\n\n  // Fetch data using mock pagination hook (simulates API)\n  const {\n    items,\n    isLoading,\n    isLoadingMore,\n    totalCount,\n    hasNextPage,\n    loadMore,\n    metrics,\n  } = useMockPagination({\n    pageSize: PAGE_SIZE,\n    sortBy,\n    sortOrder,\n    searchQuery: searchQuery || undefined,\n    delay: 300,\n  })\n\n  // Deferred filters for table - allows chips to animate immediately while table catches up\n  // This separates the high-priority chip animation from the lower-priority table re-render\n  const deferredActiveFilters = useDeferredValue(activeFilters)\n\n  // Apply client-side filters using DEFERRED value - table updates are deprioritized\n  // Chips use immediate activeFilters, table uses deferredActiveFilters\n  const filteredItems = useMemo(() => {\n    return applyFilters(items, deferredActiveFilters)\n  }, [items, deferredActiveFilters])\n\n  // Metric click handler - toggle status filters on/off\n  const handleMetricClick = useCallback((metricId: MetricFilterId) => {\n    // Determine which filters correspond to this metric\n    const metricToFilters: Record<MetricFilterId, FilterId[]> = {\n      atRisk: ['status-collections', 'status-clawback'],\n      clawback: ['status-clawback'],\n      settled: ['status-settled'],\n      defaulted: ['outcome-defaulted'],\n    }\n\n    const filterIds = metricToFilters[metricId]\n\n    setActiveFilters((prev) => {\n      // Check if this metric is currently active (toggle off if so)\n      const isCurrentlyActive =\n        metricId === 'atRisk'\n          ? prev.some((f) => f.id === 'status-collections') && prev.some((f) => f.id === 'status-clawback')\n          : metricId === 'clawback'\n            ? prev.some((f) => f.id === 'status-clawback') && !prev.some((f) => f.id === 'status-collections')\n            : metricId === 'settled'\n              ? prev.some((f) => f.id === 'status-settled')\n              : prev.some((f) => f.id === 'outcome-defaulted')\n\n      if (isCurrentlyActive) {\n        // Remove all status filters for this metric\n        return prev.filter((f) => !filterIds.includes(f.id))\n      } else {\n        // Remove any existing status/outcome filters first, then add new ones\n        const withoutStatusFilters = prev.filter(\n          (f) => !['status-collections', 'status-clawback', 'status-settled', 'outcome-defaulted'].includes(f.id)\n        )\n        // Add the filters for this metric\n        const newFilters = filterIds.map((id) => ({\n          id,\n          label: FILTER_DISPLAY_LABELS[id].label,\n          value: FILTER_DISPLAY_LABELS[id].value,\n          category: FILTER_DISPLAY_LABELS[id].category,\n        }))\n        return [...withoutStatusFilters, ...newFilters]\n      }\n    })\n  }, [])\n\n  // Filter handlers\n  const handleFilterSelect = useCallback((filterId: string) => {\n    const id = filterId as FilterId\n    const displayInfo = FILTER_DISPLAY_LABELS[id]\n    if (!displayInfo) return\n\n    setActiveFilters((prev) => {\n      // Check if already active\n      if (prev.some((f) => f.id === id)) {\n        // Remove it\n        return prev.filter((f) => f.id !== id)\n      } else {\n        // Add it\n        return [\n          ...prev,\n          {\n            id,\n            label: displayInfo.label,\n            value: displayInfo.value,\n            category: displayInfo.category,\n          },\n        ]\n      }\n    })\n  }, [])\n\n  const handleFilterRemove = useCallback((filterId: string) => {\n    setActiveFilters((prev) => prev.filter((f) => f.id !== filterId))\n  }, [])\n\n  const handleFilterChange = useCallback((oldFilterId: string, newFilterId: string) => {\n    const id = newFilterId as FilterId\n    const displayInfo = FILTER_DISPLAY_LABELS[id]\n    if (!displayInfo) return\n\n    setActiveFilters((prev) =>\n      prev.map((f) =>\n        f.id === oldFilterId\n          ? {\n              id,\n              label: displayInfo.label,\n              value: displayInfo.value,\n              category: displayInfo.category,\n            }\n          : f\n      )\n    )\n  }, [])\n\n  const handleFiltersClear = useCallback(() => {\n    setActiveFilters([])\n  }, [])\n\n  // Clear ALL filters, search, and metric filter - used by empty state \"Clear filters\" button\n  const handleClearAll = useCallback(() => {\n    setActiveFilters([])\n    setSearchQuery('')\n  }, [])\n\n  // Determine if any filters/search are active (for empty state button visibility)\n  const hasAnyFilters = activeFilters.length > 0 || !!searchQuery || activeMetric !== null\n\n  // Handle server-side sort\n  const handleServerSort = useCallback((columnKey: string, direction: 'asc' | 'desc') => {\n    const backendSortField = COLUMN_TO_SORT_FIELD[columnKey]\n\n    if (!backendSortField) {\n      // Column not sortable on server\n      return\n    }\n\n    setSortColumnKey(columnKey)\n    setSortBy(backendSortField)\n    setSortOrder(direction === 'asc' ? 'ASC' : 'DESC')\n  }, [])\n\n  // Row click handler (no-op for demo, would open sheet in real app)\n  const handleRowClick = useCallback((row: typeof items[0]) => {\n    console.log('Row clicked:', row.contractId)\n    // In real app: setSelectedContractId(row.contractId); setSheetOpen(true)\n  }, [])\n\n  // Export handlers (simplified for demo)\n  const handleExportAll = useCallback(async () => {\n    console.log('Export all:', filteredItems.length, 'rows')\n    // In real app: generate CSV and download\n  }, [filteredItems.length])\n\n  const handleExportSelected = useCallback(async (selectionState: SelectionState) => {\n    console.log('Export selected:', selectionState?.selectedIds.size ?? 0, 'rows')\n    // In real app: generate CSV from selected rows and download\n  }, [])\n\n  return (\n    <div className=\"mx-auto w-full max-w-[1200px] px-6 pt-16\">\n      {/* Page Header */}\n      <div className=\"mb-6\">\n        <h1 className=\"text-primary text-xl font-semibold lg:text-2xl\">Risk</h1>\n        <p className=\"text-tertiary mt-1 text-sm\">Collections and clawback activity</p>\n      </div>\n\n      {/* Metric Tiles - Risk Activity Overview */}\n      <MetricTileBar\n        activeMetric={activeMetric}\n        onMetricClick={handleMetricClick}\n        metrics={metrics}\n        className=\"mb-8\"\n      />\n\n      {/* Risk Activity Table - Hardened Configuration */}\n      <StickyDataTable\n        data={isLoading ? [] : filteredItems}\n        columns={orderedColumns}\n        columnLabels={COLUMN_LABELS}\n        renderCell={renderCell}\n        onRowClick={handleRowClick}\n        // Hardened dimensions\n        borderRadius={HARDENED_DIMENSIONS.borderRadius}\n        headerHeight={HARDENED_DIMENSIONS.headerHeight}\n        rowHeight={HARDENED_DIMENSIONS.rowHeight}\n        // Hardened styling\n        borderConfig={HARDENED_BORDER_CONFIG}\n        backgroundConfig={HARDENED_BACKGROUND_CONFIG}\n        toolbarLayout={HARDENED_TOOLBAR_CONFIG}\n        className=\"relative\"\n        // Features - hardened\n        enableSelection={HARDENED_FEATURES.enableSelection}\n        showColumnControl={HARDENED_FEATURES.showColumnControl}\n        enableColumnReorder={HARDENED_FEATURES.enableColumnReorder}\n        onReorderColumns={reorderColumns}\n        isColumnConfigHydrated={isColumnConfigHydrated}\n        getRowId={(row) => String(row.id)}\n        // Left toolbar - Filter menu\n        leftToolbar={\n          <LeftToolbarContent\n            activeFilters={activeFilters}\n            onFilterSelect={handleFilterSelect}\n            onFilterChange={handleFilterChange}\n            onFilterRemove={handleFilterRemove}\n            onFiltersClear={handleFiltersClear}\n          />\n        }\n        // Right toolbar - Expanding search\n        rightToolbar={\n          <RightToolbarContent\n            value={searchQuery}\n            onChange={setSearchQuery}\n            expanded={searchExpanded}\n            onExpandedChange={setSearchExpanded}\n          />\n        }\n        // Count display\n        showCount={HARDENED_FEATURES.showCount}\n        totalCount={filteredItems.length}\n        countLabel=\"contracts\"\n        // Server-side sorting\n        serverSideSort={true}\n        onServerSort={handleServerSort}\n        serverSortColumn={sortColumnKey}\n        serverSortDirection={sortOrder === 'ASC' ? 'asc' : 'desc'}\n        // Export\n        exportAll={handleExportAll}\n        exportSelected={handleExportSelected}\n        // Infinite scroll\n        infiniteScroll={{\n          hasNextPage,\n          isLoadingMore,\n          onLoadMore: loadMore,\n          threshold: 200,\n        }}\n        // Loading state\n        isLoading={isLoading}\n        // Empty states\n        searchTerm={searchQuery || undefined}\n        hasActiveFilters={hasAnyFilters}\n        emptyState={\n          <TableEmptyState\n            variant=\"empty\"\n            title=\"No risk activity\"\n            description=\"This partner doesn't have any contracts in collections or clawback status.\"\n          />\n        }\n        noResultsState={\n          <TableEmptyState\n            variant=\"no-results\"\n            searchTerm={searchQuery || undefined}\n            description={\n              searchQuery\n                ? undefined // Uses default \"No results found for X\" when searchTerm is set\n                : activeFilters.length > 0 || activeMetric\n                  ? `No contracts match your current filters. Try adjusting or clearing them.`\n                  : undefined\n            }\n            secondaryAction={\n              hasAnyFilters\n                ? { label: 'Clear filters', onClick: handleClearAll }\n                : undefined\n            }\n          />\n        }\n      />\n    </div>\n  )\n}\n"]}